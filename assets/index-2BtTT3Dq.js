import{_ as ye}from"./CosUploader-Bzc04wBn.js";import{C as Ce,D as ke,E as xe,F as we,N as Ie,a as _e}from"./supabaseAction-DTzG44gK.js";import{b6 as Te,b7 as $e,b8 as D,b9 as R,z as F,a5 as _,C as oe,ba as ze,A as Ne,d as pe,x as m,ak as Se,bb as Be,av as Le,bc as Pe,bd as De,be as Re,bf as Me,bg as je,a6 as Ee,bh as He,D as Ae,E as be,a8 as Fe,a as ne,bi as Ue,G as S,H as Ve,r as x,j as We,k as Oe,l as Xe,b as U,o as H,f as a,w as u,i as n,N as M,B as T,h as C,t as A,m as qe,p as B,bj as Ke,L as de,M as ce,T as Ge,s as Je,v as re,n as ae,e as X,c as Qe,y as Ye,_ as Ze}from"./index-C5NNhcj1.js";import{b as et,a as tt,c as lt,N as ot}from"./cos-js-sdk-v5-Ci1OAid3.js";import{N as L}from"./Space-B1Q4eXpn.js";import{N as rt}from"./Form-Dwv7jmx4.js";import{N as V}from"./text-lCZzyaYh.js";function at(r){const{lineHeight:l,borderRadius:d,fontWeightStrong:s,baseColor:f,dividerColor:c,actionColor:h,textColor1:p,textColor2:v,closeColorHover:y,closeColorPressed:I,closeIconColor:$,closeIconColorHover:z,closeIconColorPressed:g,infoColor:b,successColor:j,warningColor:i,errorColor:N,fontSize:W}=r;return Object.assign(Object.assign({},$e),{fontSize:W,lineHeight:l,titleFontWeight:s,borderRadius:d,border:`1px solid ${c}`,color:h,titleTextColor:p,iconColor:v,contentTextColor:v,closeBorderRadius:d,closeColorHover:y,closeColorPressed:I,closeIconColor:$,closeIconColorHover:z,closeIconColorPressed:g,borderInfo:`1px solid ${D(f,R(b,{alpha:.25}))}`,colorInfo:D(f,R(b,{alpha:.08})),titleTextColorInfo:p,iconColorInfo:b,contentTextColorInfo:v,closeColorHoverInfo:y,closeColorPressedInfo:I,closeIconColorInfo:$,closeIconColorHoverInfo:z,closeIconColorPressedInfo:g,borderSuccess:`1px solid ${D(f,R(j,{alpha:.25}))}`,colorSuccess:D(f,R(j,{alpha:.08})),titleTextColorSuccess:p,iconColorSuccess:j,contentTextColorSuccess:v,closeColorHoverSuccess:y,closeColorPressedSuccess:I,closeIconColorSuccess:$,closeIconColorHoverSuccess:z,closeIconColorPressedSuccess:g,borderWarning:`1px solid ${D(f,R(i,{alpha:.33}))}`,colorWarning:D(f,R(i,{alpha:.08})),titleTextColorWarning:p,iconColorWarning:i,contentTextColorWarning:v,closeColorHoverWarning:y,closeColorPressedWarning:I,closeIconColorWarning:$,closeIconColorHoverWarning:z,closeIconColorPressedWarning:g,borderError:`1px solid ${D(f,R(N,{alpha:.25}))}`,colorError:D(f,R(N,{alpha:.08})),titleTextColorError:p,iconColorError:N,contentTextColorError:v,closeColorHoverError:y,closeColorPressedError:I,closeIconColorError:$,closeIconColorHoverError:z,closeIconColorPressedError:g})}const nt={common:Te,self:at},st=F("alert",`
 line-height: var(--n-line-height);
 border-radius: var(--n-border-radius);
 position: relative;
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-color);
 text-align: start;
 word-break: break-word;
`,[_("border",`
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 transition: border-color .3s var(--n-bezier);
 border: var(--n-border);
 pointer-events: none;
 `),oe("closable",[F("alert-body",[_("title",`
 padding-right: 24px;
 `)])]),_("icon",{color:"var(--n-icon-color)"}),F("alert-body",{padding:"var(--n-padding)"},[_("title",{color:"var(--n-title-text-color)"}),_("content",{color:"var(--n-content-text-color)"})]),ze({originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.9)"}}),_("icon",`
 position: absolute;
 left: 0;
 top: 0;
 align-items: center;
 justify-content: center;
 display: flex;
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 margin: var(--n-icon-margin);
 `),_("close",`
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--n-close-margin);
 `),oe("show-icon",[F("alert-body",{paddingLeft:"calc(var(--n-icon-margin-left) + var(--n-icon-size) + var(--n-icon-margin-right))"})]),oe("right-adjust",[F("alert-body",{paddingRight:"calc(var(--n-close-size) + var(--n-padding) + 2px)"})]),F("alert-body",`
 border-radius: var(--n-border-radius);
 transition: border-color .3s var(--n-bezier);
 `,[_("title",`
 transition: color .3s var(--n-bezier);
 font-size: 16px;
 line-height: 19px;
 font-weight: var(--n-title-font-weight);
 `,[Ne("& +",[_("content",{marginTop:"9px"})])]),_("content",{transition:"color .3s var(--n-bezier)",fontSize:"var(--n-font-size)"})]),_("icon",{transition:"color .3s var(--n-bezier)"})]),it=Object.assign(Object.assign({},be.props),{title:String,showIcon:{type:Boolean,default:!0},type:{type:String,default:"default"},bordered:{type:Boolean,default:!0},closable:Boolean,onClose:Function,onAfterLeave:Function,onAfterHide:Function}),fe=pe({name:"Alert",inheritAttrs:!1,props:it,slots:Object,setup(r){const{mergedClsPrefixRef:l,mergedBorderedRef:d,inlineThemeDisabled:s,mergedRtlRef:f}=Ae(r),c=be("Alert","-alert",st,nt,r,l),h=Fe("Alert",f,l),p=ne(()=>{const{common:{cubicBezierEaseInOut:g},self:b}=c.value,{fontSize:j,borderRadius:i,titleFontWeight:N,lineHeight:W,iconSize:q,iconMargin:P,iconMarginRtl:K,closeIconSize:G,closeBorderRadius:J,closeSize:Q,closeMargin:Y,closeMarginRtl:Z,padding:ee}=b,{type:w}=r,{left:te,right:le}=Ue(P);return{"--n-bezier":g,"--n-color":b[S("color",w)],"--n-close-icon-size":G,"--n-close-border-radius":J,"--n-close-color-hover":b[S("closeColorHover",w)],"--n-close-color-pressed":b[S("closeColorPressed",w)],"--n-close-icon-color":b[S("closeIconColor",w)],"--n-close-icon-color-hover":b[S("closeIconColorHover",w)],"--n-close-icon-color-pressed":b[S("closeIconColorPressed",w)],"--n-icon-color":b[S("iconColor",w)],"--n-border":b[S("border",w)],"--n-title-text-color":b[S("titleTextColor",w)],"--n-content-text-color":b[S("contentTextColor",w)],"--n-line-height":W,"--n-border-radius":i,"--n-font-size":j,"--n-title-font-weight":N,"--n-icon-size":q,"--n-icon-margin":P,"--n-icon-margin-rtl":K,"--n-close-size":Q,"--n-close-margin":Y,"--n-close-margin-rtl":Z,"--n-padding":ee,"--n-icon-margin-left":te,"--n-icon-margin-right":le}}),v=s?Ve("alert",ne(()=>r.type[0]),p,r):void 0,y=x(!0),I=()=>{const{onAfterLeave:g,onAfterHide:b}=r;g&&g(),b&&b()};return{rtlEnabled:h,mergedClsPrefix:l,mergedBordered:d,visible:y,handleCloseClick:()=>{var g;Promise.resolve((g=r.onClose)===null||g===void 0?void 0:g.call(r)).then(b=>{b!==!1&&(y.value=!1)})},handleAfterLeave:()=>{I()},mergedTheme:c,cssVars:s?void 0:p,themeClass:v==null?void 0:v.themeClass,onRender:v==null?void 0:v.onRender}},render(){var r;return(r=this.onRender)===null||r===void 0||r.call(this),m(He,{onAfterLeave:this.handleAfterLeave},{default:()=>{const{mergedClsPrefix:l,$slots:d}=this,s={class:[`${l}-alert`,this.themeClass,this.closable&&`${l}-alert--closable`,this.showIcon&&`${l}-alert--show-icon`,!this.title&&this.closable&&`${l}-alert--right-adjust`,this.rtlEnabled&&`${l}-alert--rtl`],style:this.cssVars,role:"alert"};return this.visible?m("div",Object.assign({},Se(this.$attrs,s)),this.closable&&m(Be,{clsPrefix:l,class:`${l}-alert__close`,onClick:this.handleCloseClick}),this.bordered&&m("div",{class:`${l}-alert__border`}),this.showIcon&&m("div",{class:`${l}-alert__icon`,"aria-hidden":"true"},Le(d.icon,()=>[m(Pe,{clsPrefix:l},{default:()=>{switch(this.type){case"success":return m(je,null);case"info":return m(Me,null);case"warning":return m(Re,null);case"error":return m(De,null);default:return null}}})])),m("div",{class:[`${l}-alert-body`,this.mergedBordered&&`${l}-alert-body--bordered`]},Ee(d.header,f=>{const c=f||this.title;return c?m("div",{class:`${l}-alert-body__title`},c):null}),d.default&&m("div",{class:`${l}-alert-body__content`},d))):null}})}});function ut(){return Ce()}function ge(r){return xe(r)}function dt(r,l){return ke(r,l)}function ve(r){return we(r)}function ct(r){const l=[],d=/@(\w+)\s*\{\s*([^,]+)\s*,\s*([\s\S]*?)\n\}/g;let s;for(;(s=d.exec(r))!==null;){const[,f,c,h]=s,p=ft(h);l.push({type:f.toLowerCase(),key:c.trim(),fields:p})}return l}function ft(r){const l={},d=/(\w+(?:\+\w+)?)\s*=\s*\{([^{}]*(?:\{[^{}]*\}[^{}]*)*)\}|(\w+(?:\+\w+)?)\s*=\s*([^,\n]+)/g;let s;for(;(s=d.exec(r))!==null;){const f=(s[1]||s[3]).trim();let c=(s[2]||s[4]||"").trim();c=c.replace(/^\s*\{|\}\s*$/g,""),c=c.replace(/^\s*"(.*?)"\s*$/g,"$1"),c=c.replace(/\s+/g," ").trim(),c&&(l[f]=c)}return l}function vt(r){if(!r)return"";let l=r.replace(/\{[^}]*\}/g,"").trim();return l=l.replace(/\s+and\s+/g,", "),l}function pt(r){const l=[],d=(r.fields.title||"").toLowerCase(),s=(r.fields.abstract||"").toLowerCase();return(r.fields.booktitle||"").toLowerCase(),(d.includes("mol")||s.includes("molecular")||s.includes("molecule")||s.includes("drug"))&&l.push("Mol"),(d.includes("llm")||d.includes("language model")||s.includes("language model")||s.includes("bert")||s.includes("transformer"))&&l.push("LLM"),(d.includes("bayesian")||d.includes("flow")||s.includes("bayesian flow")||s.includes("bfn"))&&l.push("BFN"),(d.includes("diffusion")||s.includes("diffusion"))&&l.push("Diffusion"),l}function bt(r){const l=r.fields.year||"",d=r.fields.month||"";if(!l)return new Date().toISOString().split("T")[0];const f={jan:"01",january:"01",feb:"02",february:"02",mar:"03",march:"03",apr:"04",april:"04",may:"05",jun:"06",june:"06",jul:"07",july:"07",aug:"08",august:"08",sep:"09",september:"09",oct:"10",october:"10",nov:"11",november:"11",dec:"12",december:"12"}[d.toLowerCase()]||"01";return`${l}-${f}-01`}function gt(r){return r.fields.image||""}function ht(r){const l=[];l.push(`@${r.type}{${r.key},`);const d=["author","title","booktitle","journal","year","month","pages","publisher","volume","number","doi","url","eprint","code","abstract"];for(const s of d)r.fields[s]&&l.push(`  ${s} = {${r.fields[s]}},`);for(const[s,f]of Object.entries(r.fields))!d.includes(s)&&s!=="image"&&!s.includes("+")&&l.push(`  ${s} = {${f}},`);return l.push("}"),l.join(`
`)}function mt(r){const l=pt(r);return{title:r.fields.title||"",content:r.fields.abstract||"",cover:gt(r),tag:l.join(","),date:bt(r),link_url:r.fields.eprint||r.fields.url||"",author:vt(r.fields.author||""),booktitle:r.fields.booktitle||r.fields.journal||"",code_url:r.fields.code||"",bib:ht(r)}}async function yt(r,l,d){const s=ct(r),f=[];let c=0;console.log(`解析到 ${s.length} 个 BibTeX 条目`);for(let h=0;h<s.length;h++){const p=s[h];try{if(l==null||l(h+1,s.length,p.fields.title||p.key),!p.fields.title)throw new Error("缺少标题字段");const v=mt(p);await ge(v),c++,await new Promise(y=>setTimeout(y,100))}catch(v){const y=`导入条目 ${p.key} 失败: ${v instanceof Error?v.message:String(v)}`;f.push(y),console.error(y,p),d==null||d(y,p)}}return{success:c,errors:f}}async function Ct(r,l,d){return new Promise((s,f)=>{const c=new FileReader;c.onload=async h=>{var p;try{const v=(p=h.target)==null?void 0:p.result,y=await yt(v,l,d);s(y)}catch(v){f(v)}},c.onerror=()=>{f(new Error("文件读取失败"))},c.readAsText(r,"utf-8")})}const kt={class:"p-4"},xt={key:0},wt={key:0},It={style:{"max-height":"200px","overflow-y":"auto","margin-top":"8px"}},_t=pe({__name:"index",setup(r){const l=We(),d=x(!1),s=x(!1),f=x(!1),c=x(""),h=x([]),p=x(!1),v=x(!1),y=x(0),I=x(0),$=x(0),z=x(""),g=x(null),b=x(!1),j=[{label:"Mol",value:"Mol"},{label:"LLM",value:"LLM"},{label:"BFN",value:"BFN"},{label:"Diffusion",value:"Diffusion"}],i=Oe({title:"",content:"",cover:"",tags:[],link_url:"",author:"",booktitle:"",code_url:"",bib:"",date:null}),N=x([]),W=[{title:"ID",key:"id",width:80,ellipsis:{tooltip:!0}},{title:"封面图片",key:"cover",width:120,render(t){return t?t.cover?m(ot,{src:t.cover,width:60,height:40,objectFit:"cover",style:"border-radius: 4px;"}):"暂无图片":"数据错误"}},{title:"标题",key:"title",width:200,ellipsis:{tooltip:!0},render(t){return(t==null?void 0:t.title)||"-"}},{title:"作者",key:"author",width:120,ellipsis:{tooltip:!0},render(t){return(t==null?void 0:t.author)||"-"}},{title:"内容",key:"content",width:250,ellipsis:{tooltip:!0},render(t){if(!t)return"-";const e=t.content||"";return e.length>50?e.substring(0,50)+"...":e}},{title:"标签",key:"tag",width:150,render(t){if(!t||!t.tag)return"-";const e=t.tag.split(",").filter(o=>o.trim());return m(L,{size:"small"},{default:()=>e.map(o=>m(Ye,{type:"info",size:"small",key:o},{default:()=>o.trim()}))})}},{title:"代码链接",key:"code_url",width:120,render(t){return!t||!t.code_url?"-":m(T,{text:!0,type:"primary",size:"small",onClick:()=>window.open(t.code_url,"_blank")},{default:()=>"查看代码"})}},{title:"文章链接",key:"link_url",width:120,render(t){return!t||!t.link_url?"-":m(T,{text:!0,type:"primary",size:"small",onClick:()=>window.open(t.link_url,"_blank")},{default:()=>"查看文章"})}},{title:"发布日期",key:"date",width:120,render(t){return(t==null?void 0:t.date)||"-"}},{title:"创建时间",key:"created_at",width:150,render(t){return t&&t.created_at?new Date(t.created_at).toLocaleDateString("zh-CN"):"-"}},{title:"操作",key:"actions",width:150,fixed:"right",render(t){return!t||!t.id?"-":m(L,null,{default:()=>[m(T,{size:"small",type:"primary",onClick:()=>G(t)},{default:()=>"编辑"}),m(T,{size:"small",type:"error",onClick:()=>Y(t.id)},{default:()=>"删除"})]})}}],q=ne(()=>c.value?N.value.filter(t=>{var e,o,k,E,O,se,ie,ue;return t&&(((e=t.title)==null?void 0:e.includes(c.value))||((o=t.content)==null?void 0:o.includes(c.value))||((k=t.tag)==null?void 0:k.includes(c.value))||((E=t.link_url)==null?void 0:E.includes(c.value))||((O=t.author)==null?void 0:O.includes(c.value))||((se=t.booktitle)==null?void 0:se.includes(c.value))||((ie=t.code_url)==null?void 0:ie.includes(c.value))||((ue=t.bib)==null?void 0:ue.includes(c.value)))}):N.value);async function P(){d.value=!0;try{const t=await ut();N.value=(t||[]).filter(e=>e&&e.id)}catch(t){console.error("加载发布数据失败:",t),l.error("加载数据失败"),N.value=[]}finally{d.value=!1}}function K(){f.value=!1,Object.assign(i,{title:"",content:"",cover:"",tags:[],link_url:"",author:"",booktitle:"",code_url:"",bib:"",date:null}),s.value=!0}function G(t){f.value=!0;let e=null;t.date&&J(t.date)&&(e=new Date(t.date).getTime());const o=t.tag?t.tag.split(",").filter(k=>k.trim()).map(k=>k.trim()):[];Object.assign(i,{...t,tags:o,link_url:t.link_url||"",author:t.author||"",booktitle:t.booktitle||"",code_url:t.code_url||"",bib:t.bib||"",date:e}),s.value=!0}function J(t){if(!t||!/^\d{4}-\d{2}-\d{2}$/.test(t))return!1;const o=new Date(t);return o instanceof Date&&!isNaN(o.getTime())}async function Q(){var t;if(!i.title||!i.content){l.error("请填写标题和内容");return}d.value=!0;try{let e="";i.date?typeof i.date=="number"?e=new Date(i.date).toISOString().split("T")[0]:typeof i.date=="string"&&(e=i.date):e=new Date().toISOString().split("T")[0];const o=((t=i.tags)==null?void 0:t.join(","))||"",k={title:i.title,content:i.content,cover:i.cover||"",tag:o,link_url:i.link_url||"",author:i.author||"",booktitle:i.booktitle||"",code_url:i.code_url||"",bib:i.bib||"",date:e};f.value&&i.id?(await dt(i.id,k),l.success("更新成功")):(await ge(k),l.success("新增成功")),s.value=!1,await P()}catch(e){console.error("保存发布失败:",e),l.error("保存失败")}finally{d.value=!1}}async function Y(t){d.value=!0;try{await ve(t),l.success("删除成功"),await P()}catch(e){console.error("删除发布失败:",e),l.error("删除失败")}finally{d.value=!1}}async function Z(){if(h.value.length===0){l.warning("请选择要删除的项目");return}d.value=!0;try{await Promise.all(h.value.map(t=>ve(t))),l.success(`成功删除 ${h.value.length} 个项目`),h.value=[],await P()}catch(t){console.error("批量删除失败:",t),l.error("批量删除失败")}finally{d.value=!1}}function ee(t){h.value=t.map(e=>String(e))}Xe(()=>{P()});const w=()=>{_e(i.id,"publications"),i.cover=""};async function te({file:t}){var e;if(t.file){if(!((e=t.name)!=null&&e.toLowerCase().endsWith(".bib"))){l.error("请选择 .bib 文件");return}v.value=!0,y.value=0,$.value=0,I.value=0,z.value="";try{const o=await Ct(t.file,(k,E,O)=>{$.value=k,I.value=E,z.value=O,y.value=Math.round(k/E*100)},(k,E)=>{console.error("导入错误:",k,E)});g.value=o,b.value=!0,o.success>0&&(l.success(`成功导入 ${o.success} 条记录`),await P()),o.errors.length>0&&l.warning(`${o.errors.length} 条记录导入失败`)}catch(o){console.error("BibTeX 导入失败:",o),l.error("导入失败: "+(o instanceof Error?o.message:String(o)))}finally{v.value=!1,p.value=!1}}}function le(){p.value=!1,v.value=!1}function he(){p.value=!0,g.value=null,b.value=!1}function me(){b.value=!1,g.value=null}return(t,e)=>(H(),U("div",kt,[a(n(qe),{title:"发布管理",bordered:!1},{"header-extra":u(()=>[a(n(L),null,{default:u(()=>[a(n(M),{value:c.value,"onUpdate:value":e[0]||(e[0]=o=>c.value=o),placeholder:"搜索标题、作者、内容、标签、链接等",clearable:"",style:{width:"300px"}},null,8,["value"]),a(n(T),{onClick:he},{default:u(()=>e[15]||(e[15]=[C(" 导入 BibTeX ")])),_:1}),a(n(T),{type:"error",disabled:h.value.length===0,onClick:Z},{default:u(()=>[C(" 批量删除 ("+A(h.value.length)+") ",1)]),_:1},8,["disabled"]),a(n(T),{type:"primary",onClick:K},{default:u(()=>e[16]||(e[16]=[C(" 新增发布 ")])),_:1})]),_:1})]),default:u(()=>[a(n(Ie),{loading:d.value,columns:W,data:q.value,pagination:{pageSize:10},"row-key":o=>(o==null?void 0:o.id)||"","scroll-x":1440,"checked-row-keys":h.value,"onUpdate:checkedRowKeys":ee},null,8,["loading","data","row-key","checked-row-keys"])]),_:1}),a(n(re),{show:s.value,"onUpdate:show":e[12]||(e[12]=o=>s.value=o),preset:"dialog",style:{width:"800px"}},{header:u(()=>[C(A(f.value?"编辑发布":"新增发布"),1)]),action:u(()=>[a(n(L),null,{default:u(()=>[a(n(T),{onClick:e[11]||(e[11]=o=>s.value=!1)},{default:u(()=>e[17]||(e[17]=[C("取消")])),_:1}),a(n(T),{type:"primary",onClick:Q,loading:d.value},{default:u(()=>[C(A(f.value?"更新":"创建"),1)]),_:1},8,["loading"])]),_:1})]),default:u(()=>[a(n(rt),{model:i,"label-placement":"left","label-width":"100px","require-mark-placement":"right-hanging"},{default:u(()=>[a(n(B),{label:"标题",path:"title",required:""},{default:u(()=>[a(n(M),{value:i.title,"onUpdate:value":e[1]||(e[1]=o=>i.title=o),placeholder:"请输入发布标题",maxlength:"200","show-count":""},null,8,["value"])]),_:1}),a(n(B),{label:"封面图片",path:"cover"},{default:u(()=>[a(n(L),{vertical:"",style:{width:"100%"}},{default:u(()=>[a(ye,{modelValue:i.cover,"onUpdate:modelValue":e[2]||(e[2]=o=>i.cover=o),prefix:"publish/cover/",onImageDelete:w},null,8,["modelValue"])]),_:1})]),_:1}),a(n(B),{label:"内容",path:"content",required:""},{default:u(()=>[a(n(M),{value:i.content,"onUpdate:value":e[3]||(e[3]=o=>i.content=o),type:"textarea",placeholder:"请输入发布内容",rows:6,maxlength:"2000","show-count":""},null,8,["value"])]),_:1}),a(n(B),{label:"标签",path:"tags"},{default:u(()=>[a(n(Ke),{value:i.tags,"onUpdate:value":e[4]||(e[4]=o=>i.tags=o)},{default:u(()=>[a(n(L),null,{default:u(()=>[(H(),U(de,null,ce(j,o=>a(n(Ge),{key:o.value,value:o.value,label:o.label},null,8,["value","label"])),64))]),_:1})]),_:1},8,["value"])]),_:1}),a(n(B),{label:"书籍标题/会议名称",path:"booktitle"},{default:u(()=>[a(n(M),{value:i.booktitle,"onUpdate:value":e[5]||(e[5]=o=>i.booktitle=o),placeholder:"请输入书籍标题或会议名称",maxlength:"500","show-count":""},null,8,["value"])]),_:1}),a(n(B),{label:"代码链接",path:"code_url"},{default:u(()=>[a(n(M),{value:i.code_url,"onUpdate:value":e[6]||(e[6]=o=>i.code_url=o),placeholder:"请输入代码链接",maxlength:"500","show-count":""},null,8,["value"])]),_:1}),a(n(B),{label:"参考文献引用",path:"bib"},{default:u(()=>[a(n(M),{value:i.bib,"onUpdate:value":e[7]||(e[7]=o=>i.bib=o),type:"textarea",placeholder:"请输入参考文献引用（支持BibTeX格式）",rows:6,maxlength:"2000","show-count":""},null,8,["value"])]),_:1}),a(n(B),{label:"文章链接",path:"link_url"},{default:u(()=>[a(n(M),{value:i.link_url,"onUpdate:value":e[8]||(e[8]=o=>i.link_url=o),placeholder:"请输入文章链接",maxlength:"500","show-count":""},null,8,["value"])]),_:1}),a(n(B),{label:"作者",path:"author"},{default:u(()=>[a(n(M),{value:i.author,"onUpdate:value":e[9]||(e[9]=o=>i.author=o),placeholder:"请输入作者",maxlength:"200","show-count":""},null,8,["value"])]),_:1}),a(n(B),{label:"发布日期",path:"date"},{default:u(()=>[a(n(Je),{value:i.date,"onUpdate:value":e[10]||(e[10]=o=>i.date=o),"value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择发布日期",style:{width:"100%"},clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"]),a(n(re),{show:p.value,"onUpdate:show":e[13]||(e[13]=o=>p.value=o),preset:"dialog",style:{width:"600px"}},{header:u(()=>e[18]||(e[18]=[C(" 导入 BibTeX 文件 ")])),action:u(()=>[a(n(L),null,{default:u(()=>[a(n(T),{onClick:le,disabled:v.value},{default:u(()=>e[24]||(e[24]=[C(" 取消 ")])),_:1},8,["disabled"])]),_:1})]),default:u(()=>[a(n(L),{vertical:""},{default:u(()=>[a(n(fe),{type:"info",title:"导入说明"},{default:u(()=>e[19]||(e[19]=[C(" 支持导入标准的 BibTeX (.bib) 格式文件。系统会自动解析论文信息并导入到发布管理中。 ")])),_:1}),a(n(et),{disabled:v.value,accept:".bib",max:1,"show-file-list":!1,onChange:te},{default:u(()=>[a(n(tt),null,{default:u(()=>[e[22]||(e[22]=X("div",{style:{"margin-bottom":"12px"}},[X("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[X("path",{d:"M7 18L12 12L17 18M7 6L12 12L17 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),a(n(V),{style:{"font-size":"16px"}},{default:u(()=>e[20]||(e[20]=[C(" 点击或者拖动 BibTeX 文件到该区域来上传 ")])),_:1}),a(n(V),{depth:"3",style:{"font-size":"12px"}},{default:u(()=>e[21]||(e[21]=[C(" 支持 .bib 格式文件 ")])),_:1})]),_:1})]),_:1},8,["disabled"]),v.value?(H(),U("div",xt,[a(n(L),{vertical:""},{default:u(()=>[a(n(V),null,{default:u(()=>e[23]||(e[23]=[C("正在导入中...")])),_:1}),a(n(lt),{type:"line",percentage:y.value,"show-indicator":!0},null,8,["percentage"]),a(n(V),{depth:"3",style:{"font-size":"12px"}},{default:u(()=>[C(A($.value)+" / "+A(I.value)+" - "+A(z.value),1)]),_:1})]),_:1})])):ae("",!0)]),_:1})]),_:1},8,["show"]),a(n(re),{show:b.value,"onUpdate:show":e[14]||(e[14]=o=>b.value=o),preset:"dialog",style:{width:"500px"}},{header:u(()=>e[25]||(e[25]=[C(" 导入结果 ")])),action:u(()=>[a(n(T),{type:"primary",onClick:me},{default:u(()=>e[27]||(e[27]=[C(" 确定 ")])),_:1})]),default:u(()=>[g.value?(H(),Qe(n(L),{key:0,vertical:""},{default:u(()=>[a(n(fe),{type:g.value.success>0?"success":"warning",title:`成功导入 ${g.value.success} 条记录`},null,8,["type","title"]),g.value.errors.length>0?(H(),U("div",wt,[a(n(V),{strong:""},{default:u(()=>e[26]||(e[26]=[C("导入失败的记录：")])),_:1}),X("div",It,[(H(!0),U(de,null,ce(g.value.errors,(o,k)=>(H(),U("div",{key:k,style:{"margin-bottom":"4px"}},[a(n(V),{depth:"3",style:{"font-size":"12px"}},{default:u(()=>[C(A(o),1)]),_:2},1024)]))),128))])])):ae("",!0)]),_:1})):ae("",!0)]),_:1},8,["show"])]))}}),Pt=Ze(_t,[["__scopeId","data-v-6ffd0177"]]);export{Pt as default};
