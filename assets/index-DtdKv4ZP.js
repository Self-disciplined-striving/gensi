import{d as oe,j as se,aH as le,r as u,a as ne,l as ae,V as ie,b as l,o as n,f as z,e as o,n as r,h as I,t as v,aF as B,aK as re,aL as ce,U as ue,L as F,M as P,aJ as K,aE as R,_ as de}from"./index-C5NNhcj1.js";import{H as ve,F as pe}from"./Footer-B7WnFU2Q.js";const he={class:"publications-page"},fe={class:"publications"},ge={class:"container"},me={class:"section-header"},ye={class:"section-title"},be={key:0,class:"count-badge"},we={class:"filter-section"},ke={class:"filter-tags"},xe=["onClick"],_e={key:0,class:"tag-count"},Ce={key:0,class:"active-filters"},Te={class:"active-filter-tags"},Me={key:0,class:"active-filter-item"},Le={class:"filter-name"},Ee={key:1,class:"active-filter-item"},Be={class:"filter-name"},Fe=["onClick"],Pe=["src","alt"],Ne={class:"publication-content"},Se={key:0,class:"publication-tags"},$e={class:"publication-title"},Ae={key:1,class:"publication-author"},De={class:"publication-meta"},je={class:"publication-links"},He=["onClick"],Ve=["href"],ze=["href"],Ie={class:"publication-year"},Ke={key:0,class:"loading-container"},Re={key:1,class:"no-more-data"},Xe={key:2,class:"empty-state"},Ue={key:0},Ze={key:1},Oe={class:"image-preview-container"},qe={class:"image-preview-header"},Je={class:"image-preview-title"},Qe=["src","alt"],Ye=oe({name:"PortalPublications",__name:"index",setup(Ge){const x=se();le();const m=u([]),y=u(!1),k=u(!0),_=u(0),N=u(10),X=u(null),C=u(0),f=u(null),T=u([{id:"all",label:"All",count:0},{id:"Mol",label:"Mol",count:0},{id:"LLM",label:"LLM",count:0},{id:"BFN",label:"BFN",count:0},{id:"Diffusion",label:"Diffusion",count:0}]),p=u("all"),d=u(""),M=u(!1),L=ne(()=>p.value!=="all"||d.value.trim()!==""),U=async()=>{try{const{data:s,error:e}=await R.from("publications").select("tag");if(e){console.error("Error fetching tag counts:",e);return}const t={all:0,Mol:0,LLM:0,BFN:0,Diffusion:0};s==null||s.forEach(a=>{a.tag&&(t.all++,a.tag.includes("Mol")&&t.Mol++,a.tag.includes("LLM")&&t.LLM++,a.tag.includes("BFN")&&t.BFN++,a.tag.includes("Diffusion")&&t.Diffusion++)}),T.value.forEach(a=>{a.count=t[a.id]||0}),C.value=t.all}catch(s){console.error("Error in getTagCounts:",s)}},S=async(s=0,e=10)=>{try{y.value=!0;const t=s*e,a=t+e-1;let c=R.from("publications").select("*").order("date",{ascending:!1});if(p.value!=="all"&&(c=c.ilike("tag",`%${p.value}%`)),d.value.trim()){const w=d.value.trim();c=c.or(`title.ilike.%${w}%,content.ilike.%${w}%,author.ilike.%${w}%,booktitle.ilike.%${w}%`)}c=c.range(t,a);const{data:i,error:g}=await c;return g?(console.error("Error fetching publications:",g),[]):((!i||i.length<e)&&(k.value=!1),i||[])}catch(t){return console.error("Error in getPublications:",t),[]}finally{y.value=!1}},Z=async()=>{if(y.value||!k.value)return;_.value++;const s=await S(_.value,N.value);s.length>0&&m.value.push(...s)},b=async()=>{_.value=0,k.value=!0,m.value=[];const s=await S(0,N.value);m.value=s},$=()=>{if(y.value||!k.value)return;const s=window.pageYOffset||document.documentElement.scrollTop,e=window.innerHeight,t=document.documentElement.scrollHeight;s+e>=t-200&&Z()},A=async s=>{p.value!==s&&(p.value=s,await b())},O=()=>{f.value&&clearTimeout(f.value),f.value=setTimeout(async()=>{await b()},500)},q=async()=>{f.value&&clearTimeout(f.value),await b()},D=async()=>{d.value="",await b()},J=async()=>{p.value="all",d.value="",await b()},Q=s=>{const e=T.value.find(t=>t.id===s);return e?e.label:s},Y=s=>s.split(",").map(e=>e.trim()).filter(e=>e.length>0),G=s=>({Mol:"tag-mol",LLM:"tag-llm",BFN:"tag-bfn",Diffusion:"tag-diffusion"})[s]||"tag-default",W=async s=>{if(s.bib)try{navigator.clipboard&&window.isSecureContext?(await navigator.clipboard.writeText(s.bib),x.success("BibTeX citation copied to clipboard!")):j(s.bib)}catch(e){console.error("Failed to copy to clipboard:",e),j(s.bib)}else x.warning("BibTeX citation not available for this publication.")},j=s=>{try{const e=document.createElement("textarea");e.value=s,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();const t=document.execCommand("copy");document.body.removeChild(e),t?x.success("BibTeX citation copied to clipboard!"):H(s)}catch(e){console.error("Fallback copy failed:",e),H(s)}},H=s=>{const e=document.createElement("div");e.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    padding: 20px;
  `;const t=document.createElement("div");t.style.cssText=`
    background: white;
    padding: 20px;
    border-radius: 8px;
    max-width: 80%;
    max-height: 80%;
    overflow: auto;
    position: relative;
  `;const a=document.createElement("button");a.textContent="×",a.style.cssText=`
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #666;
  `;const c=document.createElement("h3");c.textContent="BibTeX Citation",c.style.marginBottom="15px";const i=document.createElement("textarea");i.value=s,i.style.cssText=`
    width: 100%;
    height: 200px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-family: monospace;
    font-size: 12px;
    resize: vertical;
  `,i.readOnly=!0;const g=document.createElement("button");g.textContent="Select All",g.style.cssText=`
    margin-top: 10px;
    padding: 8px 16px;
    background: #d7ff39;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
  `,g.onclick=()=>{i.select(),i.setSelectionRange(0,99999),x.info("Text selected. Please use Ctrl+C (or Cmd+C) to copy.")},a.onclick=()=>{document.body.removeChild(e)},e.onclick=w=>{w.target===e&&document.body.removeChild(e)},t.appendChild(a),t.appendChild(c),t.appendChild(i),t.appendChild(g),e.appendChild(t),document.body.appendChild(e),setTimeout(()=>{i.select()},100)},ee=s=>{const e=s.target;e.style.display="none"},h=u({show:!1,src:"",title:""}),te=(s,e)=>{h.value.src=s,h.value.title=e,h.value.show=!0},E=()=>{h.value.show=!1},V=s=>{s.key==="Escape"&&h.value.show&&E()};return ae(async()=>{await U(),await b(),window.addEventListener("scroll",$),document.addEventListener("keydown",V)}),ie(()=>{window.removeEventListener("scroll",$),document.removeEventListener("keydown",V),f.value&&clearTimeout(f.value)}),(s,e)=>(n(),l("div",he,[z(ve),e[15]||(e[15]=o("section",{class:"hero"},[o("div",{class:"container"},[o("h1",{class:"hero-title"},"Publications"),o("p",{class:"hero-description"}," Explore our latest research publications and scholarly contributions to the field of generative artificial intelligence. ")])],-1)),o("section",fe,[o("div",ge,[o("div",me,[o("h2",ye,[e[5]||(e[5]=I(" All Publications ")),C.value>0?(n(),l("span",be,"("+v(C.value)+")",1)):r("",!0)]),o("div",{class:B(["search-bar",{focused:M.value}])},[e[7]||(e[7]=o("div",{class:"search-icon"},[o("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),re(o("input",{type:"text",placeholder:"Search by title, author, content...","onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),onFocus:e[1]||(e[1]=t=>M.value=!0),onBlur:e[2]||(e[2]=t=>M.value=!1),onInput:O,onKeyup:ue(q,["enter"]),class:"search-input"},null,544),[[ce,d.value]]),d.value?(n(),l("div",{key:0,class:"clear-button",onClick:D},e[6]||(e[6]=[o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):r("",!0)],2)]),o("div",we,[o("div",ke,[(n(!0),l(F,null,P(T.value,t=>(n(),l("button",{key:t.id,class:B(["filter-tag",{active:p.value===t.id}]),onClick:a=>A(t.id)},[I(v(t.label)+" ",1),t.count>0?(n(),l("span",_e,"("+v(t.count)+")",1)):r("",!0)],10,xe))),128))]),L.value?(n(),l("div",Ce,[e[8]||(e[8]=o("span",{class:"active-filters-label"},"Active filters:",-1)),o("div",Te,[p.value!=="all"?(n(),l("span",Me,[o("span",Le,v(Q(p.value)),1),o("button",{onClick:e[3]||(e[3]=t=>A("all")),class:"remove-filter"},"×")])):r("",!0),d.value?(n(),l("span",Ee,[o("span",Be,'Search: "'+v(d.value)+'"',1),o("button",{onClick:D,class:"remove-filter"},"×")])):r("",!0)])])):r("",!0)]),o("div",{class:"publication-list",ref_key:"publicationListRef",ref:X},[(n(!0),l(F,null,P(m.value,(t,a)=>{var c;return n(),l("div",{class:"publication-item",key:t.id},[t.cover?(n(),l("div",{key:0,class:"publication-image",onClick:i=>te(t.cover,t.title)},[o("img",{src:t.cover,alt:t.title,onError:ee,loading:"lazy"},null,40,Pe),e[9]||(e[9]=o("div",{class:"image-overlay"},[o("svg",{class:"preview-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),o("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"})]),o("span",null,"点击预览")],-1))],8,Fe)):r("",!0),o("div",Ne,[t.tag?(n(),l("div",Se,[(n(!0),l(F,null,P(Y(t.tag),i=>(n(),l("span",{key:i,class:B(["tag-chip",G(i)])},v(i),3))),128))])):r("",!0),o("h3",$e,v(t.title),1),t.author?(n(),l("p",Ae,"by "+v(t.author),1)):r("",!0),o("div",De,[o("div",je,[o("a",{href:"#",class:"publication-link",onClick:K(i=>W(t),["prevent"])},"Bib",8,He),t.code_url?(n(),l("a",{key:0,style:{"margin-left":"10px"},href:t.code_url,target:"_blank",class:"publication-link"},"Code",8,Ve)):r("",!0),t.link_url?(n(),l("a",{key:1,style:{"margin-left":"10px"},href:t.link_url,target:"_blank",class:"publication-link"},"Paper",8,ze)):r("",!0)]),o("span",Ie,v(((c=t.date)==null?void 0:c.slice(0,7))||"N/A"),1)])])])}),128)),y.value?(n(),l("div",Ke,e[10]||(e[10]=[o("div",{class:"loading-spinner"},null,-1),o("span",{class:"loading-text"},"Loading publications...",-1)]))):r("",!0),!k.value&&m.value.length>0?(n(),l("div",Re,e[11]||(e[11]=[o("span",null,"No more publications to load",-1)]))):r("",!0),m.value.length===0&&!y.value?(n(),l("div",Xe,[e[12]||(e[12]=o("div",{class:"empty-icon"},"📚",-1)),e[13]||(e[13]=o("h3",null,"No publications found",-1)),L.value?(n(),l("p",Ue,"Try adjusting your filters or search terms.")):(n(),l("p",Ze,"There are currently no publications available.")),L.value?(n(),l("button",{key:2,onClick:J,class:"clear-filters-btn"}," Clear all filters ")):r("",!0)])):r("",!0)],512)])]),h.value.show?(n(),l("div",{key:0,class:"image-preview-modal",onClick:E},[o("div",Oe,[o("div",qe,[o("h3",Je,v(h.value.title),1),o("button",{class:"close-btn",onClick:E},e[14]||(e[14]=[o("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),o("div",{class:"image-preview-content",onClick:e[4]||(e[4]=K(()=>{},["stop"]))},[o("img",{src:h.value.src,alt:h.value.title,class:"preview-image"},null,8,Qe)])])])):r("",!0),z(pe)]))}}),tt=de(Ye,[["__scopeId","data-v-c97778b2"]]);export{tt as default};
