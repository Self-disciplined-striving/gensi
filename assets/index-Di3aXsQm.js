import{P as D,b as P,o as x,e as n,d as k,c as $,a as L,Q as U,r as S,$ as l,R as K,S as q,u as z,k as M,w as r,f as t,p as I,N as F,i as a,T as H,h as b,t as h,B,U as V,V as X,W as Q,X as Y,Y as R,Z as J,n as ee,a0 as oe,a1 as te,a2 as ne,a3 as ae,m as le,a4 as se}from"./index-C5NNhcj1.js";import{N as E}from"./Space-B1Q4eXpn.js";import{N as T}from"./Form-Dwv7jmx4.js";const re={class:"inline-block",width:"1em",height:"1em",viewBox:"0 0 132 148",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function ie(p,c){return x(),P("svg",re,c[0]||(c[0]=[n("title",null,"gensi-bv@2x",-1),n("g",{id:"页面-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[n("g",{id:"gensi-bv",fill:"#646CFF"},[n("path",{d:"M66,20 C71.5229,20 76,15.5228 76,10 C76,4.47715 71.5229,0 66,0 C60.4772,0 56,4.47715 56,10 C56,11.0523 56.1625,12.0667 56.4639,13.0194 L14.0055,37.5327 C12.9433,36.5797 11.5394,36 10,36 C6.68629,36 4,38.6863 4,42 C4,44.6124 5.66962,46.8349 8,47.6586 L8,64.2 C3.43552,65.1266 0,69.1621 0,74 C0,79.5229 4.47715,84 10,84 C13.0912,84 15.8548,82.5974 17.6891,80.394 L60.026,104.837 C60.0088,105.023 60,105.21 60,105.4 C60,108.012 61.6696,110.235 64,111.059 L64,127.4 C61.6637,127.874 59.6231,129.163 58.1876,130.957 L15.972,106.584 C15.9905,106.392 16,106.197 16,106 C16,102.686 13.3137,100 10,100 C6.68629,100 4,102.686 4,106 C4,109.314 6.68629,112 10,112 C11.6693,112 13.1793,111.318 14.2669,110.218 L56.3626,134.522 C56.1263,135.374 56,136.272 56,137.2 C56,142.723 60.4772,147.2 66,147.2 C71.5229,147.2 76,142.723 76,137.2 C76,136.708 75.9644,136.224 75.8958,135.751 L90.0932,127.554 C91.1429,128.455 92.5078,129 94,129 C97.3137,129 100,126.314 100,123 C100,122.622 99.965,122.252 99.8981,121.893 L115.021,113.162 C116.823,114.918 119.285,116 122,116 C127.523,116 132,111.523 132,106 C132,100.477 127.523,96 122,96 C116.477,96 112,100.477 112,106 C112,107.362 112.272,108.661 112.766,109.845 L97.8913,118.433 C97.3385,117.961 96.699,117.588 96,117.341 L96,63.6586 C98.3304,62.8349 100,60.6124 100,58 C100,57.671 99.9735,57.3482 99.9226,57.0336 L114.502,48.6164 C116.334,50.6914 119.014,52 122,52 C127.523,52 132,47.5228 132,42 C132,36.4772 127.523,32 122,32 C119.153,32 116.583,33.1901 114.762,35.1001 L99.974,26.5623 C99.9912,26.3772 100,26.1896 100,26 C100,22.6863 97.3137,20 94,20 C90.6863,20 88,22.6863 88,26 C88,26.3219 88.0254,26.6379 88.0742,26.9461 L70.0361,37.3604 C68.9704,36.3909 67.5542,35.8 66,35.8 C62.6863,35.8 60,38.4863 60,41.8 C60,45.1137 62.6863,47.8 66,47.8 C69.3137,47.8 72,45.1137 72,41.8 C72,41.489 71.9763,41.1835 71.9307,40.8853 L89.987,30.4605 C91.05,31.4176 92.457,32 94,32 C95.6765,32 97.1925,31.3124 98.2812,30.2038 L112.633,38.49 C112.224,39.5821 112,40.7649 112,42 C112,43.1005 112.178,44.1594 112.506,45.1497 L97.998,53.526 C96.9367,52.577 95.5357,52 94,52 C90.6863,52 88,54.6863 88,58 C88,58.4201 88.0432,58.8302 88.1253,59.2259 L73.8843,67.448 C72.0541,65.1058 69.2029,63.6 66,63.6 C62.8388,63.6 60.0202,65.0669 58.1876,67.357 L15.9242,42.9562 C15.9741,42.6448 16,42.3255 16,42 C16,41.6746 15.9741,41.3552 15.9242,41.0438 L58.412,16.5135 C60.2459,18.648 62.9651,20 66,20 Z M88.0982,124.087 C88.0337,123.734 88,123.371 88,123 C88,120.388 89.6696,118.165 92,117.341 L92,63.6586 C91.3402,63.4254 90.7334,63.0801 90.2024,62.6455 L75.6684,71.0367 C75.8848,71.8548 76,72.7139 76,73.6 C76,79.1229 71.5229,83.6 66,83.6 C60.4772,83.6 56,79.1229 56,73.6 C56,72.6725 56.1263,71.7744 56.3626,70.9221 L14.0055,46.4673 C13.4272,46.9861 12.7476,47.3943 12,47.6586 L12,64.2 C16.5645,65.1266 20,69.1621 20,74 C20,74.9969 19.8541,75.9598 19.5825,76.8684 L61.7191,101.196 C62.8078,100.088 64.3236,99.4 66,99.4 C69.3137,99.4 72,102.086 72,105.4 C72,108.012 70.3304,110.235 68,111.059 L68,127.4 C70.742,127.957 73.0766,129.635 74.5038,131.936 L88.0982,124.087 Z",id:"形状"})])],-1)]))}const ue=D({name:"local-logo",render:ie}),de=k({name:"SystemLogo",__name:"system-logo",setup(p){return(c,u)=>{const o=ue;return x(),$(o)}}}),ce={class:"absolute-lt z-1 size-full overflow-hidden"},me={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},pe={height:"1337",width:"1337"},ge={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},fe=["stop-color"],_e=["stop-color"],we={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},ve={height:"896",width:"967.8852157128662"},Ce={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},he=["stop-color"],ye=["stop-color"],xe=k({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(p){const c=p,u=L(()=>U(c.themeColor,200)),o=L(()=>U(c.themeColor,500));return(_,e)=>(x(),P("div",ce,[n("div",me,[(x(),P("svg",pe,[n("defs",null,[e[0]||(e[0]=n("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),n("linearGradient",ge,[n("stop",{offset:"0","stop-color":u.value,"stop-opacity":"1"},null,8,fe),n("stop",{offset:"1","stop-color":o.value,"stop-opacity":"1"},null,8,_e)])]),e[1]||(e[1]=n("g",{opacity:"1"},[n("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),n("div",we,[(x(),P("svg",ve,[n("defs",null,[e[2]||(e[2]=n("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),n("linearGradient",Ce,[n("stop",{offset:"0","stop-color":o.value,"stop-opacity":"1"},null,8,he),n("stop",{offset:"1","stop-color":u.value,"stop-opacity":"1"},null,8,ye)])]),e[3]||(e[3]=n("g",{opacity:"1"},[n("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),be=/^[\u4E00-\u9FA5a-zA-Z0-9_-]{4,16}$/,Le=/^[1](([3][0-9])|([4][01456789])|([5][012356789])|([6][2567])|([7][0-8])|([8][0-9])|([9][012356789]))[0-9]{8}$/,Ne=/^[\w.!@#$%^&*()+=\-]{4,18}$/,$e=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,ke=/^\d{6}$/;function W(){const p={userName:{pattern:be,message:l("form.userName.invalid"),trigger:"change"},phone:{pattern:Le,message:l("form.phone.invalid"),trigger:"change"},pwd:{pattern:Ne,message:l("form.pwd.invalid"),trigger:"change"},code:{pattern:ke,message:l("form.code.invalid"),trigger:"change"},email:{pattern:$e,message:l("form.email.invalid"),trigger:"change"}},c={userName:[o(l("form.userName.required")),p.userName],phone:[o(l("form.phone.required")),p.phone],pwd:[o(l("form.pwd.required")),p.pwd],code:[o(l("form.code.required")),p.code],email:[o(l("form.email.required")),p.email]},u=o(l("form.required"));function o(e){return{required:!0,message:e}}function _(e){return[{required:!0,message:l("form.confirmPwd.required")},{asyncValidator:(w,f)=>f.trim()!==""&&f!==K(e)?Promise.reject(w.message):Promise.resolve(),message:l("form.confirmPwd.invalid"),trigger:"input"}]}return{patternRules:p,formRules:c,defaultRequiredRule:u,createRequiredRule:o,createConfirmPwdRule:_}}function G(){const p=S(null);async function c(){var o;await((o=p.value)==null?void 0:o.validate())}async function u(){var o;(o=p.value)==null||o.restoreValidation()}return{formRef:p,validate:c,restoreValidation:u}}const Se={class:"flex-y-center justify-between"},Re={class:"flex-y-center justify-between text-sm"},O=k({name:"SupabasePwdLogin",__name:"supabase-pwd-login",setup(p){const c=q(),{toggleLoginModule:u}=z(),{formRef:o,validate:_}=G(),e=M({email:"",password:""}),g=L(()=>{const{formRules:f}=W();return{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:f.pwd}});async function w(){try{await _(),await c.login(e.email,e.password)}catch(f){console.error("登录验证失败:",f)}}return(f,i)=>{const s=F,v=I,C=H,d=B,y=E,N=T;return x(),$(N,{ref_key:"formRef",ref:o,model:e,rules:g.value,size:"large","show-label":!1,onKeyup:V(w,["enter"])},{default:r(()=>[t(v,{path:"email"},{default:r(()=>[t(s,{value:e.email,"onUpdate:value":i[0]||(i[0]=m=>e.email=m),placeholder:a(l)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(v,{path:"password"},{default:r(()=>[t(s,{value:e.password,"onUpdate:value":i[1]||(i[1]=m=>e.password=m),type:"password","show-password-on":"click",placeholder:a(l)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(y,{vertical:"",size:24},{default:r(()=>[n("div",Se,[t(C,null,{default:r(()=>[b(h(a(l)("page.login.pwdLogin.rememberMe")),1)]),_:1}),t(d,{quaternary:"",onClick:i[2]||(i[2]=m=>a(u)("reset-pwd"))},{default:r(()=>[b(h(a(l)("page.login.pwdLogin.forgetPassword")),1)]),_:1})]),t(d,{type:"primary",size:"large",round:"",block:"",loading:a(c).loginLoading,onClick:w},{default:r(()=>[b(h(a(l)("common.confirm")),1)]),_:1},8,["loading"]),n("div",Re,[t(d,{quaternary:"",onClick:i[3]||(i[3]=m=>a(u)("register"))},{default:r(()=>[b(h(a(l)("page.login.pwdLogin.register")),1)]),_:1}),t(d,{quaternary:"",onClick:i[4]||(i[4]=m=>a(u)("code-login"))},{default:r(()=>[b(h(a(l)("page.login.common.codeLogin")),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])}}}),Pe={class:"flex-center"},qe=k({name:"SupabaseCodeLogin",__name:"supabase-code-login",setup(p){const c=q(),{toggleLoginModule:u}=z(),{formRef:o}=G(),_=M({email:""}),e=S(!1),g=S(0),w=S(),f=L(()=>({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}]})),i=L(()=>!e.value&&g.value===0);async function s(){var d,y;if(!_.email){(d=window.$message)==null||d.error("请先输入邮箱地址");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){(y=window.$message)==null||y.error("请输入正确的邮箱格式");return}e.value=!0;try{const{error:N}=await c.loginWithOtp(_.email);N||(g.value=60,w.value=setInterval(()=>{g.value--,g.value<=0&&clearInterval(w.value)},1e3))}finally{e.value=!1}}const v=L(()=>e.value?"发送中...":g.value>0?`${g.value}秒后重新发送`:"发送验证码");return X(()=>{w.value&&clearInterval(w.value)}),(C,d)=>{const y=F,N=I,m=B,Z=E,j=T;return x(),$(j,{ref_key:"formRef",ref:o,model:_,rules:f.value,size:"large","show-label":!1},{default:r(()=>[t(N,{path:"email"},{default:r(()=>[t(y,{value:_.email,"onUpdate:value":d[0]||(d[0]=A=>_.email=A),placeholder:a(l)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(Z,{vertical:"",size:24},{default:r(()=>[t(m,{type:"primary",size:"large",round:"",block:"",loading:e.value,disabled:!i.value,onClick:s},{default:r(()=>[b(h(v.value),1)]),_:1},8,["loading","disabled"]),n("div",Pe,[t(m,{quaternary:"",onClick:d[1]||(d[1]=A=>a(u)("pwd-login"))},{default:r(()=>[b(h(a(l)("page.login.codeLogin.switchToPwdLogin")),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])}}}),ze={class:"flex-center"},Me=k({name:"SupabaseRegister",__name:"supabase-register",setup(p){const c=q(),{toggleLoginModule:u}=z(),{formRef:o,validate:_}=G(),e=M({email:"",password:"",confirmPassword:"",name:""}),g=S(!1),w=L(()=>{const{formRules:i}=W();return{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:20,message:"姓名长度在 2 到 20 个字符",trigger:"blur"}],password:i.pwd,confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(s,v)=>new Promise((C,d)=>{v!==e.password?d(new Error("两次输入的密码不一致")):C()}),trigger:"blur"}]}});async function f(){var i;await _(),g.value=!0;try{const{error:s}=await c.register(e.email,e.password,{name:e.name});s||((i=window.$message)==null||i.success("注册成功！请检查您的邮箱并验证账户"),u("pwd-login"))}finally{g.value=!1}}return(i,s)=>{const v=F,C=I,d=B,y=E,N=T;return x(),$(N,{ref_key:"formRef",ref:o,model:e,rules:w.value,size:"large","show-label":!1,onKeyup:V(f,["enter"])},{default:r(()=>[t(C,{path:"name"},{default:r(()=>[t(v,{value:e.name,"onUpdate:value":s[0]||(s[0]=m=>e.name=m),placeholder:"请输入姓名"},null,8,["value"])]),_:1}),t(C,{path:"email"},{default:r(()=>[t(v,{value:e.email,"onUpdate:value":s[1]||(s[1]=m=>e.email=m),placeholder:a(l)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(C,{path:"password"},{default:r(()=>[t(v,{value:e.password,"onUpdate:value":s[2]||(s[2]=m=>e.password=m),type:"password","show-password-on":"click",placeholder:a(l)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(C,{path:"confirmPassword"},{default:r(()=>[t(v,{value:e.confirmPassword,"onUpdate:value":s[3]||(s[3]=m=>e.confirmPassword=m),type:"password","show-password-on":"click",placeholder:"请确认密码"},null,8,["value"])]),_:1}),t(y,{vertical:"",size:24},{default:r(()=>[t(d,{type:"primary",size:"large",round:"",block:"",loading:g.value,onClick:f},{default:r(()=>[b(h(a(l)("page.login.register.confirm")),1)]),_:1},8,["loading"]),n("div",ze,[t(d,{quaternary:"",onClick:s[4]||(s[4]=m=>a(u)("pwd-login"))},{default:r(()=>[b(h(a(l)("page.login.register.switchToLogin")),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])}}}),Ie={class:"flex-center"},Fe=k({name:"SupabaseResetPwd",__name:"supabase-reset-pwd",setup(p){const c=q(),{toggleLoginModule:u}=z(),{formRef:o,validate:_}=G(),e=M({email:""}),g=S(!1),w=L(()=>({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}]}));async function f(){var i;await _(),g.value=!0;try{const{error:s}=await c.resetPassword(e.email);s||((i=window.$message)==null||i.success("密码重置邮件已发送！请检查您的邮箱"),setTimeout(()=>{u("pwd-login")},2e3))}finally{g.value=!1}}return(i,s)=>{const v=F,C=I,d=B,y=E,N=T;return x(),$(N,{ref_key:"formRef",ref:o,model:e,rules:w.value,size:"large","show-label":!1,onKeyup:V(f,["enter"])},{default:r(()=>[t(C,{path:"email"},{default:r(()=>[t(v,{value:e.email,"onUpdate:value":s[0]||(s[0]=m=>e.email=m),placeholder:a(l)("page.login.common.emailPlaceholder")},null,8,["value","placeholder"])]),_:1}),t(y,{vertical:"",size:24},{default:r(()=>[s[2]||(s[2]=n("div",{class:"text-sm text-gray-500 text-center"}," 输入您的邮箱地址，我们将向您发送密码重置链接 ",-1)),t(d,{type:"primary",size:"large",round:"",block:"",loading:g.value,onClick:f},{default:r(()=>[b(h(a(l)("page.login.resetPwd.confirm")),1)]),_:1},8,["loading"]),n("div",Ie,[t(d,{quaternary:"",onClick:s[1]||(s[1]=m=>a(u)("pwd-login"))},{default:r(()=>[b(h(a(l)("page.login.resetPwd.switchToLogin")),1)]),_:1})])]),_:1})]),_:1},8,["model","rules"])}}}),Be={class:"w-400px lt-sm:w-300px"},Ee={class:"flex-y-center justify-between"},Te={class:"text-28px text-primary font-500 lt-sm:text-22px"},Ge={class:"i-flex-col"},Ue={class:"pt-24px"},Ve={class:"text-18px text-primary font-medium"},Ae={class:"pt-24px"},je=k({__name:"index",props:{module:{}},setup(p){const c=p,u=Q(),o=Y(),_={"pwd-login":{label:R["pwd-login"],component:O},"code-login":{label:R["code-login"],component:qe},register:{label:R.register,component:Me},"reset-pwd":{label:R["reset-pwd"],component:Fe},"bind-wechat":{label:R["bind-wechat"],component:O}},e=L(()=>_[c.module||"pwd-login"]),g=L(()=>o.darkMode?U(o.themeColor,600):o.themeColor),w=L(()=>{const f="#ffffff",i=o.darkMode?.5:.2;return J(f,o.themeColor,i)});return(f,i)=>{const s=xe,v=de,C=oe,d=te,y=le;return x(),P("div",{class:"relative size-full flex-center overflow-hidden",style:se({backgroundColor:w.value})},[t(s,{"theme-color":g.value},null,8,["theme-color"]),t(y,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:r(()=>[n("div",Be,[n("header",Ee,[t(v,{class:"text-64px text-primary lt-sm:text-48px"}),n("h3",Te,h(a(l)("system.title")),1),n("div",Ge,[t(C,{"theme-schema":a(o).themeScheme,"show-tooltip":!1,class:"text-20px lt-sm:text-18px",onSwitch:a(o).toggleThemeScheme},null,8,["theme-schema","onSwitch"]),a(o).header.multilingual.visible?(x(),$(d,{key:0,lang:a(u).locale,"lang-options":a(u).localeOptions,"show-tooltip":!1,onChangeLang:a(u).changeLocale},null,8,["lang","lang-options","onChangeLang"])):ee("",!0)])]),n("main",Ue,[n("h3",Ve,h(a(l)(e.value.label)),1),n("div",Ae,[t(ne,{name:a(o).page.animateMode,mode:"out-in",appear:""},{default:r(()=>[(x(),$(ae(e.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{je as default};
