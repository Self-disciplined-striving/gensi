import{d as O,j as Q,at as Y,r,a as G,l as W,aM as ee,b as l,o,f as D,e as s,h as S,y as i,t as d,ar as L,aw as te,ax as se,K as ae,I as x,J as T,av as le,_ as oe}from"./index-Apu7kVcP.js";import{H as ie,F as ne}from"./Footer-BDhkUEHG.js";import{s as A}from"./supabase-B8zUYn7B.js";const re={class:"publications-page"},ce={class:"publications"},ue={class:"container"},de={class:"section-header"},ve={class:"section-title"},fe={key:0,class:"count-badge"},he={class:"filter-section"},pe={class:"filter-tags"},ge=["onClick"],me={key:0,class:"tag-count"},_e={key:0,class:"active-filters"},ye={class:"active-filter-tags"},be={key:0,class:"active-filter-item"},ke={class:"filter-name"},we={key:1,class:"active-filter-item"},Ce={class:"filter-name"},Me={key:0,class:"publication-image"},Le=["src","alt"],xe={class:"publication-content"},Te={key:0,class:"publication-tags"},Fe={class:"publication-title"},Be={key:1,class:"publication-author"},Ee={class:"publication-description"},Ne={class:"publication-meta"},Pe={class:"publication-links"},$e=["onClick"],De=["href"],Se=["href"],Ae={class:"publication-year"},He={key:0,class:"loading-container"},Ve={key:1,class:"no-more-data"},je={key:2,class:"empty-state"},Ie={key:0},Ke={key:1},Re=O({name:"PortalPublications",__name:"index",setup(Ue){const H=Q();Y();const p=r([]),g=r(!1),_=r(!0),b=r(0),F=r(10),V=r(null),k=r(0),h=r(null),w=r([{id:"all",label:"All",count:0},{id:"Mol",label:"Mol",count:0},{id:"LLM",label:"LLM",count:0},{id:"BFN",label:"BFN",count:0},{id:"Diffusion",label:"Diffusion",count:0}]),v=r("all"),c=r(""),C=r(!1),M=G(()=>v.value!=="all"||c.value.trim()!==""),j=async()=>{try{const{data:a,error:e}=await A.from("publications").select("tag");if(e){console.error("Error fetching tag counts:",e);return}const t={all:0,Mol:0,LLM:0,BFN:0,Diffusion:0};a==null||a.forEach(n=>{n.tag&&(t.all++,n.tag.includes("Mol")&&t.Mol++,n.tag.includes("LLM")&&t.LLM++,n.tag.includes("BFN")&&t.BFN++,n.tag.includes("Diffusion")&&t.Diffusion++)}),w.value.forEach(n=>{n.count=t[n.id]||0}),k.value=t.all}catch(a){console.error("Error in getTagCounts:",a)}},B=async(a=0,e=10)=>{try{g.value=!0;const t=a*e,n=t+e-1;let u=A.from("publications").select("*").order("date",{ascending:!1});if(v.value!=="all"&&(u=u.ilike("tag",`%${v.value}%`)),c.value.trim()){const y=c.value.trim();u=u.or(`title.ilike.%${y}%,content.ilike.%${y}%,author.ilike.%${y}%,booktitle.ilike.%${y}%`)}u=u.range(t,n);const{data:f,error:$}=await u;return $?(console.error("Error fetching publications:",$),[]):((!f||f.length<e)&&(_.value=!1),f||[])}catch(t){return console.error("Error in getPublications:",t),[]}finally{g.value=!1}},I=async()=>{if(g.value||!_.value)return;b.value++;const a=await B(b.value,F.value);a.length>0&&p.value.push(...a)},m=async()=>{b.value=0,_.value=!0,p.value=[];const a=await B(0,F.value);p.value=a},E=()=>{if(g.value||!_.value)return;const a=window.pageYOffset||document.documentElement.scrollTop,e=window.innerHeight,t=document.documentElement.scrollHeight;a+e>=t-200&&I()},N=async a=>{v.value!==a&&(v.value=a,await m())},K=()=>{h.value&&clearTimeout(h.value),h.value=setTimeout(async()=>{await m()},500)},R=async()=>{h.value&&clearTimeout(h.value),await m()},P=async()=>{c.value="",await m()},U=async()=>{v.value="all",c.value="",await m()},X=a=>{const e=w.value.find(t=>t.id===a);return e?e.label:a},Z=a=>a.split(",").map(e=>e.trim()).filter(e=>e.length>0),q=a=>({Mol:"tag-mol",LLM:"tag-llm",BFN:"tag-bfn",Diffusion:"tag-diffusion"})[a]||"tag-default",z=async a=>{if(a.bib)try{await navigator.clipboard.writeText(a.bib),H.success("BibTeX citation copied to clipboard!")}catch(e){console.error("Failed to copy to clipboard:",e),alert("Failed to copy to clipboard. Please try again.")}else alert("BibTeX citation not available for this publication.")},J=a=>{const e=a.target;e.style.display="none"};return W(async()=>{await j(),await m(),window.addEventListener("scroll",E)}),ee(()=>{window.removeEventListener("scroll",E),h.value&&clearTimeout(h.value)}),(a,e)=>(o(),l("div",re,[D(ie),e[12]||(e[12]=s("section",{class:"hero"},[s("div",{class:"container"},[s("h1",{class:"hero-title"},"Publications"),s("p",{class:"hero-description"}," Explore our latest research publications and scholarly contributions to the field of generative artificial intelligence. ")])],-1)),s("section",ce,[s("div",ue,[s("div",de,[s("h2",ve,[e[4]||(e[4]=S(" All Publications ")),k.value>0?(o(),l("span",fe,"("+d(k.value)+")",1)):i("",!0)]),s("div",{class:L(["search-bar",{focused:C.value}])},[e[6]||(e[6]=s("div",{class:"search-icon"},[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M21 21L16.514 16.506L21 21ZM19 10.5C19 15.194 15.194 19 10.5 19C5.806 19 2 15.194 2 10.5C2 5.806 5.806 2 10.5 2C15.194 2 19 5.806 19 10.5Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),te(s("input",{type:"text",placeholder:"Search by title, author, content...","onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),onFocus:e[1]||(e[1]=t=>C.value=!0),onBlur:e[2]||(e[2]=t=>C.value=!1),onInput:K,onKeyup:ae(R,["enter"]),class:"search-input"},null,544),[[se,c.value]]),c.value?(o(),l("div",{key:0,class:"clear-button",onClick:P},e[5]||(e[5]=[s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):i("",!0)],2)]),s("div",he,[s("div",pe,[(o(!0),l(x,null,T(w.value,t=>(o(),l("button",{key:t.id,class:L(["filter-tag",{active:v.value===t.id}]),onClick:n=>N(t.id)},[S(d(t.label)+" ",1),t.count>0?(o(),l("span",me,"("+d(t.count)+")",1)):i("",!0)],10,ge))),128))]),M.value?(o(),l("div",_e,[e[7]||(e[7]=s("span",{class:"active-filters-label"},"Active filters:",-1)),s("div",ye,[v.value!=="all"?(o(),l("span",be,[s("span",ke,d(X(v.value)),1),s("button",{onClick:e[3]||(e[3]=t=>N("all")),class:"remove-filter"},"Ã—")])):i("",!0),c.value?(o(),l("span",we,[s("span",Ce,'Search: "'+d(c.value)+'"',1),s("button",{onClick:P,class:"remove-filter"},"Ã—")])):i("",!0)])])):i("",!0)]),s("div",{class:"publication-list",ref_key:"publicationListRef",ref:V},[(o(!0),l(x,null,T(p.value,(t,n)=>{var u;return o(),l("div",{class:"publication-item",key:t.id},[t.cover?(o(),l("div",Me,[s("img",{src:t.cover,alt:t.title,onError:J,loading:"lazy"},null,40,Le)])):i("",!0),s("div",xe,[t.tag?(o(),l("div",Te,[(o(!0),l(x,null,T(Z(t.tag),f=>(o(),l("span",{key:f,class:L(["tag-chip",q(f)])},d(f),3))),128))])):i("",!0),s("h3",Fe,d(t.title),1),t.author?(o(),l("p",Be,"by "+d(t.author),1)):i("",!0),s("p",Ee,d(t.content),1),s("div",Ne,[s("div",Pe,[s("a",{href:"#",class:"publication-link",onClick:le(f=>z(t),["prevent"])},"Bib",8,$e),t.code_url?(o(),l("a",{key:0,style:{"margin-left":"10px"},href:t.code_url,target:"_blank",class:"publication-link"},"Code",8,De)):i("",!0),t.link_url?(o(),l("a",{key:1,style:{"margin-left":"10px"},href:t.link_url,target:"_blank",class:"publication-link"},"Paper",8,Se)):i("",!0)]),s("span",Ae,d(((u=t.date)==null?void 0:u.slice(0,7))||"N/A"),1)])])])}),128)),g.value?(o(),l("div",He,e[8]||(e[8]=[s("div",{class:"loading-spinner"},null,-1),s("span",{class:"loading-text"},"Loading publications...",-1)]))):i("",!0),!_.value&&p.value.length>0?(o(),l("div",Ve,e[9]||(e[9]=[s("span",null,"No more publications to load",-1)]))):i("",!0),p.value.length===0&&!g.value?(o(),l("div",je,[e[10]||(e[10]=s("div",{class:"empty-icon"},"ðŸ“š",-1)),e[11]||(e[11]=s("h3",null,"No publications found",-1)),M.value?(o(),l("p",Ie,"Try adjusting your filters or search terms.")):(o(),l("p",Ke,"There are currently no publications available.")),M.value?(o(),l("button",{key:2,onClick:U,class:"clear-filters-btn"}," Clear all filters ")):i("",!0)])):i("",!0)],512)])]),D(ne)]))}}),ze=oe(Re,[["__scopeId","data-v-20c2f9e1"]]);export{ze as default};
