import{bl as Br,bm as lt,x as j,d as Qe,aT as Pr,bn as un,bo as cn,b6 as dn,as as tr,E as Ct,A as ze,z as Ce,bp as cr,bq as fn,br as hn,bc as Ke,L as At,bs as gn,aK as dr,bt as vn,a2 as Gt,aN as pn,aS as je,r as Ge,bu as yn,J as Cn,bv as Wt,bw as Bt,aC as Or,ax as ht,a as Ne,D as St,H as rr,bx as mn,a4 as bn,by as xn,aX as Sn,bz as Jt,aR as nr,aO as kn,av as Er,l as fr,aB as Yt,bf as Ar,be as Ir,bd as Lr,bg as Ur,bA as pt,C as Fe,bB as Rn,G as hr,ba as gr,a5 as nt,bC as wn,bD as Lt,bh as Nr,bE as vr,B as Pt,bF as Tn,bG as Bn,aQ as Pn,bH as On,bI as En,bJ as An,bK as In,bL as Ln,bM as Un,an as Nn,bN as pr,b3 as jn}from"./index-C5NNhcj1.js";import{G as jr}from"./supabaseAction-DTzG44gK.js";function Mn(h,V,T,N){for(var p=-1,k=h==null?0:h.length;++p<k;)T=V(T,h[p],p,h);return T}function Fn(h){return function(V){return h==null?void 0:h[V]}}var _n={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},zn=Fn(_n),Hn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Kn="\\u0300-\\u036f",$n="\\ufe20-\\ufe2f",Dn="\\u20d0-\\u20ff",Vn=Kn+$n+Dn,qn="["+Vn+"]",Gn=RegExp(qn,"g");function Wn(h){return h=Br(h),h&&h.replace(Hn,zn).replace(Gn,"")}var Xn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Zn(h){return h.match(Xn)||[]}var Qn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Jn(h){return Qn.test(h)}var Mr="\\ud800-\\udfff",Yn="\\u0300-\\u036f",eo="\\ufe20-\\ufe2f",to="\\u20d0-\\u20ff",ro=Yn+eo+to,Fr="\\u2700-\\u27bf",_r="a-z\\xdf-\\xf6\\xf8-\\xff",no="\\xac\\xb1\\xd7\\xf7",oo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",io="\\u2000-\\u206f",so=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zr="A-Z\\xc0-\\xd6\\xd8-\\xde",ao="\\ufe0e\\ufe0f",Hr=no+oo+io+so,Kr="['’]",yr="["+Hr+"]",lo="["+ro+"]",$r="\\d+",uo="["+Fr+"]",Dr="["+_r+"]",Vr="[^"+Mr+Hr+$r+Fr+_r+zr+"]",co="\\ud83c[\\udffb-\\udfff]",fo="(?:"+lo+"|"+co+")",ho="[^"+Mr+"]",qr="(?:\\ud83c[\\udde6-\\uddff]){2}",Gr="[\\ud800-\\udbff][\\udc00-\\udfff]",yt="["+zr+"]",go="\\u200d",Cr="(?:"+Dr+"|"+Vr+")",vo="(?:"+yt+"|"+Vr+")",mr="(?:"+Kr+"(?:d|ll|m|re|s|t|ve))?",br="(?:"+Kr+"(?:D|LL|M|RE|S|T|VE))?",Wr=fo+"?",Xr="["+ao+"]?",po="(?:"+go+"(?:"+[ho,qr,Gr].join("|")+")"+Xr+Wr+")*",yo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Co="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mo=Xr+Wr+po,bo="(?:"+[uo,qr,Gr].join("|")+")"+mo,xo=RegExp([yt+"?"+Dr+"+"+mr+"(?="+[yr,yt,"$"].join("|")+")",vo+"+"+br+"(?="+[yr,yt+Cr,"$"].join("|")+")",yt+"?"+Cr+"+"+mr,yt+"+"+br,Co,yo,$r,bo].join("|"),"g");function So(h){return h.match(xo)||[]}function ko(h,V,T){return h=Br(h),V=V,V===void 0?Jn(h)?So(h):Zn(h):h.match(V)||[]}var Ro="['’]",wo=RegExp(Ro,"g");function To(h){return function(V){return Mn(ko(Wn(V).replace(wo,"")),h,"")}}var Bo=To(function(h,V,T){return h+(T?"-":"")+V.toLowerCase()});const Po=lt("attach",()=>j("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},j("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},j("g",{fill:"currentColor","fill-rule":"nonzero"},j("path",{d:"M3.25735931,8.70710678 L7.85355339,4.1109127 C8.82986412,3.13460197 10.4127766,3.13460197 11.3890873,4.1109127 C12.365398,5.08722343 12.365398,6.67013588 11.3890873,7.64644661 L6.08578644,12.9497475 C5.69526215,13.3402718 5.06209717,13.3402718 4.67157288,12.9497475 C4.28104858,12.5592232 4.28104858,11.9260582 4.67157288,11.5355339 L9.97487373,6.23223305 C10.1701359,6.0369709 10.1701359,5.72038841 9.97487373,5.52512627 C9.77961159,5.32986412 9.4630291,5.32986412 9.26776695,5.52512627 L3.96446609,10.8284271 C3.18341751,11.6094757 3.18341751,12.8758057 3.96446609,13.6568542 C4.74551468,14.4379028 6.01184464,14.4379028 6.79289322,13.6568542 L12.0961941,8.35355339 C13.4630291,6.98671837 13.4630291,4.77064094 12.0961941,3.40380592 C10.7293591,2.0369709 8.51328163,2.0369709 7.14644661,3.40380592 L2.55025253,8 C2.35499039,8.19526215 2.35499039,8.51184464 2.55025253,8.70710678 C2.74551468,8.90236893 3.06209717,8.90236893 3.25735931,8.70710678 Z"}))))),Oo=lt("cancel",()=>j("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},j("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},j("g",{fill:"currentColor","fill-rule":"nonzero"},j("path",{d:"M2.58859116,2.7156945 L2.64644661,2.64644661 C2.82001296,2.47288026 3.08943736,2.45359511 3.2843055,2.58859116 L3.35355339,2.64644661 L8,7.293 L12.6464466,2.64644661 C12.8417088,2.45118446 13.1582912,2.45118446 13.3535534,2.64644661 C13.5488155,2.84170876 13.5488155,3.15829124 13.3535534,3.35355339 L8.707,8 L13.3535534,12.6464466 C13.5271197,12.820013 13.5464049,13.0894374 13.4114088,13.2843055 L13.3535534,13.3535534 C13.179987,13.5271197 12.9105626,13.5464049 12.7156945,13.4114088 L12.6464466,13.3535534 L8,8.707 L3.35355339,13.3535534 C3.15829124,13.5488155 2.84170876,13.5488155 2.64644661,13.3535534 C2.45118446,13.1582912 2.45118446,12.8417088 2.64644661,12.6464466 L7.293,8 L2.64644661,3.35355339 C2.47288026,3.17998704 2.45359511,2.91056264 2.58859116,2.7156945 L2.64644661,2.64644661 L2.58859116,2.7156945 Z"}))))),Zr=lt("download",()=>j("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},j("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},j("g",{fill:"currentColor","fill-rule":"nonzero"},j("path",{d:"M3.5,13 L12.5,13 C12.7761424,13 13,13.2238576 13,13.5 C13,13.7454599 12.8231248,13.9496084 12.5898756,13.9919443 L12.5,14 L3.5,14 C3.22385763,14 3,13.7761424 3,13.5 C3,13.2545401 3.17687516,13.0503916 3.41012437,13.0080557 L3.5,13 L12.5,13 L3.5,13 Z M7.91012437,1.00805567 L8,1 C8.24545989,1 8.44960837,1.17687516 8.49194433,1.41012437 L8.5,1.5 L8.5,10.292 L11.1819805,7.6109127 C11.3555469,7.43734635 11.6249713,7.4180612 11.8198394,7.55305725 L11.8890873,7.6109127 C12.0626536,7.78447906 12.0819388,8.05390346 11.9469427,8.2487716 L11.8890873,8.31801948 L8.35355339,11.8535534 C8.17998704,12.0271197 7.91056264,12.0464049 7.7156945,11.9114088 L7.64644661,11.8535534 L4.1109127,8.31801948 C3.91565056,8.12275734 3.91565056,7.80617485 4.1109127,7.6109127 C4.28447906,7.43734635 4.55390346,7.4180612 4.7487716,7.55305725 L4.81801948,7.6109127 L7.5,10.292 L7.5,1.5 C7.5,1.25454011 7.67687516,1.05039163 7.91012437,1.00805567 L8,1 L7.91012437,1.00805567 Z"}))))),Eo=Qe({name:"ResizeSmall",render(){return j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},j("g",{fill:"none"},j("path",{d:"M5.5 4A1.5 1.5 0 0 0 4 5.5v1a.5.5 0 0 1-1 0v-1A2.5 2.5 0 0 1 5.5 3h1a.5.5 0 0 1 0 1h-1zM16 5.5A1.5 1.5 0 0 0 14.5 4h-1a.5.5 0 0 1 0-1h1A2.5 2.5 0 0 1 17 5.5v1a.5.5 0 0 1-1 0v-1zm0 9a1.5 1.5 0 0 1-1.5 1.5h-1a.5.5 0 0 0 0 1h1a2.5 2.5 0 0 0 2.5-2.5v-1a.5.5 0 0 0-1 0v1zm-12 0A1.5 1.5 0 0 0 5.5 16h1.25a.5.5 0 0 1 0 1H5.5A2.5 2.5 0 0 1 3 14.5v-1.25a.5.5 0 0 1 1 0v1.25zM8.5 7A1.5 1.5 0 0 0 7 8.5v3A1.5 1.5 0 0 0 8.5 13h3a1.5 1.5 0 0 0 1.5-1.5v-3A1.5 1.5 0 0 0 11.5 7h-3zM8 8.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-3z",fill:"currentColor"})))}}),Ao=lt("retry",()=>j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},j("path",{d:"M320,146s24.36-12-64-12A160,160,0,1,0,416,294",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-miterlimit: 10; stroke-width: 32px;"}),j("polyline",{points:"256 58 336 138 256 218",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),Io=lt("rotateClockwise",()=>j("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j("path",{d:"M3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 12.7916 15.3658 15.2026 13 16.3265V14.5C13 14.2239 12.7761 14 12.5 14C12.2239 14 12 14.2239 12 14.5V17.5C12 17.7761 12.2239 18 12.5 18H15.5C15.7761 18 16 17.7761 16 17.5C16 17.2239 15.7761 17 15.5 17H13.8758C16.3346 15.6357 18 13.0128 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 10.2761 2.22386 10.5 2.5 10.5C2.77614 10.5 3 10.2761 3 10Z",fill:"currentColor"}),j("path",{d:"M10 12C11.1046 12 12 11.1046 12 10C12 8.89543 11.1046 8 10 8C8.89543 8 8 8.89543 8 10C8 11.1046 8.89543 12 10 12ZM10 11C9.44772 11 9 10.5523 9 10C9 9.44772 9.44772 9 10 9C10.5523 9 11 9.44772 11 10C11 10.5523 10.5523 11 10 11Z",fill:"currentColor"}))),Lo=lt("rotateClockwise",()=>j("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j("path",{d:"M17 10C17 6.13401 13.866 3 10 3C6.13401 3 3 6.13401 3 10C3 12.7916 4.63419 15.2026 7 16.3265V14.5C7 14.2239 7.22386 14 7.5 14C7.77614 14 8 14.2239 8 14.5V17.5C8 17.7761 7.77614 18 7.5 18H4.5C4.22386 18 4 17.7761 4 17.5C4 17.2239 4.22386 17 4.5 17H6.12422C3.66539 15.6357 2 13.0128 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 10.2761 17.7761 10.5 17.5 10.5C17.2239 10.5 17 10.2761 17 10Z",fill:"currentColor"}),j("path",{d:"M10 12C8.89543 12 8 11.1046 8 10C8 8.89543 8.89543 8 10 8C11.1046 8 12 8.89543 12 10C12 11.1046 11.1046 12 10 12ZM10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10C9 10.5523 9.44772 11 10 11Z",fill:"currentColor"}))),Uo=lt("trash",()=>j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},j("path",{d:"M432,144,403.33,419.74A32,32,0,0,1,371.55,448H140.46a32,32,0,0,1-31.78-28.26L80,144",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),j("rect",{x:"32",y:"64",width:"448",height:"80",rx:"16",ry:"16",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),j("line",{x1:"312",y1:"240",x2:"200",y2:"352",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}),j("line",{x1:"312",y1:"352",x2:"200",y2:"240",style:"fill: none; stroke: currentcolor; stroke-linecap: round; stroke-linejoin: round; stroke-width: 32px;"}))),No=lt("zoomIn",()=>j("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j("path",{d:"M11.5 8.5C11.5 8.22386 11.2761 8 11 8H9V6C9 5.72386 8.77614 5.5 8.5 5.5C8.22386 5.5 8 5.72386 8 6V8H6C5.72386 8 5.5 8.22386 5.5 8.5C5.5 8.77614 5.72386 9 6 9H8V11C8 11.2761 8.22386 11.5 8.5 11.5C8.77614 11.5 9 11.2761 9 11V9H11C11.2761 9 11.5 8.77614 11.5 8.5Z",fill:"currentColor"}),j("path",{d:"M8.5 3C11.5376 3 14 5.46243 14 8.5C14 9.83879 13.5217 11.0659 12.7266 12.0196L16.8536 16.1464C17.0488 16.3417 17.0488 16.6583 16.8536 16.8536C16.68 17.0271 16.4106 17.0464 16.2157 16.9114L16.1464 16.8536L12.0196 12.7266C11.0659 13.5217 9.83879 14 8.5 14C5.46243 14 3 11.5376 3 8.5C3 5.46243 5.46243 3 8.5 3ZM8.5 4C6.01472 4 4 6.01472 4 8.5C4 10.9853 6.01472 13 8.5 13C10.9853 13 13 10.9853 13 8.5C13 6.01472 10.9853 4 8.5 4Z",fill:"currentColor"}))),jo=lt("zoomOut",()=>j("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j("path",{d:"M11 8C11.2761 8 11.5 8.22386 11.5 8.5C11.5 8.77614 11.2761 9 11 9H6C5.72386 9 5.5 8.77614 5.5 8.5C5.5 8.22386 5.72386 8 6 8H11Z",fill:"currentColor"}),j("path",{d:"M14 8.5C14 5.46243 11.5376 3 8.5 3C5.46243 3 3 5.46243 3 8.5C3 11.5376 5.46243 14 8.5 14C9.83879 14 11.0659 13.5217 12.0196 12.7266L16.1464 16.8536L16.2157 16.9114C16.4106 17.0464 16.68 17.0271 16.8536 16.8536C17.0488 16.6583 17.0488 16.3417 16.8536 16.1464L12.7266 12.0196C13.5217 11.0659 14 9.83879 14 8.5ZM4 8.5C4 6.01472 6.01472 4 8.5 4C10.9853 4 13 6.01472 13 8.5C13 10.9853 10.9853 13 8.5 13C6.01472 13 4 10.9853 4 8.5Z",fill:"currentColor"}))),Mo=Pr&&"loading"in document.createElement("img");function Fo(h={}){var V;const{root:T=null}=h;return{hash:`${h.rootMargin||"0px 0px 0px 0px"}-${Array.isArray(h.threshold)?h.threshold.join(","):(V=h.threshold)!==null&&V!==void 0?V:"0"}`,options:Object.assign(Object.assign({},h),{root:(typeof T=="string"?document.querySelector(T):T)||document.documentElement})}}const Xt=new WeakMap,Zt=new WeakMap,Qt=new WeakMap,_o=(h,V,T)=>{if(!h)return()=>{};const N=Fo(V),{root:p}=N.options;let k;const m=Xt.get(p);m?k=m:(k=new Map,Xt.set(p,k));let E,w;k.has(N.hash)?(w=k.get(N.hash),w[1].has(h)||(E=w[0],w[1].add(h),E.observe(h))):(E=new IntersectionObserver(v=>{v.forEach(c=>{if(c.isIntersecting){const C=Zt.get(c.target),l=Qt.get(c.target);C&&C(),l&&(l.value=!0)}})},N.options),E.observe(h),w=[E,new Set([h])],k.set(N.hash,w));let R=!1;const t=()=>{R||(Zt.delete(h),Qt.delete(h),R=!0,w[1].has(h)&&(w[0].unobserve(h),w[1].delete(h)),w[1].size<=0&&k.delete(N.hash),k.size||Xt.delete(p))};return Zt.set(h,t),Qt.set(h,T),t};function zo(){return{toolbarIconColor:"rgba(255, 255, 255, .9)",toolbarColor:"rgba(0, 0, 0, .35)",toolbarBoxShadow:"none",toolbarBorderRadius:"24px"}}const Ho=un({name:"Image",common:dn,peers:{Tooltip:cn},self:zo});function Ko(){return j("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j("path",{d:"M6 5C5.75454 5 5.55039 5.17688 5.50806 5.41012L5.5 5.5V14.5C5.5 14.7761 5.72386 15 6 15C6.24546 15 6.44961 14.8231 6.49194 14.5899L6.5 14.5V5.5C6.5 5.22386 6.27614 5 6 5ZM13.8536 5.14645C13.68 4.97288 13.4106 4.9536 13.2157 5.08859L13.1464 5.14645L8.64645 9.64645C8.47288 9.82001 8.4536 10.0894 8.58859 10.2843L8.64645 10.3536L13.1464 14.8536C13.3417 15.0488 13.6583 15.0488 13.8536 14.8536C14.0271 14.68 14.0464 14.4106 13.9114 14.2157L13.8536 14.1464L9.70711 10L13.8536 5.85355C14.0488 5.65829 14.0488 5.34171 13.8536 5.14645Z",fill:"currentColor"}))}function $o(){return j("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j("path",{d:"M13.5 5C13.7455 5 13.9496 5.17688 13.9919 5.41012L14 5.5V14.5C14 14.7761 13.7761 15 13.5 15C13.2545 15 13.0504 14.8231 13.0081 14.5899L13 14.5V5.5C13 5.22386 13.2239 5 13.5 5ZM5.64645 5.14645C5.82001 4.97288 6.08944 4.9536 6.28431 5.08859L6.35355 5.14645L10.8536 9.64645C11.0271 9.82001 11.0464 10.0894 10.9114 10.2843L10.8536 10.3536L6.35355 14.8536C6.15829 15.0488 5.84171 15.0488 5.64645 14.8536C5.47288 14.68 5.4536 14.4106 5.58859 14.2157L5.64645 14.1464L9.79289 10L5.64645 5.85355C5.45118 5.65829 5.45118 5.34171 5.64645 5.14645Z",fill:"currentColor"}))}function Do(){return j("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},j("path",{d:"M4.089 4.216l.057-.07a.5.5 0 0 1 .638-.057l.07.057L10 9.293l5.146-5.147a.5.5 0 0 1 .638-.057l.07.057a.5.5 0 0 1 .057.638l-.057.07L10.707 10l5.147 5.146a.5.5 0 0 1 .057.638l-.057.07a.5.5 0 0 1-.638.057l-.07-.057L10 10.707l-5.146 5.147a.5.5 0 0 1-.638.057l-.07-.057a.5.5 0 0 1-.057-.638l.057-.07L9.293 10L4.146 4.854a.5.5 0 0 1-.057-.638l.057-.07l-.057.07z",fill:"currentColor"}))}const or=Object.assign(Object.assign({},Ct.props),{onPreviewPrev:Function,onPreviewNext:Function,showToolbar:{type:Boolean,default:!0},showToolbarTooltip:Boolean,renderToolbar:Function}),Qr=tr("n-image"),Vo=ze([ze("body >",[Ce("image-container","position: fixed;")]),Ce("image-preview-container",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 `),Ce("image-preview-overlay",`
 z-index: -1;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 background: rgba(0, 0, 0, .3);
 `,[cr()]),Ce("image-preview-toolbar",`
 z-index: 1;
 position: absolute;
 left: 50%;
 transform: translateX(-50%);
 border-radius: var(--n-toolbar-border-radius);
 height: 48px;
 bottom: 40px;
 padding: 0 12px;
 background: var(--n-toolbar-color);
 box-shadow: var(--n-toolbar-box-shadow);
 color: var(--n-toolbar-icon-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 align-items: center;
 `,[Ce("base-icon",`
 padding: 0 8px;
 font-size: 28px;
 cursor: pointer;
 `),cr()]),Ce("image-preview-wrapper",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 pointer-events: none;
 `,[fn()]),Ce("image-preview",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: all;
 margin: auto;
 max-height: calc(100vh - 32px);
 max-width: calc(100vw - 32px);
 transition: transform .3s var(--n-bezier);
 `),Ce("image",`
 display: inline-flex;
 max-height: 100%;
 max-width: 100%;
 `,[hn("preview-disabled",`
 cursor: pointer;
 `),ze("img",`
 border-radius: inherit;
 `)])]),Ot=32,Jr=Qe({name:"ImagePreview",props:Object.assign(Object.assign({},or),{onNext:Function,onPrev:Function,clsPrefix:{type:String,required:!0}}),setup(h){const V=Ct("Image","-image",Vo,Ho,h,je(h,"clsPrefix"));let T=null;const N=Ge(null),p=Ge(null),k=Ge(void 0),m=Ge(!1),E=Ge(!1),{localeRef:w}=yn("Image");function R(){const{value:W}=p;if(!T||!W)return;const{style:Y}=W,Z=T.getBoundingClientRect(),be=Z.left+Z.width/2,he=Z.top+Z.height/2;Y.transformOrigin=`${be}px ${he}px`}function t(W){var Y,Z;switch(W.key){case" ":W.preventDefault();break;case"ArrowLeft":(Y=h.onPrev)===null||Y===void 0||Y.call(h);break;case"ArrowRight":(Z=h.onNext)===null||Z===void 0||Z.call(h);break;case"Escape":ie();break}}Cn(m,W=>{W?Wt("keydown",document,t):Bt("keydown",document,t)}),Or(()=>{Bt("keydown",document,t)});let v=0,c=0,C=0,l=0,y=0,O=0,I=0,U=0,F=!1;function q(W){const{clientX:Y,clientY:Z}=W;C=Y-v,l=Z-c,Sn(oe)}function K(W){const{mouseUpClientX:Y,mouseUpClientY:Z,mouseDownClientX:be,mouseDownClientY:he}=W,Te=be-Y,Me=he-Z,Le=`vertical${Me>0?"Top":"Bottom"}`,Ve=`horizontal${Te>0?"Left":"Right"}`;return{moveVerticalDirection:Le,moveHorizontalDirection:Ve,deltaHorizontal:Te,deltaVertical:Me}}function g(W){const{value:Y}=N;if(!Y)return{offsetX:0,offsetY:0};const Z=Y.getBoundingClientRect(),{moveVerticalDirection:be,moveHorizontalDirection:he,deltaHorizontal:Te,deltaVertical:Me}=W||{};let Le=0,Ve=0;return Z.width<=window.innerWidth?Le=0:Z.left>0?Le=(Z.width-window.innerWidth)/2:Z.right<window.innerWidth?Le=-(Z.width-window.innerWidth)/2:he==="horizontalRight"?Le=Math.min((Z.width-window.innerWidth)/2,y-(Te??0)):Le=Math.max(-((Z.width-window.innerWidth)/2),y-(Te??0)),Z.height<=window.innerHeight?Ve=0:Z.top>0?Ve=(Z.height-window.innerHeight)/2:Z.bottom<window.innerHeight?Ve=-(Z.height-window.innerHeight)/2:be==="verticalBottom"?Ve=Math.min((Z.height-window.innerHeight)/2,O-(Me??0)):Ve=Math.max(-((Z.height-window.innerHeight)/2),O-(Me??0)),{offsetX:Le,offsetY:Ve}}function d(W){Bt("mousemove",document,q),Bt("mouseup",document,d);const{clientX:Y,clientY:Z}=W;F=!1;const be=K({mouseUpClientX:Y,mouseUpClientY:Z,mouseDownClientX:I,mouseDownClientY:U}),he=g(be);C=he.offsetX,l=he.offsetY,oe()}const B=ht(Qr,null);function i(W){var Y,Z;if((Z=(Y=B==null?void 0:B.previewedImgPropsRef.value)===null||Y===void 0?void 0:Y.onMousedown)===null||Z===void 0||Z.call(Y,W),W.button!==0)return;const{clientX:be,clientY:he}=W;F=!0,v=be-C,c=he-l,y=C,O=l,I=be,U=he,oe(),Wt("mousemove",document,q),Wt("mouseup",document,d)}const n=1.5;let r=0,s=1,a=0;function b(W){var Y,Z;(Z=(Y=B==null?void 0:B.previewedImgPropsRef.value)===null||Y===void 0?void 0:Y.onDblclick)===null||Z===void 0||Z.call(Y,W);const be=ae();s=s===be?1:be,oe()}function M(){s=1,r=0}function P(){var W;M(),a=0,(W=h.onPrev)===null||W===void 0||W.call(h)}function $(){var W;M(),a=0,(W=h.onNext)===null||W===void 0||W.call(h)}function D(){a-=90,oe()}function te(){a+=90,oe()}function ne(){const{value:W}=N;if(!W)return 1;const{innerWidth:Y,innerHeight:Z}=window,be=Math.max(1,W.naturalHeight/(Z-Ot)),he=Math.max(1,W.naturalWidth/(Y-Ot));return Math.max(3,be*2,he*2)}function ae(){const{value:W}=N;if(!W)return 1;const{innerWidth:Y,innerHeight:Z}=window,be=W.naturalHeight/(Z-Ot),he=W.naturalWidth/(Y-Ot);return be<1&&he<1?1:Math.max(be,he)}function ue(){const W=ne();s<W&&(r+=1,s=Math.min(W,Math.pow(n,r)),oe())}function Se(){if(s>.5){const W=s;r-=1,s=Math.max(.5,Math.pow(n,r));const Y=W-s;oe(!1);const Z=g();s+=Y,oe(!1),s-=Y,C=Z.offsetX,l=Z.offsetY,oe()}}function ve(){const W=k.value;W&&jr(W,void 0)}function oe(W=!0){var Y;const{value:Z}=N;if(!Z)return;const{style:be}=Z,he=bn((Y=B==null?void 0:B.previewedImgPropsRef.value)===null||Y===void 0?void 0:Y.style);let Te="";if(typeof he=="string")Te=`${he};`;else for(const Le in he)Te+=`${Bo(Le)}: ${he[Le]};`;const Me=`transform-origin: center; transform: translateX(${C}px) translateY(${l}px) rotate(${a}deg) scale(${s});`;F?be.cssText=`${Te}cursor: grabbing; transition: none;${Me}`:be.cssText=`${Te}cursor: grab;${Me}${W?"":"transition: none;"}`,W||Z.offsetHeight}function ie(){m.value=!m.value,E.value=!0}function Q(){s=ae(),r=Math.ceil(Math.log(s)/Math.log(n)),C=0,l=0,oe()}const le={setPreviewSrc:W=>{k.value=W},setThumbnailEl:W=>{T=W},toggleShow:ie};function pe(W,Y){if(h.showToolbarTooltip){const{value:Z}=V;return j(xn,{to:!1,theme:Z.peers.Tooltip,themeOverrides:Z.peerOverrides.Tooltip,keepAliveOnHover:!1},{default:()=>w.value[Y],trigger:()=>W})}else return W}const me=Ne(()=>{const{common:{cubicBezierEaseInOut:W},self:{toolbarIconColor:Y,toolbarBorderRadius:Z,toolbarBoxShadow:be,toolbarColor:he}}=V.value;return{"--n-bezier":W,"--n-toolbar-icon-color":Y,"--n-toolbar-color":he,"--n-toolbar-border-radius":Z,"--n-toolbar-box-shadow":be}}),{inlineThemeDisabled:de}=St(),ce=de?rr("image-preview",void 0,me,h):void 0;return Object.assign({previewRef:N,previewWrapperRef:p,previewSrc:k,show:m,appear:mn(),displayed:E,previewedImgProps:B==null?void 0:B.previewedImgPropsRef,handleWheel(W){W.preventDefault()},handlePreviewMousedown:i,handlePreviewDblclick:b,syncTransformOrigin:R,handleAfterLeave:()=>{M(),a=0,E.value=!1},handleDragStart:W=>{var Y,Z;(Z=(Y=B==null?void 0:B.previewedImgPropsRef.value)===null||Y===void 0?void 0:Y.onDragstart)===null||Z===void 0||Z.call(Y,W),W.preventDefault()},zoomIn:ue,zoomOut:Se,handleDownloadClick:ve,rotateCounterclockwise:D,rotateClockwise:te,handleSwitchPrev:P,handleSwitchNext:$,withTooltip:pe,resizeToOrignalImageSize:Q,cssVars:de?void 0:me,themeClass:ce==null?void 0:ce.themeClass,onRender:ce==null?void 0:ce.onRender},le)},render(){var h,V;const{clsPrefix:T,renderToolbar:N,withTooltip:p}=this,k=p(j(Ke,{clsPrefix:T,onClick:this.handleSwitchPrev},{default:Ko}),"tipPrevious"),m=p(j(Ke,{clsPrefix:T,onClick:this.handleSwitchNext},{default:$o}),"tipNext"),E=p(j(Ke,{clsPrefix:T,onClick:this.rotateCounterclockwise},{default:()=>j(Lo,null)}),"tipCounterclockwise"),w=p(j(Ke,{clsPrefix:T,onClick:this.rotateClockwise},{default:()=>j(Io,null)}),"tipClockwise"),R=p(j(Ke,{clsPrefix:T,onClick:this.resizeToOrignalImageSize},{default:()=>j(Eo,null)}),"tipOriginalSize"),t=p(j(Ke,{clsPrefix:T,onClick:this.zoomOut},{default:()=>j(jo,null)}),"tipZoomOut"),v=p(j(Ke,{clsPrefix:T,onClick:this.handleDownloadClick},{default:()=>j(Zr,null)}),"tipDownload"),c=p(j(Ke,{clsPrefix:T,onClick:this.toggleShow},{default:Do}),"tipClose"),C=p(j(Ke,{clsPrefix:T,onClick:this.zoomIn},{default:()=>j(No,null)}),"tipZoomIn");return j(At,null,(V=(h=this.$slots).default)===null||V===void 0?void 0:V.call(h),j(gn,{show:this.show},{default:()=>{var l;return this.show||this.displayed?((l=this.onRender)===null||l===void 0||l.call(this),dr(j("div",{class:[`${T}-image-preview-container`,this.themeClass],style:this.cssVars,onWheel:this.handleWheel},j(Gt,{name:"fade-in-transition",appear:this.appear},{default:()=>this.show?j("div",{class:`${T}-image-preview-overlay`,onClick:this.toggleShow}):null}),this.showToolbar?j(Gt,{name:"fade-in-transition",appear:this.appear},{default:()=>this.show?j("div",{class:`${T}-image-preview-toolbar`},N?N({nodes:{prev:k,next:m,rotateCounterclockwise:E,rotateClockwise:w,resizeToOriginalSize:R,zoomOut:t,zoomIn:C,download:v,close:c}}):j(At,null,this.onPrev?j(At,null,k,m):null,E,w,R,t,C,v,c)):null}):null,j(Gt,{name:"fade-in-scale-up-transition",onAfterLeave:this.handleAfterLeave,appear:this.appear,onEnter:this.syncTransformOrigin,onBeforeLeave:this.syncTransformOrigin},{default:()=>{const{previewedImgProps:y={}}=this;return dr(j("div",{class:`${T}-image-preview-wrapper`,ref:"previewWrapperRef"},j("img",Object.assign({},y,{draggable:!1,onMousedown:this.handlePreviewMousedown,onDblclick:this.handlePreviewDblclick,class:[`${T}-image-preview`,y.class],key:this.previewSrc,src:this.previewSrc,ref:"previewRef",onDragstart:this.handleDragStart}))),[[pn,this.show]])}})),[[vn,{enabled:this.show}]])):null}}))}}),Yr=tr("n-image-group"),qo=or,Go=Qe({name:"ImageGroup",props:qo,setup(h){let V;const{mergedClsPrefixRef:T}=St(h),N=`c${Jt()}`,p=kn(),k=Ge(null),m=w=>{var R;V=w,(R=k.value)===null||R===void 0||R.setPreviewSrc(w)};function E(w){var R,t;if(!(p!=null&&p.proxy))return;const c=p.proxy.$el.parentElement.querySelectorAll(`[data-group-id=${N}]:not([data-error=true])`);if(!c.length)return;const C=Array.from(c).findIndex(l=>l.dataset.previewSrc===V);~C?m(c[(C+w+c.length)%c.length].dataset.previewSrc):m(c[0].dataset.previewSrc),w===1?(R=h.onPreviewNext)===null||R===void 0||R.call(h):(t=h.onPreviewPrev)===null||t===void 0||t.call(h)}return nr(Yr,{mergedClsPrefixRef:T,setPreviewSrc:m,setThumbnailEl:w=>{var R;(R=k.value)===null||R===void 0||R.setThumbnailEl(w)},toggleShow:()=>{var w;(w=k.value)===null||w===void 0||w.toggleShow()},groupId:N,renderToolbarRef:je(h,"renderToolbar")}),{mergedClsPrefix:T,previewInstRef:k,next:()=>{E(1)},prev:()=>{E(-1)}}},render(){return j(Jr,{theme:this.theme,themeOverrides:this.themeOverrides,clsPrefix:this.mergedClsPrefix,ref:"previewInstRef",onPrev:this.prev,onNext:this.next,showToolbar:this.showToolbar,showToolbarTooltip:this.showToolbarTooltip,renderToolbar:this.renderToolbar},this.$slots)}}),Wo=Object.assign({alt:String,height:[String,Number],imgProps:Object,previewedImgProps:Object,lazy:Boolean,intersectionObserverOptions:Object,objectFit:{type:String,default:"fill"},previewSrc:String,fallbackSrc:String,width:[String,Number],src:String,previewDisabled:Boolean,loadDescription:String,onError:Function,onLoad:Function},or),Xo=Qe({name:"Image",props:Wo,slots:Object,inheritAttrs:!1,setup(h){const V=Ge(null),T=Ge(!1),N=Ge(null),p=ht(Yr,null),{mergedClsPrefixRef:k}=p||St(h),m={click:()=>{if(h.previewDisabled||T.value)return;const R=h.previewSrc||h.src;if(p){p.setPreviewSrc(R),p.setThumbnailEl(V.value),p.toggleShow();return}const{value:t}=N;t&&(t.setPreviewSrc(R),t.setThumbnailEl(V.value),t.toggleShow())}},E=Ge(!h.lazy);fr(()=>{var R;(R=V.value)===null||R===void 0||R.setAttribute("data-group-id",(p==null?void 0:p.groupId)||"")}),fr(()=>{if(h.lazy&&h.intersectionObserverOptions){let R;const t=Yt(()=>{R==null||R(),R=void 0,R=_o(V.value,h.intersectionObserverOptions,E)});Or(()=>{t(),R==null||R()})}}),Yt(()=>{var R;h.src||((R=h.imgProps)===null||R===void 0||R.src),T.value=!1});const w=Ge(!1);return nr(Qr,{previewedImgPropsRef:je(h,"previewedImgProps")}),Object.assign({mergedClsPrefix:k,groupId:p==null?void 0:p.groupId,previewInstRef:N,imageRef:V,showError:T,shouldStartLoading:E,loaded:w,mergedOnClick:R=>{var t,v;m.click(),(v=(t=h.imgProps)===null||t===void 0?void 0:t.onClick)===null||v===void 0||v.call(t,R)},mergedOnError:R=>{if(!E.value)return;T.value=!0;const{onError:t,imgProps:{onError:v}={}}=h;t==null||t(R),v==null||v(R)},mergedOnLoad:R=>{const{onLoad:t,imgProps:{onLoad:v}={}}=h;t==null||t(R),v==null||v(R),w.value=!0}},m)},render(){var h,V;const{mergedClsPrefix:T,imgProps:N={},loaded:p,$attrs:k,lazy:m}=this,E=Er(this.$slots.error,()=>[]),w=(V=(h=this.$slots).placeholder)===null||V===void 0?void 0:V.call(h),R=this.src||N.src,t=this.showError&&E.length?E:j("img",Object.assign(Object.assign({},N),{ref:"imageRef",width:this.width||N.width,height:this.height||N.height,src:this.showError?this.fallbackSrc:m&&this.intersectionObserverOptions?this.shouldStartLoading?R:void 0:R,alt:this.alt||N.alt,"aria-label":this.alt||N.alt,onClick:this.mergedOnClick,onError:this.mergedOnError,onLoad:this.mergedOnLoad,loading:Mo&&m&&!this.intersectionObserverOptions?"lazy":"eager",style:[N.style||"",w&&!p?{height:"0",width:"0",visibility:"hidden"}:"",{objectFit:this.objectFit}],"data-error":this.showError,"data-preview-src":this.previewSrc||this.src}));return j("div",Object.assign({},k,{role:"none",class:[k.class,`${T}-image`,(this.previewDisabled||this.showError)&&`${T}-image--preview-disabled`]}),this.groupId?t:j(Jr,{theme:this.theme,themeOverrides:this.themeOverrides,clsPrefix:T,ref:"previewInstRef",showToolbar:this.showToolbar,showToolbarTooltip:this.showToolbarTooltip,renderToolbar:this.renderToolbar},{default:()=>t}),!p&&w)}}),Zo={success:j(Ur,null),error:j(Lr,null),warning:j(Ir,null),info:j(Ar,null)},Qo=Qe({name:"ProgressCircle",props:{clsPrefix:{type:String,required:!0},status:{type:String,required:!0},strokeWidth:{type:Number,required:!0},fillColor:[String,Object],railColor:String,railStyle:[String,Object],percentage:{type:Number,default:0},offsetDegree:{type:Number,default:0},showIndicator:{type:Boolean,required:!0},indicatorTextColor:String,unit:String,viewBoxWidth:{type:Number,required:!0},gapDegree:{type:Number,required:!0},gapOffsetDegree:{type:Number,default:0}},setup(h,{slots:V}){function T(p,k,m,E){const{gapDegree:w,viewBoxWidth:R,strokeWidth:t}=h,v=50,c=0,C=v,l=0,y=2*v,O=50+t/2,I=`M ${O},${O} m ${c},${C}
      a ${v},${v} 0 1 1 ${l},-100
      a ${v},${v} 0 1 1 0,${y}`,U=Math.PI*2*v,F={stroke:E==="rail"?m:typeof h.fillColor=="object"?"url(#gradient)":m,strokeDasharray:`${p/100*(U-w)}px ${R*8}px`,strokeDashoffset:`-${w/2}px`,transformOrigin:k?"center":void 0,transform:k?`rotate(${k}deg)`:void 0};return{pathString:I,pathStyle:F}}const N=()=>{const p=typeof h.fillColor=="object",k=p?h.fillColor.stops[0]:"",m=p?h.fillColor.stops[1]:"";return p&&j("defs",null,j("linearGradient",{id:"gradient",x1:"0%",y1:"100%",x2:"100%",y2:"0%"},j("stop",{offset:"0%","stop-color":k}),j("stop",{offset:"100%","stop-color":m})))};return()=>{const{fillColor:p,railColor:k,strokeWidth:m,offsetDegree:E,status:w,percentage:R,showIndicator:t,indicatorTextColor:v,unit:c,gapOffsetDegree:C,clsPrefix:l}=h,{pathString:y,pathStyle:O}=T(100,0,k,"rail"),{pathString:I,pathStyle:U}=T(R,E,p,"fill"),F=100+m;return j("div",{class:`${l}-progress-content`,role:"none"},j("div",{class:`${l}-progress-graph`,"aria-hidden":!0},j("div",{class:`${l}-progress-graph-circle`,style:{transform:C?`rotate(${C}deg)`:void 0}},j("svg",{viewBox:`0 0 ${F} ${F}`},N(),j("g",null,j("path",{class:`${l}-progress-graph-circle-rail`,d:y,"stroke-width":m,"stroke-linecap":"round",fill:"none",style:O})),j("g",null,j("path",{class:[`${l}-progress-graph-circle-fill`,R===0&&`${l}-progress-graph-circle-fill--empty`],d:I,"stroke-width":m,"stroke-linecap":"round",fill:"none",style:U}))))),t?j("div",null,V.default?j("div",{class:`${l}-progress-custom-content`,role:"none"},V.default()):w!=="default"?j("div",{class:`${l}-progress-icon`,"aria-hidden":!0},j(Ke,{clsPrefix:l},{default:()=>Zo[w]})):j("div",{class:`${l}-progress-text`,style:{color:v},role:"none"},j("span",{class:`${l}-progress-text__percentage`},R),j("span",{class:`${l}-progress-text__unit`},c))):null)}}}),Jo={success:j(Ur,null),error:j(Lr,null),warning:j(Ir,null),info:j(Ar,null)},Yo=Qe({name:"ProgressLine",props:{clsPrefix:{type:String,required:!0},percentage:{type:Number,default:0},railColor:String,railStyle:[String,Object],fillColor:[String,Object],status:{type:String,required:!0},indicatorPlacement:{type:String,required:!0},indicatorTextColor:String,unit:{type:String,default:"%"},processing:{type:Boolean,required:!0},showIndicator:{type:Boolean,required:!0},height:[String,Number],railBorderRadius:[String,Number],fillBorderRadius:[String,Number]},setup(h,{slots:V}){const T=Ne(()=>pt(h.height)),N=Ne(()=>{var m,E;return typeof h.fillColor=="object"?`linear-gradient(to right, ${(m=h.fillColor)===null||m===void 0?void 0:m.stops[0]} , ${(E=h.fillColor)===null||E===void 0?void 0:E.stops[1]})`:h.fillColor}),p=Ne(()=>h.railBorderRadius!==void 0?pt(h.railBorderRadius):h.height!==void 0?pt(h.height,{c:.5}):""),k=Ne(()=>h.fillBorderRadius!==void 0?pt(h.fillBorderRadius):h.railBorderRadius!==void 0?pt(h.railBorderRadius):h.height!==void 0?pt(h.height,{c:.5}):"");return()=>{const{indicatorPlacement:m,railColor:E,railStyle:w,percentage:R,unit:t,indicatorTextColor:v,status:c,showIndicator:C,processing:l,clsPrefix:y}=h;return j("div",{class:`${y}-progress-content`,role:"none"},j("div",{class:`${y}-progress-graph`,"aria-hidden":!0},j("div",{class:[`${y}-progress-graph-line`,{[`${y}-progress-graph-line--indicator-${m}`]:!0}]},j("div",{class:`${y}-progress-graph-line-rail`,style:[{backgroundColor:E,height:T.value,borderRadius:p.value},w]},j("div",{class:[`${y}-progress-graph-line-fill`,l&&`${y}-progress-graph-line-fill--processing`],style:{maxWidth:`${h.percentage}%`,background:N.value,height:T.value,lineHeight:T.value,borderRadius:k.value}},m==="inside"?j("div",{class:`${y}-progress-graph-line-indicator`,style:{color:v}},V.default?V.default():`${R}${t}`):null)))),C&&m==="outside"?j("div",null,V.default?j("div",{class:`${y}-progress-custom-content`,style:{color:v},role:"none"},V.default()):c==="default"?j("div",{role:"none",class:`${y}-progress-icon ${y}-progress-icon--as-text`,style:{color:v}},R,t):j("div",{class:`${y}-progress-icon`,"aria-hidden":!0},j(Ke,{clsPrefix:y},{default:()=>Jo[c]}))):null)}}});function xr(h,V,T=100){return`m ${T/2} ${T/2-h} a ${h} ${h} 0 1 1 0 ${2*h} a ${h} ${h} 0 1 1 0 -${2*h}`}const ei=Qe({name:"ProgressMultipleCircle",props:{clsPrefix:{type:String,required:!0},viewBoxWidth:{type:Number,required:!0},percentage:{type:Array,default:[0]},strokeWidth:{type:Number,required:!0},circleGap:{type:Number,required:!0},showIndicator:{type:Boolean,required:!0},fillColor:{type:Array,default:()=>[]},railColor:{type:Array,default:()=>[]},railStyle:{type:Array,default:()=>[]}},setup(h,{slots:V}){const T=Ne(()=>h.percentage.map((k,m)=>`${Math.PI*k/100*(h.viewBoxWidth/2-h.strokeWidth/2*(1+2*m)-h.circleGap*m)*2}, ${h.viewBoxWidth*8}`)),N=(p,k)=>{const m=h.fillColor[k],E=typeof m=="object"?m.stops[0]:"",w=typeof m=="object"?m.stops[1]:"";return typeof h.fillColor[k]=="object"&&j("linearGradient",{id:`gradient-${k}`,x1:"100%",y1:"0%",x2:"0%",y2:"100%"},j("stop",{offset:"0%","stop-color":E}),j("stop",{offset:"100%","stop-color":w}))};return()=>{const{viewBoxWidth:p,strokeWidth:k,circleGap:m,showIndicator:E,fillColor:w,railColor:R,railStyle:t,percentage:v,clsPrefix:c}=h;return j("div",{class:`${c}-progress-content`,role:"none"},j("div",{class:`${c}-progress-graph`,"aria-hidden":!0},j("div",{class:`${c}-progress-graph-circle`},j("svg",{viewBox:`0 0 ${p} ${p}`},j("defs",null,v.map((C,l)=>N(C,l))),v.map((C,l)=>j("g",{key:l},j("path",{class:`${c}-progress-graph-circle-rail`,d:xr(p/2-k/2*(1+2*l)-m*l,k,p),"stroke-width":k,"stroke-linecap":"round",fill:"none",style:[{strokeDashoffset:0,stroke:R[l]},t[l]]}),j("path",{class:[`${c}-progress-graph-circle-fill`,C===0&&`${c}-progress-graph-circle-fill--empty`],d:xr(p/2-k/2*(1+2*l)-m*l,k,p),"stroke-width":k,"stroke-linecap":"round",fill:"none",style:{strokeDasharray:T.value[l],strokeDashoffset:0,stroke:typeof w[l]=="object"?`url(#gradient-${l})`:w[l]}})))))),E&&V.default?j("div",null,j("div",{class:`${c}-progress-text`},V.default())):null)}}}),ti=ze([Ce("progress",{display:"inline-block"},[Ce("progress-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 `),Fe("line",`
 width: 100%;
 display: block;
 `,[Ce("progress-content",`
 display: flex;
 align-items: center;
 `,[Ce("progress-graph",{flex:1})]),Ce("progress-custom-content",{marginLeft:"14px"}),Ce("progress-icon",`
 width: 30px;
 padding-left: 14px;
 height: var(--n-icon-size-line);
 line-height: var(--n-icon-size-line);
 font-size: var(--n-icon-size-line);
 `,[Fe("as-text",`
 color: var(--n-text-color-line-outer);
 text-align: center;
 width: 40px;
 font-size: var(--n-font-size);
 padding-left: 4px;
 transition: color .3s var(--n-bezier);
 `)])]),Fe("circle, dashboard",{width:"120px"},[Ce("progress-custom-content",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `),Ce("progress-text",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: inherit;
 font-size: var(--n-font-size-circle);
 color: var(--n-text-color-circle);
 font-weight: var(--n-font-weight-circle);
 transition: color .3s var(--n-bezier);
 white-space: nowrap;
 `),Ce("progress-icon",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 color: var(--n-icon-color);
 font-size: var(--n-icon-size-circle);
 `)]),Fe("multiple-circle",`
 width: 200px;
 color: inherit;
 `,[Ce("progress-text",`
 font-weight: var(--n-font-weight-circle);
 color: var(--n-text-color-circle);
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 transition: color .3s var(--n-bezier);
 `)]),Ce("progress-content",{position:"relative"}),Ce("progress-graph",{position:"relative"},[Ce("progress-graph-circle",[ze("svg",{verticalAlign:"bottom"}),Ce("progress-graph-circle-fill",`
 stroke: var(--n-fill-color);
 transition:
 opacity .3s var(--n-bezier),
 stroke .3s var(--n-bezier),
 stroke-dasharray .3s var(--n-bezier);
 `,[Fe("empty",{opacity:0})]),Ce("progress-graph-circle-rail",`
 transition: stroke .3s var(--n-bezier);
 overflow: hidden;
 stroke: var(--n-rail-color);
 `)]),Ce("progress-graph-line",[Fe("indicator-inside",[Ce("progress-graph-line-rail",`
 height: 16px;
 line-height: 16px;
 border-radius: 10px;
 `,[Ce("progress-graph-line-fill",`
 height: inherit;
 border-radius: 10px;
 `),Ce("progress-graph-line-indicator",`
 background: #0000;
 white-space: nowrap;
 text-align: right;
 margin-left: 14px;
 margin-right: 14px;
 height: inherit;
 font-size: 12px;
 color: var(--n-text-color-line-inner);
 transition: color .3s var(--n-bezier);
 `)])]),Fe("indicator-inside-label",`
 height: 16px;
 display: flex;
 align-items: center;
 `,[Ce("progress-graph-line-rail",`
 flex: 1;
 transition: background-color .3s var(--n-bezier);
 `),Ce("progress-graph-line-indicator",`
 background: var(--n-fill-color);
 font-size: 12px;
 transform: translateZ(0);
 display: flex;
 vertical-align: middle;
 height: 16px;
 line-height: 16px;
 padding: 0 10px;
 border-radius: 10px;
 position: absolute;
 white-space: nowrap;
 color: var(--n-text-color-line-inner);
 transition:
 right .2s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `)]),Ce("progress-graph-line-rail",`
 position: relative;
 overflow: hidden;
 height: var(--n-rail-height);
 border-radius: 5px;
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 `,[Ce("progress-graph-line-fill",`
 background: var(--n-fill-color);
 position: relative;
 border-radius: 5px;
 height: inherit;
 width: 100%;
 max-width: 0%;
 transition:
 background-color .3s var(--n-bezier),
 max-width .2s var(--n-bezier);
 `,[Fe("processing",[ze("&::after",`
 content: "";
 background-image: var(--n-line-bg-processing);
 animation: progress-processing-animation 2s var(--n-bezier) infinite;
 `)])])])])])]),ze("@keyframes progress-processing-animation",`
 0% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 100%;
 opacity: 1;
 }
 66% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 100% {
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 right: 0;
 opacity: 0;
 }
 `)]),ri=Object.assign(Object.assign({},Ct.props),{processing:Boolean,type:{type:String,default:"line"},gapDegree:Number,gapOffsetDegree:Number,status:{type:String,default:"default"},railColor:[String,Array],railStyle:[String,Array],color:[String,Array,Object],viewBoxWidth:{type:Number,default:100},strokeWidth:{type:Number,default:7},percentage:[Number,Array],unit:{type:String,default:"%"},showIndicator:{type:Boolean,default:!0},indicatorPosition:{type:String,default:"outside"},indicatorPlacement:{type:String,default:"outside"},indicatorTextColor:String,circleGap:{type:Number,default:1},height:Number,borderRadius:[String,Number],fillBorderRadius:[String,Number],offsetDegree:Number}),ni=Qe({name:"Progress",props:ri,setup(h){const V=Ne(()=>h.indicatorPlacement||h.indicatorPosition),T=Ne(()=>{if(h.gapDegree||h.gapDegree===0)return h.gapDegree;if(h.type==="dashboard")return 75}),{mergedClsPrefixRef:N,inlineThemeDisabled:p}=St(h),k=Ct("Progress","-progress",ti,Rn,h,N),m=Ne(()=>{const{status:w}=h,{common:{cubicBezierEaseInOut:R},self:{fontSize:t,fontSizeCircle:v,railColor:c,railHeight:C,iconSizeCircle:l,iconSizeLine:y,textColorCircle:O,textColorLineInner:I,textColorLineOuter:U,lineBgProcessing:F,fontWeightCircle:q,[hr("iconColor",w)]:K,[hr("fillColor",w)]:g}}=k.value;return{"--n-bezier":R,"--n-fill-color":g,"--n-font-size":t,"--n-font-size-circle":v,"--n-font-weight-circle":q,"--n-icon-color":K,"--n-icon-size-circle":l,"--n-icon-size-line":y,"--n-line-bg-processing":F,"--n-rail-color":c,"--n-rail-height":C,"--n-text-color-circle":O,"--n-text-color-line-inner":I,"--n-text-color-line-outer":U}}),E=p?rr("progress",Ne(()=>h.status[0]),m,h):void 0;return{mergedClsPrefix:N,mergedIndicatorPlacement:V,gapDeg:T,cssVars:p?void 0:m,themeClass:E==null?void 0:E.themeClass,onRender:E==null?void 0:E.onRender}},render(){const{type:h,cssVars:V,indicatorTextColor:T,showIndicator:N,status:p,railColor:k,railStyle:m,color:E,percentage:w,viewBoxWidth:R,strokeWidth:t,mergedIndicatorPlacement:v,unit:c,borderRadius:C,fillBorderRadius:l,height:y,processing:O,circleGap:I,mergedClsPrefix:U,gapDeg:F,gapOffsetDegree:q,themeClass:K,$slots:g,onRender:d}=this;return d==null||d(),j("div",{class:[K,`${U}-progress`,`${U}-progress--${h}`,`${U}-progress--${p}`],style:V,"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":w,role:h==="circle"||h==="line"||h==="dashboard"?"progressbar":"none"},h==="circle"||h==="dashboard"?j(Qo,{clsPrefix:U,status:p,showIndicator:N,indicatorTextColor:T,railColor:k,fillColor:E,railStyle:m,offsetDegree:this.offsetDegree,percentage:w,viewBoxWidth:R,strokeWidth:t,gapDegree:F===void 0?h==="dashboard"?75:0:F,gapOffsetDegree:q,unit:c},g):h==="line"?j(Yo,{clsPrefix:U,status:p,showIndicator:N,indicatorTextColor:T,railColor:k,fillColor:E,railStyle:m,percentage:w,processing:O,indicatorPlacement:v,unit:c,fillBorderRadius:l,railBorderRadius:C,height:y},g):h==="multiple-circle"?j(ei,{clsPrefix:U,strokeWidth:t,railColor:k,fillColor:E,railStyle:m,viewBoxWidth:R,percentage:w,showIndicator:N,circleGap:I},g):null)}}),mt=tr("n-upload"),oi=ze([Ce("upload","width: 100%;",[Fe("dragger-inside",[Ce("upload-trigger",`
 display: block;
 `)]),Fe("drag-over",[Ce("upload-dragger",`
 border: var(--n-dragger-border-hover);
 `)])]),Ce("upload-dragger",`
 cursor: pointer;
 box-sizing: border-box;
 width: 100%;
 text-align: center;
 border-radius: var(--n-border-radius);
 padding: 24px;
 opacity: 1;
 transition:
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-dragger-color);
 border: var(--n-dragger-border);
 `,[ze("&:hover",`
 border: var(--n-dragger-border-hover);
 `),Fe("disabled",`
 cursor: not-allowed;
 `)]),Ce("upload-trigger",`
 display: inline-block;
 box-sizing: border-box;
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[ze("+",[Ce("upload-file-list","margin-top: 8px;")]),Fe("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `),Fe("image-card",`
 width: 96px;
 height: 96px;
 `,[Ce("base-icon",`
 font-size: 24px;
 `),Ce("upload-dragger",`
 padding: 0;
 height: 100%;
 width: 100%;
 display: flex;
 align-items: center;
 justify-content: center;
 `)])]),Ce("upload-file-list",`
 line-height: var(--n-line-height);
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 `,[ze("a, img","outline: none;"),Fe("disabled",`
 opacity: var(--n-item-disabled-opacity);
 cursor: not-allowed;
 `,[Ce("upload-file","cursor: not-allowed;")]),Fe("grid",`
 display: grid;
 grid-template-columns: repeat(auto-fill, 96px);
 grid-gap: 8px;
 margin-top: 0;
 `),Ce("upload-file",`
 display: block;
 box-sizing: border-box;
 cursor: default;
 padding: 0px 12px 0 6px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `,[gr(),Ce("progress",[gr({foldPadding:!0})]),ze("&:hover",`
 background-color: var(--n-item-color-hover);
 `,[Ce("upload-file-info",[nt("action",`
 opacity: 1;
 `)])]),Fe("image-type",`
 border-radius: var(--n-border-radius);
 text-decoration: underline;
 text-decoration-color: #0000;
 `,[Ce("upload-file-info",`
 padding-top: 0px;
 padding-bottom: 0px;
 width: 100%;
 height: 100%;
 display: flex;
 justify-content: space-between;
 align-items: center;
 padding: 6px 0;
 `,[Ce("progress",`
 padding: 2px 0;
 margin-bottom: 0;
 `),nt("name",`
 padding: 0 8px;
 `),nt("thumbnail",`
 width: 32px;
 height: 32px;
 font-size: 28px;
 display: flex;
 justify-content: center;
 align-items: center;
 `,[ze("img",`
 width: 100%;
 `)])])]),Fe("text-type",[Ce("progress",`
 box-sizing: border-box;
 padding-bottom: 6px;
 margin-bottom: 6px;
 `)]),Fe("image-card-type",`
 position: relative;
 width: 96px;
 height: 96px;
 border: var(--n-item-border-image-card);
 border-radius: var(--n-border-radius);
 padding: 0;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: border-color .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 overflow: hidden;
 `,[Ce("progress",`
 position: absolute;
 left: 8px;
 bottom: 8px;
 right: 8px;
 width: unset;
 `),Ce("upload-file-info",`
 padding: 0;
 width: 100%;
 height: 100%;
 `,[nt("thumbnail",`
 width: 100%;
 height: 100%;
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 font-size: 36px;
 `,[ze("img",`
 width: 100%;
 `)])]),ze("&::before",`
 position: absolute;
 z-index: 1;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 opacity: 0;
 transition: opacity .2s var(--n-bezier);
 content: "";
 `),ze("&:hover",[ze("&::before","opacity: 1;"),Ce("upload-file-info",[nt("thumbnail","opacity: .12;")])])]),Fe("error-status",[ze("&:hover",`
 background-color: var(--n-item-color-hover-error);
 `),Ce("upload-file-info",[nt("name","color: var(--n-item-text-color-error);"),nt("thumbnail","color: var(--n-item-text-color-error);")]),Fe("image-card-type",`
 border: var(--n-item-border-image-card-error);
 `)]),Fe("with-url",`
 cursor: pointer;
 `,[Ce("upload-file-info",[nt("name",`
 color: var(--n-item-text-color-success);
 text-decoration-color: var(--n-item-text-color-success);
 `,[ze("a",`
 text-decoration: underline;
 `)])])]),Ce("upload-file-info",`
 position: relative;
 padding-top: 6px;
 padding-bottom: 6px;
 display: flex;
 flex-wrap: nowrap;
 `,[nt("thumbnail",`
 font-size: 18px;
 opacity: 1;
 transition: opacity .2s var(--n-bezier);
 color: var(--n-item-icon-color);
 `,[Ce("base-icon",`
 margin-right: 2px;
 vertical-align: middle;
 transition: color .3s var(--n-bezier);
 `)]),nt("action",`
 padding-top: inherit;
 padding-bottom: inherit;
 position: absolute;
 right: 0;
 top: 0;
 bottom: 0;
 width: 80px;
 display: flex;
 align-items: center;
 transition: opacity .2s var(--n-bezier);
 justify-content: flex-end;
 opacity: 0;
 `,[Ce("button",[ze("&:not(:last-child)",{marginRight:"4px"}),Ce("base-icon",[ze("svg",[wn()])])]),Fe("image-type",`
 position: relative;
 max-width: 80px;
 width: auto;
 `),Fe("image-card-type",`
 z-index: 2;
 position: absolute;
 width: 100%;
 height: 100%;
 left: 0;
 right: 0;
 bottom: 0;
 top: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 `)]),nt("name",`
 color: var(--n-item-text-color);
 flex: 1;
 display: flex;
 justify-content: center;
 text-overflow: ellipsis;
 overflow: hidden;
 flex-direction: column;
 text-decoration-color: #0000;
 font-size: var(--n-font-size);
 transition:
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier); 
 `,[ze("a",`
 color: inherit;
 text-decoration: underline;
 `)])])])]),Ce("upload-file-input",`
 display: none;
 width: 0;
 height: 0;
 opacity: 0;
 `)]),en="__UPLOAD_DRAGGER__",ii=Qe({name:"UploadDragger",[en]:!0,setup(h,{slots:V}){const T=ht(mt,null);return T||Lt("upload-dragger","`n-upload-dragger` must be placed inside `n-upload`."),()=>{const{mergedClsPrefixRef:{value:N},mergedDisabledRef:{value:p},maxReachedRef:{value:k}}=T;return j("div",{class:[`${N}-upload-dragger`,(p||k)&&`${N}-upload-dragger--disabled`]},V)}}}),si=j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},j("g",{fill:"none"},j("path",{d:"M21.75 3A3.25 3.25 0 0 1 25 6.25v15.5A3.25 3.25 0 0 1 21.75 25H6.25A3.25 3.25 0 0 1 3 21.75V6.25A3.25 3.25 0 0 1 6.25 3h15.5zm.583 20.4l-7.807-7.68a.75.75 0 0 0-.968-.07l-.084.07l-7.808 7.68c.183.065.38.1.584.1h15.5c.204 0 .4-.035.583-.1l-7.807-7.68l7.807 7.68zM21.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v15.5c0 .208.036.408.103.593l7.82-7.692a2.25 2.25 0 0 1 3.026-.117l.129.117l7.82 7.692c.066-.185.102-.385.102-.593V6.25a1.75 1.75 0 0 0-1.75-1.75zm-3.25 3a2.5 2.5 0 1 1 0 5a2.5 2.5 0 0 1 0-5zm0 1.5a1 1 0 1 0 0 2a1 1 0 0 0 0-2z",fill:"currentColor"}))),ai=j("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},j("g",{fill:"none"},j("path",{d:"M6.4 2A2.4 2.4 0 0 0 4 4.4v19.2A2.4 2.4 0 0 0 6.4 26h15.2a2.4 2.4 0 0 0 2.4-2.4V11.578c0-.729-.29-1.428-.805-1.944l-6.931-6.931A2.4 2.4 0 0 0 14.567 2H6.4zm-.9 2.4a.9.9 0 0 1 .9-.9H14V10a2 2 0 0 0 2 2h6.5v11.6a.9.9 0 0 1-.9.9H6.4a.9.9 0 0 1-.9-.9V4.4zm16.44 6.1H16a.5.5 0 0 1-.5-.5V4.06l6.44 6.44z",fill:"currentColor"}))),li=Qe({name:"UploadProgress",props:{show:Boolean,percentage:{type:Number,required:!0},status:{type:String,required:!0}},setup(){return{mergedTheme:ht(mt).mergedThemeRef}},render(){return j(Nr,null,{default:()=>this.show?j(ni,{type:"line",showIndicator:!1,percentage:this.percentage,status:this.status,height:2,theme:this.mergedTheme.peers.Progress,themeOverrides:this.mergedTheme.peerOverrides.Progress}):null})}});var er=function(h,V,T,N){function p(k){return k instanceof T?k:new T(function(m){m(k)})}return new(T||(T=Promise))(function(k,m){function E(t){try{R(N.next(t))}catch(v){m(v)}}function w(t){try{R(N.throw(t))}catch(v){m(v)}}function R(t){t.done?k(t.value):p(t.value).then(E,w)}R((N=N.apply(h,V||[])).next())})};function tn(h){return h.includes("image/")}function Sr(h=""){const V=h.split("/"),N=V[V.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(N)||[""])[0]}const kr=/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i,rn=h=>{if(h.type)return tn(h.type);const V=Sr(h.name||"");if(kr.test(V))return!0;const T=h.thumbnailUrl||h.url||"",N=Sr(T);return!!(/^data:image\//.test(T)||kr.test(N))};function ui(h){return er(this,void 0,void 0,function*(){return yield new Promise(V=>{if(!h.type||!tn(h.type)){V("");return}V(window.URL.createObjectURL(h))})})}const ci=Pr&&window.FileReader&&window.File;function di(h){return h.isDirectory}function fi(h){return h.isFile}function hi(h,V){return er(this,void 0,void 0,function*(){const T=[];function N(p){return er(this,void 0,void 0,function*(){for(const k of p)if(k){if(V&&di(k)){const m=k.createReader();let E=[],w;try{do w=yield new Promise((R,t)=>{m.readEntries(R,t)}),E=E.concat(w);while(w.length>0)}catch(R){vr("upload","error happens when handling directory upload",R)}yield N(E)}else if(fi(k))try{const m=yield new Promise((E,w)=>{k.file(E,w)});T.push({file:m,entry:k,source:"dnd"})}catch(m){vr("upload","error happens when handling file upload",m)}}})}return yield N(h),T})}function xt(h){const{id:V,name:T,percentage:N,status:p,url:k,file:m,thumbnailUrl:E,type:w,fullPath:R,batchId:t}=h;return{id:V,name:T,percentage:N??null,status:p,url:k??null,file:m??null,thumbnailUrl:E??null,type:w??null,fullPath:R??null,batchId:t??null}}function gi(h,V,T){return h=h.toLowerCase(),V=V.toLocaleLowerCase(),T=T.toLocaleLowerCase(),T.split(",").map(p=>p.trim()).filter(Boolean).some(p=>{if(p.startsWith(".")){if(h.endsWith(p))return!0}else if(p.includes("/")){const[k,m]=V.split("/"),[E,w]=p.split("/");if((E==="*"||k&&E&&E===k)&&(w==="*"||m&&w&&w===m))return!0}else return!0;return!1})}var Rr=function(h,V,T,N){function p(k){return k instanceof T?k:new T(function(m){m(k)})}return new(T||(T=Promise))(function(k,m){function E(t){try{R(N.next(t))}catch(v){m(v)}}function w(t){try{R(N.throw(t))}catch(v){m(v)}}function R(t){t.done?k(t.value):p(t.value).then(E,w)}R((N=N.apply(h,V||[])).next())})};const Et={paddingMedium:"0 3px",heightMedium:"24px",iconSizeMedium:"18px"},vi=Qe({name:"UploadFile",props:{clsPrefix:{type:String,required:!0},file:{type:Object,required:!0},listType:{type:String,required:!0},index:{type:Number,required:!0}},setup(h){const V=ht(mt),T=Ge(null),N=Ge(""),p=Ne(()=>{const{file:K}=h;return K.status==="finished"?"success":K.status==="error"?"error":"info"}),k=Ne(()=>{const{file:K}=h;if(K.status==="error")return"error"}),m=Ne(()=>{const{file:K}=h;return K.status==="uploading"}),E=Ne(()=>{if(!V.showCancelButtonRef.value)return!1;const{file:K}=h;return["uploading","pending","error"].includes(K.status)}),w=Ne(()=>{if(!V.showRemoveButtonRef.value)return!1;const{file:K}=h;return["finished"].includes(K.status)}),R=Ne(()=>{if(!V.showDownloadButtonRef.value)return!1;const{file:K}=h;return["finished"].includes(K.status)}),t=Ne(()=>{if(!V.showRetryButtonRef.value)return!1;const{file:K}=h;return["error"].includes(K.status)}),v=Pn(()=>N.value||h.file.thumbnailUrl||h.file.url),c=Ne(()=>{if(!V.showPreviewButtonRef.value)return!1;const{file:{status:K},listType:g}=h;return["finished"].includes(K)&&v.value&&g==="image-card"});function C(){return Rr(this,void 0,void 0,function*(){const K=V.onRetryRef.value;K&&(yield K({file:h.file}))===!1||V.submit(h.file.id)})}function l(K){K.preventDefault();const{file:g}=h;["finished","pending","error"].includes(g.status)?O(g):["uploading"].includes(g.status)?U(g):On("upload","The button clicked type is unknown.")}function y(K){K.preventDefault(),I(h.file)}function O(K){const{xhrMap:g,doChange:d,onRemoveRef:{value:B},mergedFileListRef:{value:i}}=V;Promise.resolve(B?B({file:Object.assign({},K),fileList:i,index:h.index}):!0).then(n=>{if(n===!1)return;const r=Object.assign({},K,{status:"removed"});g.delete(K.id),d(r,void 0,{remove:!0})})}function I(K){const{onDownloadRef:{value:g}}=V;Promise.resolve(g?g(Object.assign({},K)):!0).then(d=>{d!==!1&&jr(K.url,K.name)})}function U(K){const{xhrMap:g}=V,d=g.get(K.id);d==null||d.abort(),O(Object.assign({},K))}function F(K){const{onPreviewRef:{value:g}}=V;if(g)g(h.file,{event:K});else if(h.listType==="image-card"){const{value:d}=T;if(!d)return;d.click()}}const q=()=>Rr(this,void 0,void 0,function*(){const{listType:K}=h;K!=="image"&&K!=="image-card"||V.shouldUseThumbnailUrlRef.value(h.file)&&(N.value=yield V.getFileThumbnailUrlResolver(h.file))});return Yt(()=>{q()}),{mergedTheme:V.mergedThemeRef,progressStatus:p,buttonType:k,showProgress:m,disabled:V.mergedDisabledRef,showCancelButton:E,showRemoveButton:w,showDownloadButton:R,showRetryButton:t,showPreviewButton:c,mergedThumbnailUrl:v,shouldUseThumbnailUrl:V.shouldUseThumbnailUrlRef,renderIcon:V.renderIconRef,imageRef:T,handleRemoveOrCancelClick:l,handleDownloadClick:y,handleRetryClick:C,handlePreviewClick:F}},render(){const{clsPrefix:h,mergedTheme:V,listType:T,file:N,renderIcon:p}=this;let k;const m=T==="image";m||T==="image-card"?k=!this.shouldUseThumbnailUrl(N)||!this.mergedThumbnailUrl?j("span",{class:`${h}-upload-file-info__thumbnail`},p?p(N):rn(N)?j(Ke,{clsPrefix:h},{default:si}):j(Ke,{clsPrefix:h},{default:ai})):j("a",{rel:"noopener noreferer",target:"_blank",href:N.url||void 0,class:`${h}-upload-file-info__thumbnail`,onClick:this.handlePreviewClick},T==="image-card"?j(Xo,{src:this.mergedThumbnailUrl||void 0,previewSrc:N.url||void 0,alt:N.name,ref:"imageRef"}):j("img",{src:this.mergedThumbnailUrl||void 0,alt:N.name})):k=j("span",{class:`${h}-upload-file-info__thumbnail`},p?p(N):j(Ke,{clsPrefix:h},{default:()=>j(Po,null)}));const w=j(li,{show:this.showProgress,percentage:N.percentage||0,status:this.progressStatus}),R=T==="text"||T==="image";return j("div",{class:[`${h}-upload-file`,`${h}-upload-file--${this.progressStatus}-status`,N.url&&N.status!=="error"&&T!=="image-card"&&`${h}-upload-file--with-url`,`${h}-upload-file--${T}-type`]},j("div",{class:`${h}-upload-file-info`},k,j("div",{class:`${h}-upload-file-info__name`},R&&(N.url&&N.status!=="error"?j("a",{rel:"noopener noreferer",target:"_blank",href:N.url||void 0,onClick:this.handlePreviewClick},N.name):j("span",{onClick:this.handlePreviewClick},N.name)),m&&w),j("div",{class:[`${h}-upload-file-info__action`,`${h}-upload-file-info__action--${T}-type`]},this.showPreviewButton?j(Pt,{key:"preview",quaternary:!0,type:this.buttonType,onClick:this.handlePreviewClick,theme:V.peers.Button,themeOverrides:V.peerOverrides.Button,builtinThemeOverrides:Et},{icon:()=>j(Ke,{clsPrefix:h},{default:()=>j(Tn,null)})}):null,(this.showRemoveButton||this.showCancelButton)&&!this.disabled&&j(Pt,{key:"cancelOrTrash",theme:V.peers.Button,themeOverrides:V.peerOverrides.Button,quaternary:!0,builtinThemeOverrides:Et,type:this.buttonType,onClick:this.handleRemoveOrCancelClick},{icon:()=>j(Bn,null,{default:()=>this.showRemoveButton?j(Ke,{clsPrefix:h,key:"trash"},{default:()=>j(Uo,null)}):j(Ke,{clsPrefix:h,key:"cancel"},{default:()=>j(Oo,null)})})}),this.showRetryButton&&!this.disabled&&j(Pt,{key:"retry",quaternary:!0,type:this.buttonType,onClick:this.handleRetryClick,theme:V.peers.Button,themeOverrides:V.peerOverrides.Button,builtinThemeOverrides:Et},{icon:()=>j(Ke,{clsPrefix:h},{default:()=>j(Ao,null)})}),this.showDownloadButton?j(Pt,{key:"download",quaternary:!0,type:this.buttonType,onClick:this.handleDownloadClick,theme:V.peers.Button,themeOverrides:V.peerOverrides.Button,builtinThemeOverrides:Et},{icon:()=>j(Ke,{clsPrefix:h},{default:()=>j(Zr,null)})}):null)),!m&&w)}}),nn=Qe({name:"UploadTrigger",props:{abstract:Boolean},slots:Object,setup(h,{slots:V}){const T=ht(mt,null);T||Lt("upload-trigger","`n-upload-trigger` must be placed inside `n-upload`.");const{mergedClsPrefixRef:N,mergedDisabledRef:p,maxReachedRef:k,listTypeRef:m,dragOverRef:E,openOpenFileDialog:w,draggerInsideRef:R,handleFileAddition:t,mergedDirectoryDndRef:v,triggerClassRef:c,triggerStyleRef:C}=T,l=Ne(()=>m.value==="image-card");function y(){p.value||k.value||w()}function O(q){q.preventDefault(),E.value=!0}function I(q){q.preventDefault(),E.value=!0}function U(q){q.preventDefault(),E.value=!1}function F(q){var K;if(q.preventDefault(),!R.value||p.value||k.value){E.value=!1;return}const g=(K=q.dataTransfer)===null||K===void 0?void 0:K.items;g!=null&&g.length?hi(Array.from(g).map(d=>d.webkitGetAsEntry()),v.value).then(d=>{t(d)}).finally(()=>{E.value=!1}):E.value=!1}return()=>{var q;const{value:K}=N;return h.abstract?(q=V.default)===null||q===void 0?void 0:q.call(V,{handleClick:y,handleDrop:F,handleDragOver:O,handleDragEnter:I,handleDragLeave:U}):j("div",{class:[`${K}-upload-trigger`,(p.value||k.value)&&`${K}-upload-trigger--disabled`,l.value&&`${K}-upload-trigger--image-card`,c.value],style:C.value,onClick:y,onDrop:F,onDragover:O,onDragenter:I,onDragleave:U},l.value?j(ii,null,{default:()=>Er(V.default,()=>[j(Ke,{clsPrefix:K},{default:()=>j(En,null)})])}):V)}}}),pi=Qe({name:"UploadFileList",setup(h,{slots:V}){const T=ht(mt,null);T||Lt("upload-file-list","`n-upload-file-list` must be placed inside `n-upload`.");const{abstractRef:N,mergedClsPrefixRef:p,listTypeRef:k,mergedFileListRef:m,fileListClassRef:E,fileListStyleRef:w,cssVarsRef:R,themeClassRef:t,maxReachedRef:v,showTriggerRef:c,imageGroupPropsRef:C}=T,l=Ne(()=>k.value==="image-card"),y=()=>m.value.map((I,U)=>j(vi,{clsPrefix:p.value,key:I.id,file:I,index:U,listType:k.value})),O=()=>l.value?j(Go,Object.assign({},C.value),{default:y}):j(Nr,{group:!0},{default:y});return()=>{const{value:I}=p,{value:U}=N;return j("div",{class:[`${I}-upload-file-list`,l.value&&`${I}-upload-file-list--grid`,U?t==null?void 0:t.value:void 0,E.value],style:[U&&R?R.value:"",w.value]},O(),c.value&&!v.value&&l.value&&j(nn,null,V))}}});var wr=function(h,V,T,N){function p(k){return k instanceof T?k:new T(function(m){m(k)})}return new(T||(T=Promise))(function(k,m){function E(t){try{R(N.next(t))}catch(v){m(v)}}function w(t){try{R(N.throw(t))}catch(v){m(v)}}function R(t){t.done?k(t.value):p(t.value).then(E,w)}R((N=N.apply(h,V||[])).next())})};function yi(h,V,T){const{doChange:N,xhrMap:p}=h;let k=0;function m(w){var R;let t=Object.assign({},V,{status:"error",percentage:k});p.delete(V.id),t=xt(((R=h.onError)===null||R===void 0?void 0:R.call(h,{file:t,event:w}))||t),N(t,w)}function E(w){var R;if(h.isErrorState){if(h.isErrorState(T)){m(w);return}}else if(T.status<200||T.status>=300){m(w);return}let t=Object.assign({},V,{status:"finished",percentage:k});p.delete(V.id),t=xt(((R=h.onFinish)===null||R===void 0?void 0:R.call(h,{file:t,event:w}))||t),N(t,w)}return{handleXHRLoad:E,handleXHRError:m,handleXHRAbort(w){const R=Object.assign({},V,{status:"removed",file:null,percentage:k});p.delete(V.id),N(R,w)},handleXHRProgress(w){const R=Object.assign({},V,{status:"uploading"});if(w.lengthComputable){const t=Math.ceil(w.loaded/w.total*100);R.percentage=t,k=t}N(R,w)}}}function Ci(h){const{inst:V,file:T,data:N,headers:p,withCredentials:k,action:m,customRequest:E}=h,{doChange:w}=h.inst;let R=0;E({file:T,data:N,headers:p,withCredentials:k,action:m,onProgress(t){const v=Object.assign({},T,{status:"uploading"}),c=t.percent;v.percentage=c,R=c,w(v)},onFinish(){var t;let v=Object.assign({},T,{status:"finished",percentage:R});v=xt(((t=V.onFinish)===null||t===void 0?void 0:t.call(V,{file:v}))||v),w(v)},onError(){var t;let v=Object.assign({},T,{status:"error",percentage:R});v=xt(((t=V.onError)===null||t===void 0?void 0:t.call(V,{file:v}))||v),w(v)}})}function mi(h,V,T){const N=yi(h,V,T);T.onabort=N.handleXHRAbort,T.onerror=N.handleXHRError,T.onload=N.handleXHRLoad,T.upload&&(T.upload.onprogress=N.handleXHRProgress)}function on(h,V){return typeof h=="function"?h({file:V}):h||{}}function bi(h,V,T){const N=on(V,T);N&&Object.keys(N).forEach(p=>{h.setRequestHeader(p,N[p])})}function xi(h,V,T){const N=on(V,T);N&&Object.keys(N).forEach(p=>{h.append(p,N[p])})}function Si(h,V,T,{method:N,action:p,withCredentials:k,responseType:m,headers:E,data:w}){const R=new XMLHttpRequest;R.responseType=m,h.xhrMap.set(T.id,R),R.withCredentials=k;const t=new FormData;if(xi(t,w,T),T.file!==null&&t.append(V,T.file),mi(h,T,R),p!==void 0){R.open(N.toUpperCase(),p),bi(R,E,T),R.send(t);const v=Object.assign({},T,{status:"uploading"});h.doChange(v)}}const ki=Object.assign(Object.assign({},Ct.props),{name:{type:String,default:"file"},accept:String,action:String,customRequest:Function,directory:Boolean,directoryDnd:{type:Boolean,default:void 0},method:{type:String,default:"POST"},multiple:Boolean,showFileList:{type:Boolean,default:!0},data:[Object,Function],headers:[Object,Function],withCredentials:Boolean,responseType:{type:String,default:""},disabled:{type:Boolean,default:void 0},onChange:Function,onRemove:Function,onFinish:Function,onError:Function,onRetry:Function,onBeforeUpload:Function,isErrorState:Function,onDownload:Function,defaultUpload:{type:Boolean,default:!0},fileList:Array,"onUpdate:fileList":[Function,Array],onUpdateFileList:[Function,Array],fileListClass:String,fileListStyle:[String,Object],defaultFileList:{type:Array,default:()=>[]},showCancelButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showDownloadButton:Boolean,showRetryButton:{type:Boolean,default:!0},showPreviewButton:{type:Boolean,default:!0},listType:{type:String,default:"text"},onPreview:Function,shouldUseThumbnailUrl:{type:Function,default:h=>ci?rn(h):!1},createThumbnailUrl:Function,abstract:Boolean,max:Number,showTrigger:{type:Boolean,default:!0},imageGroupProps:Object,inputProps:Object,triggerClass:String,triggerStyle:[String,Object],renderIcon:Function}),Oi=Qe({name:"Upload",props:ki,setup(h){h.abstract&&h.listType==="image-card"&&Lt("upload","when the list-type is image-card, abstract is not supported.");const{mergedClsPrefixRef:V,inlineThemeDisabled:T}=St(h),N=Ct("Upload","-upload",oi,In,h,V),p=Ln(h),k=Ge(h.defaultFileList),m=je(h,"fileList"),E=Ge(null),w={value:!1},R=Ge(!1),t=new Map,v=Un(m,k),c=Ne(()=>v.value.map(xt)),C=Ne(()=>{const{max:i}=h;return i!==void 0?c.value.length>=i:!1});function l(){var i;(i=E.value)===null||i===void 0||i.click()}function y(i){const n=i.target;F(n.files?Array.from(n.files).map(r=>({file:r,entry:null,source:"input"})):null,i),n.value=""}function O(i){const{"onUpdate:fileList":n,onUpdateFileList:r}=h;n&&pr(n,i),r&&pr(r,i),k.value=i}const I=Ne(()=>h.multiple||h.directory),U=(i,n,r={append:!1,remove:!1})=>{const{append:s,remove:a}=r,b=Array.from(c.value),M=b.findIndex(P=>P.id===i.id);if(s||a||~M){s?b.push(i):a?b.splice(M,1):b.splice(M,1,i);const{onChange:P}=h;P&&P({file:i,fileList:b,event:n}),O(b)}};function F(i,n){if(!i||i.length===0)return;const{onBeforeUpload:r}=h;i=I.value?i:[i[0]];const{max:s,accept:a}=h;i=i.filter(({file:M,source:P})=>P==="dnd"&&(a!=null&&a.trim())?gi(M.name,M.type,a):!0),s&&(i=i.slice(0,s-c.value.length));const b=Jt();Promise.all(i.map(M=>wr(this,[M],void 0,function*({file:P,entry:$}){var D;const te={id:Jt(),batchId:b,name:P.name,status:"pending",percentage:0,file:P,url:null,type:P.type,thumbnailUrl:null,fullPath:(D=$==null?void 0:$.fullPath)!==null&&D!==void 0?D:`/${P.webkitRelativePath||P.name}`};return!r||(yield r({file:te,fileList:c.value}))!==!1?te:null}))).then(M=>wr(this,void 0,void 0,function*(){let P=Promise.resolve();M.forEach($=>{P=P.then(Nn).then(()=>{$&&U($,n,{append:!0})})}),yield P})).then(()=>{h.defaultUpload&&q()})}function q(i){const{method:n,action:r,withCredentials:s,headers:a,data:b,name:M}=h,P=i!==void 0?c.value.filter(D=>D.id===i):c.value,$=i!==void 0;P.forEach(D=>{const{status:te}=D;(te==="pending"||te==="error"&&$)&&(h.customRequest?Ci({inst:{doChange:U,xhrMap:t,onFinish:h.onFinish,onError:h.onError},file:D,action:r,withCredentials:s,headers:a,data:b,customRequest:h.customRequest}):Si({doChange:U,xhrMap:t,onFinish:h.onFinish,onError:h.onError,isErrorState:h.isErrorState},M,D,{method:n,action:r,withCredentials:s,responseType:h.responseType,headers:a,data:b}))})}function K(i){var n;if(i.thumbnailUrl)return i.thumbnailUrl;const{createThumbnailUrl:r}=h;return r?(n=r(i.file,i))!==null&&n!==void 0?n:i.url||"":i.url?i.url:i.file?ui(i.file):""}const g=Ne(()=>{const{common:{cubicBezierEaseInOut:i},self:{draggerColor:n,draggerBorder:r,draggerBorderHover:s,itemColorHover:a,itemColorHoverError:b,itemTextColorError:M,itemTextColorSuccess:P,itemTextColor:$,itemIconColor:D,itemDisabledOpacity:te,lineHeight:ne,borderRadius:ae,fontSize:ue,itemBorderImageCardError:Se,itemBorderImageCard:ve}}=N.value;return{"--n-bezier":i,"--n-border-radius":ae,"--n-dragger-border":r,"--n-dragger-border-hover":s,"--n-dragger-color":n,"--n-font-size":ue,"--n-item-color-hover":a,"--n-item-color-hover-error":b,"--n-item-disabled-opacity":te,"--n-item-icon-color":D,"--n-item-text-color":$,"--n-item-text-color-error":M,"--n-item-text-color-success":P,"--n-line-height":ne,"--n-item-border-image-card-error":Se,"--n-item-border-image-card":ve}}),d=T?rr("upload",void 0,g,h):void 0;nr(mt,{mergedClsPrefixRef:V,mergedThemeRef:N,showCancelButtonRef:je(h,"showCancelButton"),showDownloadButtonRef:je(h,"showDownloadButton"),showRemoveButtonRef:je(h,"showRemoveButton"),showRetryButtonRef:je(h,"showRetryButton"),onRemoveRef:je(h,"onRemove"),onDownloadRef:je(h,"onDownload"),mergedFileListRef:c,triggerClassRef:je(h,"triggerClass"),triggerStyleRef:je(h,"triggerStyle"),shouldUseThumbnailUrlRef:je(h,"shouldUseThumbnailUrl"),renderIconRef:je(h,"renderIcon"),xhrMap:t,submit:q,doChange:U,showPreviewButtonRef:je(h,"showPreviewButton"),onPreviewRef:je(h,"onPreview"),getFileThumbnailUrlResolver:K,listTypeRef:je(h,"listType"),dragOverRef:R,openOpenFileDialog:l,draggerInsideRef:w,handleFileAddition:F,mergedDisabledRef:p.mergedDisabledRef,maxReachedRef:C,fileListClassRef:je(h,"fileListClass"),fileListStyleRef:je(h,"fileListStyle"),abstractRef:je(h,"abstract"),acceptRef:je(h,"accept"),cssVarsRef:T?void 0:g,themeClassRef:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender,showTriggerRef:je(h,"showTrigger"),imageGroupPropsRef:je(h,"imageGroupProps"),mergedDirectoryDndRef:Ne(()=>{var i;return(i=h.directoryDnd)!==null&&i!==void 0?i:h.directory}),onRetryRef:je(h,"onRetry")});const B={clear:()=>{k.value=[]},submit:q,openOpenFileDialog:l};return Object.assign({mergedClsPrefix:V,draggerInsideRef:w,inputElRef:E,mergedTheme:N,dragOver:R,mergedMultiple:I,cssVars:T?void 0:g,themeClass:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender,handleFileInputChange:y},B)},render(){var h,V;const{draggerInsideRef:T,mergedClsPrefix:N,$slots:p,directory:k,onRender:m}=this;if(p.default&&!this.abstract){const w=p.default()[0];!((h=w==null?void 0:w.type)===null||h===void 0)&&h[en]&&(T.value=!0)}const E=j("input",Object.assign({},this.inputProps,{ref:"inputElRef",type:"file",class:`${N}-upload-file-input`,accept:this.accept,multiple:this.mergedMultiple,onChange:this.handleFileInputChange,webkitdirectory:k||void 0,directory:k||void 0}));return this.abstract?j(At,null,(V=p.default)===null||V===void 0?void 0:V.call(p),j(An,{to:"body"},E)):(m==null||m(),j("div",{class:[`${N}-upload`,T.value&&`${N}-upload--dragger-inside`,this.dragOver&&`${N}-upload--drag-over`,this.themeClass],style:this.cssVars},E,this.showTrigger&&this.listType!=="image-card"&&j(nn,null,p),this.showFileList&&j(pi,null,p)))}});var It={exports:{}},Ri=It.exports,Tr;function wi(){return Tr||(Tr=1,function(h,V){(function(N,p){h.exports=p()})(Ri,function(){return function(T){var N={};function p(k){if(N[k])return N[k].exports;var m=N[k]={i:k,l:!1,exports:{}};return T[k].call(m.exports,m,m.exports,p),m.l=!0,m.exports}return p.m=T,p.c=N,p.d=function(k,m,E){p.o(k,m)||Object.defineProperty(k,m,{enumerable:!0,get:E})},p.r=function(k){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},p.t=function(k,m){if(m&1&&(k=p(k)),m&8||m&4&&typeof k=="object"&&k&&k.__esModule)return k;var E=Object.create(null);if(p.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:k}),m&2&&typeof k!="string")for(var w in k)p.d(E,w,(function(R){return k[R]}).bind(null,w));return E},p.n=function(k){var m=k&&k.__esModule?function(){return k.default}:function(){return k};return p.d(m,"a",m),m},p.o=function(k,m){return Object.prototype.hasOwnProperty.call(k,m)},p.p="/dist/",p(p.s="./index.js")}({"./index.js":function(T,N,p){var k=p("./src/cos.js");T.exports=k},"./lib/base64.js":function(T,N){var p=function(k){k=k||{};var m=k.Base64,E="2.1.9",w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=function(s){for(var a={},b=0,M=s.length;b<M;b++)a[s.charAt(b)]=b;return a}(w),t=String.fromCharCode,v=function(a){if(a.length<2){var b=a.charCodeAt(0);return b<128?a:b<2048?t(192|b>>>6)+t(128|b&63):t(224|b>>>12&15)+t(128|b>>>6&63)+t(128|b&63)}else{var b=65536+(a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320);return t(240|b>>>18&7)+t(128|b>>>12&63)+t(128|b>>>6&63)+t(128|b&63)}},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=function(a){return a.replace(c,v)},l=function(a){var b=[0,2,1][a.length%3],M=a.charCodeAt(0)<<16|(a.length>1?a.charCodeAt(1):0)<<8|(a.length>2?a.charCodeAt(2):0),P=[w.charAt(M>>>18),w.charAt(M>>>12&63),b>=2?"=":w.charAt(M>>>6&63),b>=1?"=":w.charAt(M&63)];return P.join("")},y=k.btoa?function(s){return k.btoa(s)}:function(s){return s.replace(/[\s\S]{1,3}/g,l)},O=function(s){return y(C(s))},I=function(a,b){return b?O(String(a)).replace(/[+\/]/g,function(M){return M=="+"?"-":"_"}).replace(/=/g,""):O(String(a))},U=function(a){return I(a,!0)},F=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),q=function(a){switch(a.length){case 4:var b=(7&a.charCodeAt(0))<<18|(63&a.charCodeAt(1))<<12|(63&a.charCodeAt(2))<<6|63&a.charCodeAt(3),M=b-65536;return t((M>>>10)+55296)+t((M&1023)+56320);case 3:return t((15&a.charCodeAt(0))<<12|(63&a.charCodeAt(1))<<6|63&a.charCodeAt(2));default:return t((31&a.charCodeAt(0))<<6|63&a.charCodeAt(1))}},K=function(a){return a.replace(F,q)},g=function(a){var b=a.length,M=b%4,P=(b>0?R[a.charAt(0)]<<18:0)|(b>1?R[a.charAt(1)]<<12:0)|(b>2?R[a.charAt(2)]<<6:0)|(b>3?R[a.charAt(3)]:0),$=[t(P>>>16),t(P>>>8&255),t(P&255)];return $.length-=[0,0,2,1][M],$.join("")},d=k.atob?function(s){return k.atob(s)}:function(s){return s.replace(/[\s\S]{1,4}/g,g)},B=function(s){return K(d(s))},i=function(a){return B(String(a).replace(/[-_]/g,function(b){return b=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},n=function(){var a=k.Base64;return k.Base64=m,a},r={VERSION:E,atob:d,btoa:y,fromBase64:i,toBase64:I,utob:C,encode:I,encodeURI:U,btou:K,decode:i,noConflict:n};return r}();T.exports=p},"./lib/crypto.js":function(T,N,p){(function(k){var m=p("./node_modules/@babel/runtime/helpers/typeof.js"),E=E||function(w,R){var t={},v=t.lib={},c=function(){},C=v.Base={extend:function(g){c.prototype=this;var d=new c;return g&&d.mixIn(g),d.hasOwnProperty("init")||(d.init=function(){d.$super.init.apply(this,arguments)}),d.init.prototype=d,d.$super=this,d},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var d in g)g.hasOwnProperty(d)&&(this[d]=g[d]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}},l=v.WordArray=C.extend({init:function(g,d){g=this.words=g||[],this.sigBytes=d!=R?d:4*g.length},toString:function(g){return(g||O).stringify(this)},concat:function(g){var d=this.words,B=g.words,i=this.sigBytes;if(g=g.sigBytes,this.clamp(),i%4)for(var n=0;n<g;n++)d[i+n>>>2]|=(B[n>>>2]>>>24-8*(n%4)&255)<<24-8*((i+n)%4);else if(65535<B.length)for(n=0;n<g;n+=4)d[i+n>>>2]=B[n>>>2];else d.push.apply(d,B);return this.sigBytes+=g,this},clamp:function(){var g=this.words,d=this.sigBytes;g[d>>>2]&=4294967295<<32-8*(d%4),g.length=w.ceil(d/4)},clone:function(){var g=C.clone.call(this);return g.words=this.words.slice(0),g},random:function(g){for(var d=[],B=0;B<g;B+=4)d.push(4294967296*w.random()|0);return new l.init(d,g)}}),y=t.enc={},O=y.Hex={stringify:function(g){var d=g.words;g=g.sigBytes;for(var B=[],i=0;i<g;i++){var n=d[i>>>2]>>>24-8*(i%4)&255;B.push((n>>>4).toString(16)),B.push((n&15).toString(16))}return B.join("")},parse:function(g){for(var d=g.length,B=[],i=0;i<d;i+=2)B[i>>>3]|=parseInt(g.substr(i,2),16)<<24-4*(i%8);return new l.init(B,d/2)}},I=y.Latin1={stringify:function(g){var d=g.words;g=g.sigBytes;for(var B=[],i=0;i<g;i++)B.push(String.fromCharCode(d[i>>>2]>>>24-8*(i%4)&255));return B.join("")},parse:function(g){for(var d=g.length,B=[],i=0;i<d;i++)B[i>>>2]|=(g.charCodeAt(i)&255)<<24-8*(i%4);return new l.init(B,d)}},U=y.Utf8={stringify:function(g){try{return decodeURIComponent(escape(I.stringify(g)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(g){return I.parse(unescape(encodeURIComponent(g)))}},F=v.BufferedBlockAlgorithm=C.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(g){typeof g=="string"&&(g=U.parse(g)),this._data.concat(g),this._nDataBytes+=g.sigBytes},_process:function(g){var d=this._data,B=d.words,i=d.sigBytes,n=this.blockSize,r=i/(4*n),r=g?w.ceil(r):w.max((r|0)-this._minBufferSize,0);if(g=r*n,i=w.min(4*g,i),g){for(var s=0;s<g;s+=n)this._doProcessBlock(B,s);s=B.splice(0,g),d.sigBytes-=i}return new l.init(s,i)},clone:function(){var g=C.clone.call(this);return g._data=this._data.clone(),g},_minBufferSize:0});v.Hasher=F.extend({cfg:C.extend(),init:function(g){this.cfg=this.cfg.extend(g),this.reset()},reset:function(){F.reset.call(this),this._doReset()},update:function(g){return this._append(g),this._process(),this},finalize:function(g){return g&&this._append(g),this._doFinalize()},blockSize:16,_createHelper:function(g){return function(d,B){return new g.init(B).finalize(d)}},_createHmacHelper:function(g){return function(d,B){return new q.HMAC.init(g,B).finalize(d)}}});var q=t.algo={};return t}(Math);(function(){var w=E,c=w.lib,R=c.WordArray,t=c.Hasher,v=[],c=w.algo.SHA1=t.extend({_doReset:function(){this._hash=new R.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(l,y){for(var O=this._hash.words,I=O[0],U=O[1],F=O[2],q=O[3],K=O[4],g=0;80>g;g++){if(16>g)v[g]=l[y+g]|0;else{var d=v[g-3]^v[g-8]^v[g-14]^v[g-16];v[g]=d<<1|d>>>31}d=(I<<5|I>>>27)+K+v[g],d=20>g?d+((U&F|~U&q)+1518500249):40>g?d+((U^F^q)+1859775393):60>g?d+((U&F|U&q|F&q)-1894007588):d+((U^F^q)-899497514),K=q,q=F,F=U<<30|U>>>2,U=I,I=d}O[0]=O[0]+I|0,O[1]=O[1]+U|0,O[2]=O[2]+F|0,O[3]=O[3]+q|0,O[4]=O[4]+K|0},_doFinalize:function(){var l=this._data,y=l.words,O=8*this._nDataBytes,I=8*l.sigBytes;return y[I>>>5]|=128<<24-I%32,y[(I+64>>>9<<4)+14]=Math.floor(O/4294967296),y[(I+64>>>9<<4)+15]=O,l.sigBytes=4*y.length,this._process(),this._hash},clone:function(){var l=t.clone.call(this);return l._hash=this._hash.clone(),l}});w.SHA1=t._createHelper(c),w.HmacSHA1=t._createHmacHelper(c)})(),function(){var w=E,R=w.enc.Utf8;w.algo.HMAC=w.lib.Base.extend({init:function(v,c){v=this._hasher=new v.init,typeof c=="string"&&(c=R.parse(c));var C=v.blockSize,l=4*C;c.sigBytes>l&&(c=v.finalize(c)),c.clamp();for(var y=this._oKey=c.clone(),O=this._iKey=c.clone(),I=y.words,U=O.words,F=0;F<C;F++)I[F]^=1549556828,U[F]^=909522486;y.sigBytes=O.sigBytes=l,this.reset()},reset:function(){var v=this._hasher;v.reset(),v.update(this._iKey)},update:function(v){return this._hasher.update(v),this},finalize:function(v){var c=this._hasher;return v=c.finalize(v),c.reset(),c.finalize(this._oKey.clone().concat(v))}})}(),function(){var w=E,R=w.lib,t=R.WordArray,v=w.enc;v.Base64={stringify:function(C){var l=C.words,y=C.sigBytes,O=this._map;C.clamp();for(var I=[],U=0;U<y;U+=3)for(var F=l[U>>>2]>>>24-U%4*8&255,q=l[U+1>>>2]>>>24-(U+1)%4*8&255,K=l[U+2>>>2]>>>24-(U+2)%4*8&255,g=F<<16|q<<8|K,d=0;d<4&&U+d*.75<y;d++)I.push(O.charAt(g>>>6*(3-d)&63));var B=O.charAt(64);if(B)for(;I.length%4;)I.push(B);return I.join("")},parse:function(C){var l=C.length,y=this._map,O=y.charAt(64);if(O){var I=C.indexOf(O);I!=-1&&(l=I)}for(var U=[],F=0,q=0;q<l;q++)if(q%4){var K=y.indexOf(C.charAt(q-1))<<q%4*2,g=y.indexOf(C.charAt(q))>>>6-q%4*2;U[F>>>2]|=(K|g)<<24-F%4*8,F++}return t.create(U,F)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),m(k)==="object"?k.exports=E:window.CryptoJS=E}).call(this,p("./node_modules/webpack/buildin/module.js")(T))},"./lib/md5.js":function(T,N,p){(function(k){var m,E=p("./node_modules/@babel/runtime/helpers/typeof.js");(function(){var w=(typeof window>"u"?"undefined":E(window))==="object",R=w?window:{};R.JS_MD5_NO_WINDOW&&(w=!1);var t=!w&&(typeof self>"u"?"undefined":E(self))==="object";t&&(R=self);var v=!R.JS_MD5_NO_COMMON_JS&&E(k)==="object"&&k.exports,c=p("./node_modules/webpack/buildin/amd-options.js"),C=!R.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",l="0123456789abcdef".split(""),y=[128,32768,8388608,-2147483648],O=[0,8,16,24],I=["hex","array","digest","buffer","arrayBuffer","base64"],U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),F=[],q;if(C){var K=new ArrayBuffer(68);q=new Uint8Array(K),F=new Uint32Array(K)}(R.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),C&&(R.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return E(n)==="object"&&n.buffer&&n.buffer.constructor===ArrayBuffer});var g=function(r){return function(s,a){return new B(!0).update(s,a)[r]()}},d=function(){var r=g("hex");r.getCtx=r.create=function(){return new B},r.update=function(b){return r.create().update(b)};for(var s=0;s<I.length;++s){var a=I[s];r[a]=g(a)}return r};function B(n){if(n)F[0]=F[16]=F[1]=F[2]=F[3]=F[4]=F[5]=F[6]=F[7]=F[8]=F[9]=F[10]=F[11]=F[12]=F[13]=F[14]=F[15]=0,this.blocks=F,this.buffer8=q;else if(C){var r=new ArrayBuffer(68);this.buffer8=new Uint8Array(r),this.blocks=new Uint32Array(r)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}B.prototype.update=function(n,r){if(!this.finalized){for(var s,a=0,b,M=n.length,P=this.blocks,$=this.buffer8;a<M;){if(this.hashed&&(this.hashed=!1,P[0]=P[16],P[16]=P[1]=P[2]=P[3]=P[4]=P[5]=P[6]=P[7]=P[8]=P[9]=P[10]=P[11]=P[12]=P[13]=P[14]=P[15]=0),C)for(b=this.start;a<M&&b<64;++a)s=n.charCodeAt(a),r||s<128?$[b++]=s:s<2048?($[b++]=192|s>>6,$[b++]=128|s&63):s<55296||s>=57344?($[b++]=224|s>>12,$[b++]=128|s>>6&63,$[b++]=128|s&63):(s=65536+((s&1023)<<10|n.charCodeAt(++a)&1023),$[b++]=240|s>>18,$[b++]=128|s>>12&63,$[b++]=128|s>>6&63,$[b++]=128|s&63);else for(b=this.start;a<M&&b<64;++a)s=n.charCodeAt(a),r||s<128?P[b>>2]|=s<<O[b++&3]:s<2048?(P[b>>2]|=(192|s>>6)<<O[b++&3],P[b>>2]|=(128|s&63)<<O[b++&3]):s<55296||s>=57344?(P[b>>2]|=(224|s>>12)<<O[b++&3],P[b>>2]|=(128|s>>6&63)<<O[b++&3],P[b>>2]|=(128|s&63)<<O[b++&3]):(s=65536+((s&1023)<<10|n.charCodeAt(++a)&1023),P[b>>2]|=(240|s>>18)<<O[b++&3],P[b>>2]|=(128|s>>12&63)<<O[b++&3],P[b>>2]|=(128|s>>6&63)<<O[b++&3],P[b>>2]|=(128|s&63)<<O[b++&3]);this.lastByteIndex=b,this.bytes+=b-this.start,b>=64?(this.start=b-64,this.hash(),this.hashed=!0):this.start=b}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,r=this.lastByteIndex;n[r>>2]|=y[r&3],r>=56&&(this.hashed||this.hash(),n[0]=n[16],n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.bytes<<3,n[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},B.prototype.hash=function(){var n,r,s,a,b,M,P=this.blocks;this.first?(n=P[0]-680876937,n=(n<<7|n>>>25)-271733879<<0,a=(-1732584194^n&2004318071)+P[1]-117830708,a=(a<<12|a>>>20)+n<<0,s=(-271733879^a&(n^-271733879))+P[2]-1126478375,s=(s<<17|s>>>15)+a<<0,r=(n^s&(a^n))+P[3]-1316259209,r=(r<<22|r>>>10)+s<<0):(n=this.h0,r=this.h1,s=this.h2,a=this.h3,n+=(a^r&(s^a))+P[0]-680876936,n=(n<<7|n>>>25)+r<<0,a+=(s^n&(r^s))+P[1]-389564586,a=(a<<12|a>>>20)+n<<0,s+=(r^a&(n^r))+P[2]+606105819,s=(s<<17|s>>>15)+a<<0,r+=(n^s&(a^n))+P[3]-1044525330,r=(r<<22|r>>>10)+s<<0),n+=(a^r&(s^a))+P[4]-176418897,n=(n<<7|n>>>25)+r<<0,a+=(s^n&(r^s))+P[5]+1200080426,a=(a<<12|a>>>20)+n<<0,s+=(r^a&(n^r))+P[6]-1473231341,s=(s<<17|s>>>15)+a<<0,r+=(n^s&(a^n))+P[7]-45705983,r=(r<<22|r>>>10)+s<<0,n+=(a^r&(s^a))+P[8]+1770035416,n=(n<<7|n>>>25)+r<<0,a+=(s^n&(r^s))+P[9]-1958414417,a=(a<<12|a>>>20)+n<<0,s+=(r^a&(n^r))+P[10]-42063,s=(s<<17|s>>>15)+a<<0,r+=(n^s&(a^n))+P[11]-1990404162,r=(r<<22|r>>>10)+s<<0,n+=(a^r&(s^a))+P[12]+1804603682,n=(n<<7|n>>>25)+r<<0,a+=(s^n&(r^s))+P[13]-40341101,a=(a<<12|a>>>20)+n<<0,s+=(r^a&(n^r))+P[14]-1502002290,s=(s<<17|s>>>15)+a<<0,r+=(n^s&(a^n))+P[15]+1236535329,r=(r<<22|r>>>10)+s<<0,n+=(s^a&(r^s))+P[1]-165796510,n=(n<<5|n>>>27)+r<<0,a+=(r^s&(n^r))+P[6]-1069501632,a=(a<<9|a>>>23)+n<<0,s+=(n^r&(a^n))+P[11]+643717713,s=(s<<14|s>>>18)+a<<0,r+=(a^n&(s^a))+P[0]-373897302,r=(r<<20|r>>>12)+s<<0,n+=(s^a&(r^s))+P[5]-701558691,n=(n<<5|n>>>27)+r<<0,a+=(r^s&(n^r))+P[10]+38016083,a=(a<<9|a>>>23)+n<<0,s+=(n^r&(a^n))+P[15]-660478335,s=(s<<14|s>>>18)+a<<0,r+=(a^n&(s^a))+P[4]-405537848,r=(r<<20|r>>>12)+s<<0,n+=(s^a&(r^s))+P[9]+568446438,n=(n<<5|n>>>27)+r<<0,a+=(r^s&(n^r))+P[14]-1019803690,a=(a<<9|a>>>23)+n<<0,s+=(n^r&(a^n))+P[3]-187363961,s=(s<<14|s>>>18)+a<<0,r+=(a^n&(s^a))+P[8]+1163531501,r=(r<<20|r>>>12)+s<<0,n+=(s^a&(r^s))+P[13]-1444681467,n=(n<<5|n>>>27)+r<<0,a+=(r^s&(n^r))+P[2]-51403784,a=(a<<9|a>>>23)+n<<0,s+=(n^r&(a^n))+P[7]+1735328473,s=(s<<14|s>>>18)+a<<0,r+=(a^n&(s^a))+P[12]-1926607734,r=(r<<20|r>>>12)+s<<0,b=r^s,n+=(b^a)+P[5]-378558,n=(n<<4|n>>>28)+r<<0,a+=(b^n)+P[8]-2022574463,a=(a<<11|a>>>21)+n<<0,M=a^n,s+=(M^r)+P[11]+1839030562,s=(s<<16|s>>>16)+a<<0,r+=(M^s)+P[14]-35309556,r=(r<<23|r>>>9)+s<<0,b=r^s,n+=(b^a)+P[1]-1530992060,n=(n<<4|n>>>28)+r<<0,a+=(b^n)+P[4]+1272893353,a=(a<<11|a>>>21)+n<<0,M=a^n,s+=(M^r)+P[7]-155497632,s=(s<<16|s>>>16)+a<<0,r+=(M^s)+P[10]-1094730640,r=(r<<23|r>>>9)+s<<0,b=r^s,n+=(b^a)+P[13]+681279174,n=(n<<4|n>>>28)+r<<0,a+=(b^n)+P[0]-358537222,a=(a<<11|a>>>21)+n<<0,M=a^n,s+=(M^r)+P[3]-722521979,s=(s<<16|s>>>16)+a<<0,r+=(M^s)+P[6]+76029189,r=(r<<23|r>>>9)+s<<0,b=r^s,n+=(b^a)+P[9]-640364487,n=(n<<4|n>>>28)+r<<0,a+=(b^n)+P[12]-421815835,a=(a<<11|a>>>21)+n<<0,M=a^n,s+=(M^r)+P[15]+530742520,s=(s<<16|s>>>16)+a<<0,r+=(M^s)+P[2]-995338651,r=(r<<23|r>>>9)+s<<0,n+=(s^(r|~a))+P[0]-198630844,n=(n<<6|n>>>26)+r<<0,a+=(r^(n|~s))+P[7]+1126891415,a=(a<<10|a>>>22)+n<<0,s+=(n^(a|~r))+P[14]-1416354905,s=(s<<15|s>>>17)+a<<0,r+=(a^(s|~n))+P[5]-57434055,r=(r<<21|r>>>11)+s<<0,n+=(s^(r|~a))+P[12]+1700485571,n=(n<<6|n>>>26)+r<<0,a+=(r^(n|~s))+P[3]-1894986606,a=(a<<10|a>>>22)+n<<0,s+=(n^(a|~r))+P[10]-1051523,s=(s<<15|s>>>17)+a<<0,r+=(a^(s|~n))+P[1]-2054922799,r=(r<<21|r>>>11)+s<<0,n+=(s^(r|~a))+P[8]+1873313359,n=(n<<6|n>>>26)+r<<0,a+=(r^(n|~s))+P[15]-30611744,a=(a<<10|a>>>22)+n<<0,s+=(n^(a|~r))+P[6]-1560198380,s=(s<<15|s>>>17)+a<<0,r+=(a^(s|~n))+P[13]+1309151649,r=(r<<21|r>>>11)+s<<0,n+=(s^(r|~a))+P[4]-145523070,n=(n<<6|n>>>26)+r<<0,a+=(r^(n|~s))+P[11]-1120210379,a=(a<<10|a>>>22)+n<<0,s+=(n^(a|~r))+P[2]+718787259,s=(s<<15|s>>>17)+a<<0,r+=(a^(s|~n))+P[9]-343485551,r=(r<<21|r>>>11)+s<<0,this.first?(this.h0=n+1732584193<<0,this.h1=r-271733879<<0,this.h2=s-1732584194<<0,this.h3=a+271733878<<0,this.first=!1):(this.h0=this.h0+n<<0,this.h1=this.h1+r<<0,this.h2=this.h2+s<<0,this.h3=this.h3+a<<0)},B.prototype.hex=function(){this.finalize();var n=this.h0,r=this.h1,s=this.h2,a=this.h3;return l[n>>4&15]+l[n&15]+l[n>>12&15]+l[n>>8&15]+l[n>>20&15]+l[n>>16&15]+l[n>>28&15]+l[n>>24&15]+l[r>>4&15]+l[r&15]+l[r>>12&15]+l[r>>8&15]+l[r>>20&15]+l[r>>16&15]+l[r>>28&15]+l[r>>24&15]+l[s>>4&15]+l[s&15]+l[s>>12&15]+l[s>>8&15]+l[s>>20&15]+l[s>>16&15]+l[s>>28&15]+l[s>>24&15]+l[a>>4&15]+l[a&15]+l[a>>12&15]+l[a>>8&15]+l[a>>20&15]+l[a>>16&15]+l[a>>28&15]+l[a>>24&15]},B.prototype.toString=B.prototype.hex,B.prototype.digest=function(n){if(n==="hex")return this.hex();this.finalize();var r=this.h0,s=this.h1,a=this.h2,b=this.h3,M=[r&255,r>>8&255,r>>16&255,r>>24&255,s&255,s>>8&255,s>>16&255,s>>24&255,a&255,a>>8&255,a>>16&255,a>>24&255,b&255,b>>8&255,b>>16&255,b>>24&255];return M},B.prototype.array=B.prototype.digest,B.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(16),r=new Uint32Array(n);return r[0]=this.h0,r[1]=this.h1,r[2]=this.h2,r[3]=this.h3,n},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.base64=function(){for(var n,r,s,a="",b=this.array(),M=0;M<15;)n=b[M++],r=b[M++],s=b[M++],a+=U[n>>>2]+U[(n<<4|r>>>4)&63]+U[(r<<2|s>>>6)&63]+U[s&63];return n=b[M],a+=U[n>>>2]+U[n<<4&63]+"==",a};var i=d();v?k.exports=i:(R.md5=i,c&&(m=(function(){return i}).call(i,p,i,k),m!==void 0&&(k.exports=m)))})()}).call(this,p("./node_modules/webpack/buildin/module.js")(T))},"./lib/request.js":function(T,N,p){var k=p("./node_modules/@babel/runtime/helpers/typeof.js"),m=function(c){switch(k(c)){case"string":return c;case"boolean":return c?"true":"false";case"number":return isFinite(c)?c:"";default:return""}},E=function(c,C,l,y){return C=C||"&",l=l||"=",c===null&&(c=void 0),k(c)==="object"?Object.keys(c).map(function(O){var I=encodeURIComponent(m(O))+l;return Array.isArray(c[O])?c[O].map(function(U){return I+encodeURIComponent(m(U))}).join(C):I+encodeURIComponent(m(c[O]))}).filter(Boolean).join(C):""},w=function(c,C,l){var y={},O=C.getAllResponseHeaders();return O&&O.length>0&&O.trim().split(`
`).forEach(function(I){if(I){var U=I.indexOf(":"),F=I.substr(0,U).trim().toLowerCase(),q=I.substr(U+1).trim();y[F]=q}}),{error:c,statusCode:C.status,statusMessage:C.statusText,headers:y,body:l}},R=function(c,C){return!C&&C==="text"?c.responseText:c.response},t=function(c,C){var l=(c.method||"GET").toUpperCase(),y=c.url;if(c.qs){var O=E(c.qs);O&&(y+=(y.indexOf("?")===-1?"?":"&")+O)}var I=new XMLHttpRequest;if(I.open(l,y,!0),I.responseType=c.dataType||"text",c.xhrFields)for(var U in c.xhrFields)I[U]=c.xhrFields[U];var F=c.headers;if(F)for(var q in F)F.hasOwnProperty(q)&&q.toLowerCase()!=="content-length"&&q.toLowerCase()!=="user-agent"&&q.toLowerCase()!=="origin"&&q.toLowerCase()!=="host"&&I.setRequestHeader(q,F[q]);return c.onProgress&&I.upload&&(I.upload.onprogress=c.onProgress),c.onDownloadProgress&&(I.onprogress=c.onDownloadProgress),c.timeout&&(I.timeout=c.timeout),I.ontimeout=function(K){var g=new Error("timeout");C(w(g,I))},I.onload=function(){C(w(null,I,R(I,c.dataType)))},I.onerror=function(K){var g=R(I,c.dataType);if(g)C(w(null,I,g));else{var d=I.statusText;!d&&I.status===0&&(d=new Error("CORS blocked or network error")),C(w(d,I,g))}},I.send(c.body||""),I};T.exports=t},"./node_modules/@babel/runtime/helpers/classCallCheck.js":function(T,N){function p(k,m){if(!(k instanceof m))throw new TypeError("Cannot call a class as a function")}T.exports=p,T.exports.__esModule=!0,T.exports.default=T.exports},"./node_modules/@babel/runtime/helpers/createClass.js":function(T,N,p){var k=p("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function m(w,R){for(var t=0;t<R.length;t++){var v=R[t];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(w,k(v.key),v)}}function E(w,R,t){return R&&m(w.prototype,R),t&&m(w,t),Object.defineProperty(w,"prototype",{writable:!1}),w}T.exports=E,T.exports.__esModule=!0,T.exports.default=T.exports},"./node_modules/@babel/runtime/helpers/defineProperty.js":function(T,N,p){var k=p("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function m(E,w,R){return(w=k(w))in E?Object.defineProperty(E,w,{value:R,enumerable:!0,configurable:!0,writable:!0}):E[w]=R,E}T.exports=m,T.exports.__esModule=!0,T.exports.default=T.exports},"./node_modules/@babel/runtime/helpers/toPrimitive.js":function(T,N,p){var k=p("./node_modules/@babel/runtime/helpers/typeof.js").default;function m(E,w){if(k(E)!="object"||!E)return E;var R=E[Symbol.toPrimitive];if(R!==void 0){var t=R.call(E,w||"default");if(k(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(E)}T.exports=m,T.exports.__esModule=!0,T.exports.default=T.exports},"./node_modules/@babel/runtime/helpers/toPropertyKey.js":function(T,N,p){var k=p("./node_modules/@babel/runtime/helpers/typeof.js").default,m=p("./node_modules/@babel/runtime/helpers/toPrimitive.js");function E(w){var R=m(w,"string");return k(R)=="symbol"?R:R+""}T.exports=E,T.exports.__esModule=!0,T.exports.default=T.exports},"./node_modules/@babel/runtime/helpers/typeof.js":function(T,N){function p(k){"@babel/helpers - typeof";return T.exports=p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},T.exports.__esModule=!0,T.exports.default=T.exports,p(k)}T.exports=p,T.exports.__esModule=!0,T.exports.default=T.exports},"./node_modules/fast-xml-parser/src/fxp.js":function(T,N,p){const k=p("./node_modules/fast-xml-parser/src/validator.js"),m=p("./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js"),E=p("./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js");T.exports={XMLParser:m,XMLValidator:k,XMLBuilder:E}},"./node_modules/fast-xml-parser/src/ignoreAttributes.js":function(T,N){function p(k){return typeof k=="function"?k:Array.isArray(k)?m=>{for(const E of k)if(typeof E=="string"&&m===E||E instanceof RegExp&&E.test(m))return!0}:()=>!1}T.exports=p},"./node_modules/fast-xml-parser/src/util.js":function(T,N,p){const k=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",m=k+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",E="["+k+"]["+m+"]*",w=new RegExp("^"+E+"$"),R=function(v,c){const C=[];let l=c.exec(v);for(;l;){const y=[];y.startIndex=c.lastIndex-l[0].length;const O=l.length;for(let I=0;I<O;I++)y.push(l[I]);C.push(y),l=c.exec(v)}return C},t=function(v){const c=w.exec(v);return!(c===null||typeof c>"u")};N.isExist=function(v){return typeof v<"u"},N.isEmptyObject=function(v){return Object.keys(v).length===0},N.merge=function(v,c,C){if(c){const l=Object.keys(c),y=l.length;for(let O=0;O<y;O++)C==="strict"?v[l[O]]=[c[l[O]]]:v[l[O]]=c[l[O]]}},N.getValue=function(v){return N.isExist(v)?v:""},N.isName=t,N.getAllMatches=R,N.nameRegexp=E},"./node_modules/fast-xml-parser/src/validator.js":function(T,N,p){const k=p("./node_modules/fast-xml-parser/src/util.js"),m={allowBooleanAttributes:!1,unpairedTags:[]};N.validate=function(g,d){d=Object.assign({},m,d);const B=[];let i=!1,n=!1;g[0]==="\uFEFF"&&(g=g.substr(1));for(let r=0;r<g.length;r++)if(g[r]==="<"&&g[r+1]==="?"){if(r+=2,r=w(g,r),r.err)return r}else if(g[r]==="<"){let s=r;if(r++,g[r]==="!"){r=R(g,r);continue}else{let a=!1;g[r]==="/"&&(a=!0,r++);let b="";for(;r<g.length&&g[r]!==">"&&g[r]!==" "&&g[r]!=="	"&&g[r]!==`
`&&g[r]!=="\r";r++)b+=g[r];if(b=b.trim(),b[b.length-1]==="/"&&(b=b.substring(0,b.length-1),r--),!F(b)){let $;return b.trim().length===0?$="Invalid space after '<'.":$="Tag '"+b+"' is an invalid name.",I("InvalidTag",$,q(g,r))}const M=c(g,r);if(M===!1)return I("InvalidAttr","Attributes for '"+b+"' have open quote.",q(g,r));let P=M.value;if(r=M.index,P[P.length-1]==="/"){const $=r-P.length;P=P.substring(0,P.length-1);const D=l(P,d);if(D===!0)i=!0;else return I(D.err.code,D.err.msg,q(g,$+D.err.line))}else if(a)if(M.tagClosed){if(P.trim().length>0)return I("InvalidTag","Closing tag '"+b+"' can't have attributes or invalid starting.",q(g,s));if(B.length===0)return I("InvalidTag","Closing tag '"+b+"' has not been opened.",q(g,s));{const $=B.pop();if(b!==$.tagName){let D=q(g,$.tagStartPos);return I("InvalidTag","Expected closing tag '"+$.tagName+"' (opened in line "+D.line+", col "+D.col+") instead of closing tag '"+b+"'.",q(g,s))}B.length==0&&(n=!0)}}else return I("InvalidTag","Closing tag '"+b+"' doesn't have proper closing.",q(g,r));else{const $=l(P,d);if($!==!0)return I($.err.code,$.err.msg,q(g,r-P.length+$.err.line));if(n===!0)return I("InvalidXml","Multiple possible root nodes found.",q(g,r));d.unpairedTags.indexOf(b)!==-1||B.push({tagName:b,tagStartPos:s}),i=!0}for(r++;r<g.length;r++)if(g[r]==="<")if(g[r+1]==="!"){r++,r=R(g,r);continue}else if(g[r+1]==="?"){if(r=w(g,++r),r.err)return r}else break;else if(g[r]==="&"){const $=O(g,r);if($==-1)return I("InvalidChar","char '&' is not expected.",q(g,r));r=$}else if(n===!0&&!E(g[r]))return I("InvalidXml","Extra text at the end",q(g,r));g[r]==="<"&&r--}}else{if(E(g[r]))continue;return I("InvalidChar","char '"+g[r]+"' is not expected.",q(g,r))}if(i){if(B.length==1)return I("InvalidTag","Unclosed tag '"+B[0].tagName+"'.",q(g,B[0].tagStartPos));if(B.length>0)return I("InvalidXml","Invalid '"+JSON.stringify(B.map(r=>r.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return I("InvalidXml","Start tag expected.",1);return!0};function E(g){return g===" "||g==="	"||g===`
`||g==="\r"}function w(g,d){const B=d;for(;d<g.length;d++)if(g[d]=="?"||g[d]==" "){const i=g.substr(B,d-B);if(d>5&&i==="xml")return I("InvalidXml","XML declaration allowed only at the start of the document.",q(g,d));if(g[d]=="?"&&g[d+1]==">"){d++;break}else continue}return d}function R(g,d){if(g.length>d+5&&g[d+1]==="-"&&g[d+2]==="-"){for(d+=3;d<g.length;d++)if(g[d]==="-"&&g[d+1]==="-"&&g[d+2]===">"){d+=2;break}}else if(g.length>d+8&&g[d+1]==="D"&&g[d+2]==="O"&&g[d+3]==="C"&&g[d+4]==="T"&&g[d+5]==="Y"&&g[d+6]==="P"&&g[d+7]==="E"){let B=1;for(d+=8;d<g.length;d++)if(g[d]==="<")B++;else if(g[d]===">"&&(B--,B===0))break}else if(g.length>d+9&&g[d+1]==="["&&g[d+2]==="C"&&g[d+3]==="D"&&g[d+4]==="A"&&g[d+5]==="T"&&g[d+6]==="A"&&g[d+7]==="["){for(d+=8;d<g.length;d++)if(g[d]==="]"&&g[d+1]==="]"&&g[d+2]===">"){d+=2;break}}return d}const t='"',v="'";function c(g,d){let B="",i="",n=!1;for(;d<g.length;d++){if(g[d]===t||g[d]===v)i===""?i=g[d]:i!==g[d]||(i="");else if(g[d]===">"&&i===""){n=!0;break}B+=g[d]}return i!==""?!1:{value:B,index:d,tagClosed:n}}const C=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function l(g,d){const B=k.getAllMatches(g,C),i={};for(let n=0;n<B.length;n++){if(B[n][1].length===0)return I("InvalidAttr","Attribute '"+B[n][2]+"' has no space in starting.",K(B[n]));if(B[n][3]!==void 0&&B[n][4]===void 0)return I("InvalidAttr","Attribute '"+B[n][2]+"' is without value.",K(B[n]));if(B[n][3]===void 0&&!d.allowBooleanAttributes)return I("InvalidAttr","boolean attribute '"+B[n][2]+"' is not allowed.",K(B[n]));const r=B[n][2];if(!U(r))return I("InvalidAttr","Attribute '"+r+"' is an invalid name.",K(B[n]));if(!i.hasOwnProperty(r))i[r]=1;else return I("InvalidAttr","Attribute '"+r+"' is repeated.",K(B[n]))}return!0}function y(g,d){let B=/\d/;for(g[d]==="x"&&(d++,B=/[\da-fA-F]/);d<g.length;d++){if(g[d]===";")return d;if(!g[d].match(B))break}return-1}function O(g,d){if(d++,g[d]===";")return-1;if(g[d]==="#")return d++,y(g,d);let B=0;for(;d<g.length;d++,B++)if(!(g[d].match(/\w/)&&B<20)){if(g[d]===";")break;return-1}return d}function I(g,d,B){return{err:{code:g,msg:d,line:B.line||B,col:B.col}}}function U(g){return k.isName(g)}function F(g){return k.isName(g)}function q(g,d){const B=g.substring(0,d).split(/\r?\n/);return{line:B.length,col:B[B.length-1].length+1}}function K(g){return g.startIndex+g[1].length}},"./node_modules/fast-xml-parser/src/xmlbuilder/json2xml.js":function(T,N,p){const k=p("./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js"),m=p("./node_modules/fast-xml-parser/src/ignoreAttributes.js"),E={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(c,C){return C},attributeValueProcessor:function(c,C){return C},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function w(c){this.options=Object.assign({},E,c),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=m(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=v),this.processTextOrObjNode=R,this.options.format?(this.indentate=t,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}w.prototype.build=function(c){return this.options.preserveOrder?k(c,this.options):(Array.isArray(c)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(c={[this.options.arrayNodeName]:c}),this.j2x(c,0,[]).val)},w.prototype.j2x=function(c,C,l){let y="",O="";const I=l.join(".");for(let U in c)if(Object.prototype.hasOwnProperty.call(c,U))if(typeof c[U]>"u")this.isAttribute(U)&&(O+="");else if(c[U]===null)this.isAttribute(U)?O+="":U[0]==="?"?O+=this.indentate(C)+"<"+U+"?"+this.tagEndChar:O+=this.indentate(C)+"<"+U+"/"+this.tagEndChar;else if(c[U]instanceof Date)O+=this.buildTextValNode(c[U],U,"",C);else if(typeof c[U]!="object"){const F=this.isAttribute(U);if(F&&!this.ignoreAttributesFn(F,I))y+=this.buildAttrPairStr(F,""+c[U]);else if(!F)if(U===this.options.textNodeName){let q=this.options.tagValueProcessor(U,""+c[U]);O+=this.replaceEntitiesValue(q)}else O+=this.buildTextValNode(c[U],U,"",C)}else if(Array.isArray(c[U])){const F=c[U].length;let q="",K="";for(let g=0;g<F;g++){const d=c[U][g];if(!(typeof d>"u"))if(d===null)U[0]==="?"?O+=this.indentate(C)+"<"+U+"?"+this.tagEndChar:O+=this.indentate(C)+"<"+U+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){const B=this.j2x(d,C+1,l.concat(U));q+=B.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(K+=B.attrStr)}else q+=this.processTextOrObjNode(d,U,C,l);else if(this.options.oneListGroup){let B=this.options.tagValueProcessor(U,d);B=this.replaceEntitiesValue(B),q+=B}else q+=this.buildTextValNode(d,U,"",C)}this.options.oneListGroup&&(q=this.buildObjectNode(q,U,K,C)),O+=q}else if(this.options.attributesGroupName&&U===this.options.attributesGroupName){const F=Object.keys(c[U]),q=F.length;for(let K=0;K<q;K++)y+=this.buildAttrPairStr(F[K],""+c[U][F[K]])}else O+=this.processTextOrObjNode(c[U],U,C,l);return{attrStr:y,val:O}},w.prototype.buildAttrPairStr=function(c,C){return C=this.options.attributeValueProcessor(c,""+C),C=this.replaceEntitiesValue(C),this.options.suppressBooleanAttributes&&C==="true"?" "+c:" "+c+'="'+C+'"'};function R(c,C,l,y){const O=this.j2x(c,l+1,y.concat(C));return c[this.options.textNodeName]!==void 0&&Object.keys(c).length===1?this.buildTextValNode(c[this.options.textNodeName],C,O.attrStr,l):this.buildObjectNode(O.val,C,O.attrStr,l)}w.prototype.buildObjectNode=function(c,C,l,y){if(c==="")return C[0]==="?"?this.indentate(y)+"<"+C+l+"?"+this.tagEndChar:this.indentate(y)+"<"+C+l+this.closeTag(C)+this.tagEndChar;{let O="</"+C+this.tagEndChar,I="";return C[0]==="?"&&(I="?",O=""),(l||l==="")&&c.indexOf("<")===-1?this.indentate(y)+"<"+C+l+I+">"+c+O:this.options.commentPropName!==!1&&C===this.options.commentPropName&&I.length===0?this.indentate(y)+`<!--${c}-->`+this.newLine:this.indentate(y)+"<"+C+l+I+this.tagEndChar+c+this.indentate(y)+O}},w.prototype.closeTag=function(c){let C="";return this.options.unpairedTags.indexOf(c)!==-1?this.options.suppressUnpairedNode||(C="/"):this.options.suppressEmptyNode?C="/":C=`></${c}`,C},w.prototype.buildTextValNode=function(c,C,l,y){if(this.options.cdataPropName!==!1&&C===this.options.cdataPropName)return this.indentate(y)+`<![CDATA[${c}]]>`+this.newLine;if(this.options.commentPropName!==!1&&C===this.options.commentPropName)return this.indentate(y)+`<!--${c}-->`+this.newLine;if(C[0]==="?")return this.indentate(y)+"<"+C+l+"?"+this.tagEndChar;{let O=this.options.tagValueProcessor(C,c);return O=this.replaceEntitiesValue(O),O===""?this.indentate(y)+"<"+C+l+this.closeTag(C)+this.tagEndChar:this.indentate(y)+"<"+C+l+">"+O+"</"+C+this.tagEndChar}},w.prototype.replaceEntitiesValue=function(c){if(c&&c.length>0&&this.options.processEntities)for(let C=0;C<this.options.entities.length;C++){const l=this.options.entities[C];c=c.replace(l.regex,l.val)}return c};function t(c){return this.options.indentBy.repeat(c)}function v(c){return c.startsWith(this.options.attributeNamePrefix)&&c!==this.options.textNodeName?c.substr(this.attrPrefixLen):!1}T.exports=w},"./node_modules/fast-xml-parser/src/xmlbuilder/orderedJs2Xml.js":function(T,N){const p=`
`;function k(v,c){let C="";return c.format&&c.indentBy.length>0&&(C=p),m(v,c,"",C)}function m(v,c,C,l){let y="",O=!1;for(let I=0;I<v.length;I++){const U=v[I],F=E(U);if(F===void 0)continue;let q="";if(C.length===0?q=F:q=`${C}.${F}`,F===c.textNodeName){let i=U[F];R(q,c)||(i=c.tagValueProcessor(F,i),i=t(i,c)),O&&(y+=l),y+=i,O=!1;continue}else if(F===c.cdataPropName){O&&(y+=l),y+=`<![CDATA[${U[F][0][c.textNodeName]}]]>`,O=!1;continue}else if(F===c.commentPropName){y+=l+`<!--${U[F][0][c.textNodeName]}-->`,O=!0;continue}else if(F[0]==="?"){const i=w(U[":@"],c),n=F==="?xml"?"":l;let r=U[F][0][c.textNodeName];r=r.length!==0?" "+r:"",y+=n+`<${F}${r}${i}?>`,O=!0;continue}let K=l;K!==""&&(K+=c.indentBy);const g=w(U[":@"],c),d=l+`<${F}${g}`,B=m(U[F],c,q,K);c.unpairedTags.indexOf(F)!==-1?c.suppressUnpairedNode?y+=d+">":y+=d+"/>":(!B||B.length===0)&&c.suppressEmptyNode?y+=d+"/>":B&&B.endsWith(">")?y+=d+`>${B}${l}</${F}>`:(y+=d+">",B&&l!==""&&(B.includes("/>")||B.includes("</"))?y+=l+c.indentBy+B+l:y+=B,y+=`</${F}>`),O=!0}return y}function E(v){const c=Object.keys(v);for(let C=0;C<c.length;C++){const l=c[C];if(v.hasOwnProperty(l)&&l!==":@")return l}}function w(v,c){let C="";if(v&&!c.ignoreAttributes)for(let l in v){if(!v.hasOwnProperty(l))continue;let y=c.attributeValueProcessor(l,v[l]);y=t(y,c),y===!0&&c.suppressBooleanAttributes?C+=` ${l.substr(c.attributeNamePrefix.length)}`:C+=` ${l.substr(c.attributeNamePrefix.length)}="${y}"`}return C}function R(v,c){v=v.substr(0,v.length-c.textNodeName.length-1);let C=v.substr(v.lastIndexOf(".")+1);for(let l in c.stopNodes)if(c.stopNodes[l]===v||c.stopNodes[l]==="*."+C)return!0;return!1}function t(v,c){if(v&&v.length>0&&c.processEntities)for(let C=0;C<c.entities.length;C++){const l=c.entities[C];v=v.replace(l.regex,l.val)}return v}T.exports=k},"./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js":function(T,N,p){const k=p("./node_modules/fast-xml-parser/src/util.js");function m(l,y){const O={};if(l[y+3]==="O"&&l[y+4]==="C"&&l[y+5]==="T"&&l[y+6]==="Y"&&l[y+7]==="P"&&l[y+8]==="E"){y=y+9;let I=1,U=!1,F=!1,q="";for(;y<l.length;y++)if(l[y]==="<"&&!F){if(U&&R(l,y))y+=7,[entityName,val,y]=E(l,y+1),val.indexOf("&")===-1&&(O[C(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(U&&t(l,y))y+=8;else if(U&&v(l,y))y+=8;else if(U&&c(l,y))y+=9;else if(w)F=!0;else throw new Error("Invalid DOCTYPE");I++,q=""}else if(l[y]===">"){if(F?l[y-1]==="-"&&l[y-2]==="-"&&(F=!1,I--):I--,I===0)break}else l[y]==="["?U=!0:q+=l[y];if(I!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:O,i:y}}function E(l,y){let O="";for(;y<l.length&&l[y]!=="'"&&l[y]!=='"';y++)O+=l[y];if(O=O.trim(),O.indexOf(" ")!==-1)throw new Error("External entites are not supported");const I=l[y++];let U="";for(;y<l.length&&l[y]!==I;y++)U+=l[y];return[O,U,y]}function w(l,y){return l[y+1]==="!"&&l[y+2]==="-"&&l[y+3]==="-"}function R(l,y){return l[y+1]==="!"&&l[y+2]==="E"&&l[y+3]==="N"&&l[y+4]==="T"&&l[y+5]==="I"&&l[y+6]==="T"&&l[y+7]==="Y"}function t(l,y){return l[y+1]==="!"&&l[y+2]==="E"&&l[y+3]==="L"&&l[y+4]==="E"&&l[y+5]==="M"&&l[y+6]==="E"&&l[y+7]==="N"&&l[y+8]==="T"}function v(l,y){return l[y+1]==="!"&&l[y+2]==="A"&&l[y+3]==="T"&&l[y+4]==="T"&&l[y+5]==="L"&&l[y+6]==="I"&&l[y+7]==="S"&&l[y+8]==="T"}function c(l,y){return l[y+1]==="!"&&l[y+2]==="N"&&l[y+3]==="O"&&l[y+4]==="T"&&l[y+5]==="A"&&l[y+6]==="T"&&l[y+7]==="I"&&l[y+8]==="O"&&l[y+9]==="N"}function C(l){if(k.isName(l))return l;throw new Error(`Invalid entity name ${l}`)}T.exports=m},"./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js":function(T,N){const p={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(m,E){return E},attributeValueProcessor:function(m,E){return E},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(m,E,w){return m}},k=function(m){return Object.assign({},p,m)};N.buildOptions=k,N.defaultOptions=p},"./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js":function(T,N,p){const k=p("./node_modules/fast-xml-parser/src/util.js"),m=p("./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js"),E=p("./node_modules/fast-xml-parser/src/xmlparser/DocTypeReader.js"),w=p("./node_modules/strnum/strnum.js"),R=p("./node_modules/fast-xml-parser/src/ignoreAttributes.js");class t{constructor(r){this.options=r,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(s,a)=>String.fromCharCode(Number.parseInt(a,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(s,a)=>String.fromCharCode(Number.parseInt(a,16))}},this.addExternalEntities=v,this.parseXml=O,this.parseTextData=c,this.resolveNameSpace=C,this.buildAttributesMap=y,this.isItStopNode=q,this.replaceEntitiesValue=U,this.readStopNodeData=B,this.saveTextToParentTag=F,this.addChild=I,this.ignoreAttributesFn=R(this.options.ignoreAttributes)}}function v(n){const r=Object.keys(n);for(let s=0;s<r.length;s++){const a=r[s];this.lastEntities[a]={regex:new RegExp("&"+a+";","g"),val:n[a]}}}function c(n,r,s,a,b,M,P){if(n!==void 0&&(this.options.trimValues&&!a&&(n=n.trim()),n.length>0)){P||(n=this.replaceEntitiesValue(n));const $=this.options.tagValueProcessor(r,n,s,b,M);return $==null?n:typeof $!=typeof n||$!==n?$:this.options.trimValues?i(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?i(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function C(n){if(this.options.removeNSPrefix){const r=n.split(":"),s=n.charAt(0)==="/"?"/":"";if(r[0]==="xmlns")return"";r.length===2&&(n=s+r[1])}return n}const l=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function y(n,r,s){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const a=k.getAllMatches(n,l),b=a.length,M={};for(let P=0;P<b;P++){const $=this.resolveNameSpace(a[P][1]);if(this.ignoreAttributesFn($,r))continue;let D=a[P][4],te=this.options.attributeNamePrefix+$;if($.length)if(this.options.transformAttributeName&&(te=this.options.transformAttributeName(te)),te==="__proto__"&&(te="#__proto__"),D!==void 0){this.options.trimValues&&(D=D.trim()),D=this.replaceEntitiesValue(D);const ne=this.options.attributeValueProcessor($,D,r);ne==null?M[te]=D:typeof ne!=typeof D||ne!==D?M[te]=ne:M[te]=i(D,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(M[te]=!0)}if(!Object.keys(M).length)return;if(this.options.attributesGroupName){const P={};return P[this.options.attributesGroupName]=M,P}return M}}const O=function(n){const r=new m("!xml");let s=r,a="",b="";for(let M=0;M<n.length;M++)if(n[M]==="<")if(n[M+1]==="/"){const $=g(n,">",M,"Closing Tag is not closed.");let D=n.substring(M+2,$).trim();if(this.options.removeNSPrefix){const ae=D.indexOf(":");ae!==-1&&(D=D.substr(ae+1))}this.options.transformTagName&&(D=this.options.transformTagName(D)),s&&(a=this.saveTextToParentTag(a,s,b));const te=b.substring(b.lastIndexOf(".")+1);if(D&&this.options.unpairedTags.indexOf(D)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${D}>`);let ne=0;te&&this.options.unpairedTags.indexOf(te)!==-1?(ne=b.lastIndexOf(".",b.lastIndexOf(".")-1),this.tagsNodeStack.pop()):ne=b.lastIndexOf("."),b=b.substring(0,ne),s=this.tagsNodeStack.pop(),a="",M=$}else if(n[M+1]==="?"){let $=d(n,M,!1,"?>");if(!$)throw new Error("Pi Tag is not closed.");if(a=this.saveTextToParentTag(a,s,b),!(this.options.ignoreDeclaration&&$.tagName==="?xml"||this.options.ignorePiTags)){const D=new m($.tagName);D.add(this.options.textNodeName,""),$.tagName!==$.tagExp&&$.attrExpPresent&&(D[":@"]=this.buildAttributesMap($.tagExp,b,$.tagName)),this.addChild(s,D,b)}M=$.closeIndex+1}else if(n.substr(M+1,3)==="!--"){const $=g(n,"-->",M+4,"Comment is not closed.");if(this.options.commentPropName){const D=n.substring(M+4,$-2);a=this.saveTextToParentTag(a,s,b),s.add(this.options.commentPropName,[{[this.options.textNodeName]:D}])}M=$}else if(n.substr(M+1,2)==="!D"){const $=E(n,M);this.docTypeEntities=$.entities,M=$.i}else if(n.substr(M+1,2)==="!["){const $=g(n,"]]>",M,"CDATA is not closed.")-2,D=n.substring(M+9,$);a=this.saveTextToParentTag(a,s,b);let te=this.parseTextData(D,s.tagname,b,!0,!1,!0,!0);te==null&&(te=""),this.options.cdataPropName?s.add(this.options.cdataPropName,[{[this.options.textNodeName]:D}]):s.add(this.options.textNodeName,te),M=$+2}else{let $=d(n,M,this.options.removeNSPrefix),D=$.tagName;const te=$.rawTagName;let ne=$.tagExp,ae=$.attrExpPresent,ue=$.closeIndex;this.options.transformTagName&&(D=this.options.transformTagName(D)),s&&a&&s.tagname!=="!xml"&&(a=this.saveTextToParentTag(a,s,b,!1));const Se=s;if(Se&&this.options.unpairedTags.indexOf(Se.tagname)!==-1&&(s=this.tagsNodeStack.pop(),b=b.substring(0,b.lastIndexOf("."))),D!==r.tagname&&(b+=b?"."+D:D),this.isItStopNode(this.options.stopNodes,b,D)){let ve="";if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1)D[D.length-1]==="/"?(D=D.substr(0,D.length-1),b=b.substr(0,b.length-1),ne=D):ne=ne.substr(0,ne.length-1),M=$.closeIndex;else if(this.options.unpairedTags.indexOf(D)!==-1)M=$.closeIndex;else{const ie=this.readStopNodeData(n,te,ue+1);if(!ie)throw new Error(`Unexpected end of ${te}`);M=ie.i,ve=ie.tagContent}const oe=new m(D);D!==ne&&ae&&(oe[":@"]=this.buildAttributesMap(ne,b,D)),ve&&(ve=this.parseTextData(ve,D,b,!0,ae,!0,!0)),b=b.substr(0,b.lastIndexOf(".")),oe.add(this.options.textNodeName,ve),this.addChild(s,oe,b)}else{if(ne.length>0&&ne.lastIndexOf("/")===ne.length-1){D[D.length-1]==="/"?(D=D.substr(0,D.length-1),b=b.substr(0,b.length-1),ne=D):ne=ne.substr(0,ne.length-1),this.options.transformTagName&&(D=this.options.transformTagName(D));const ve=new m(D);D!==ne&&ae&&(ve[":@"]=this.buildAttributesMap(ne,b,D)),this.addChild(s,ve,b),b=b.substr(0,b.lastIndexOf("."))}else{const ve=new m(D);this.tagsNodeStack.push(s),D!==ne&&ae&&(ve[":@"]=this.buildAttributesMap(ne,b,D)),this.addChild(s,ve,b),s=ve}a="",M=ue}}else a+=n[M];return r.child};function I(n,r,s){const a=this.options.updateTag(r.tagname,s,r[":@"]);a===!1||(typeof a=="string"&&(r.tagname=a),n.addChild(r))}const U=function(n){if(this.options.processEntities){for(let r in this.docTypeEntities){const s=this.docTypeEntities[r];n=n.replace(s.regx,s.val)}for(let r in this.lastEntities){const s=this.lastEntities[r];n=n.replace(s.regex,s.val)}if(this.options.htmlEntities)for(let r in this.htmlEntities){const s=this.htmlEntities[r];n=n.replace(s.regex,s.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function F(n,r,s,a){return n&&(a===void 0&&(a=Object.keys(r.child).length===0),n=this.parseTextData(n,r.tagname,s,!1,r[":@"]?Object.keys(r[":@"]).length!==0:!1,a),n!==void 0&&n!==""&&r.add(this.options.textNodeName,n),n=""),n}function q(n,r,s){const a="*."+s;for(const b in n){const M=n[b];if(a===M||r===M)return!0}return!1}function K(n,r,s=">"){let a,b="";for(let M=r;M<n.length;M++){let P=n[M];if(a)P===a&&(a="");else if(P==='"'||P==="'")a=P;else if(P===s[0])if(s[1]){if(n[M+1]===s[1])return{data:b,index:M}}else return{data:b,index:M};else P==="	"&&(P=" ");b+=P}}function g(n,r,s,a){const b=n.indexOf(r,s);if(b===-1)throw new Error(a);return b+r.length-1}function d(n,r,s,a=">"){const b=K(n,r+1,a);if(!b)return;let M=b.data;const P=b.index,$=M.search(/\s/);let D=M,te=!0;$!==-1&&(D=M.substring(0,$),M=M.substring($+1).trimStart());const ne=D;if(s){const ae=D.indexOf(":");ae!==-1&&(D=D.substr(ae+1),te=D!==b.data.substr(ae+1))}return{tagName:D,tagExp:M,closeIndex:P,attrExpPresent:te,rawTagName:ne}}function B(n,r,s){const a=s;let b=1;for(;s<n.length;s++)if(n[s]==="<")if(n[s+1]==="/"){const M=g(n,">",s,`${r} is not closed`);if(n.substring(s+2,M).trim()===r&&(b--,b===0))return{tagContent:n.substring(a,s),i:M};s=M}else if(n[s+1]==="?")s=g(n,"?>",s+1,"StopNode is not closed.");else if(n.substr(s+1,3)==="!--")s=g(n,"-->",s+3,"StopNode is not closed.");else if(n.substr(s+1,2)==="![")s=g(n,"]]>",s,"StopNode is not closed.")-2;else{const M=d(n,s,">");M&&((M&&M.tagName)===r&&M.tagExp[M.tagExp.length-1]!=="/"&&b++,s=M.closeIndex)}}function i(n,r,s){if(r&&typeof n=="string"){const a=n.trim();return a==="true"?!0:a==="false"?!1:w(n,s)}else return k.isExist(n)?n:""}T.exports=t},"./node_modules/fast-xml-parser/src/xmlparser/XMLParser.js":function(T,N,p){const{buildOptions:k}=p("./node_modules/fast-xml-parser/src/xmlparser/OptionsBuilder.js"),m=p("./node_modules/fast-xml-parser/src/xmlparser/OrderedObjParser.js"),{prettify:E}=p("./node_modules/fast-xml-parser/src/xmlparser/node2json.js"),w=p("./node_modules/fast-xml-parser/src/validator.js");class R{constructor(v){this.externalEntities={},this.options=k(v)}parse(v,c){if(typeof v!="string")if(v.toString)v=v.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(c){c===!0&&(c={});const y=w.validate(v,c);if(y!==!0)throw Error(`${y.err.msg}:${y.err.line}:${y.err.col}`)}const C=new m(this.options);C.addExternalEntities(this.externalEntities);const l=C.parseXml(v);return this.options.preserveOrder||l===void 0?l:E(l,this.options)}addEntity(v,c){if(c.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(v.indexOf("&")!==-1||v.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(c==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[v]=c}}T.exports=R},"./node_modules/fast-xml-parser/src/xmlparser/node2json.js":function(T,N,p){function k(t,v){return m(t,v)}function m(t,v,c){let C;const l={};for(let y=0;y<t.length;y++){const O=t[y],I=E(O);let U="";if(c===void 0?U=I:U=c+"."+I,I===v.textNodeName)C===void 0?C=O[I]:C+=""+O[I];else{if(I===void 0)continue;if(O[I]){let F=m(O[I],v,U);const q=R(F,v);O[":@"]?w(F,O[":@"],U,v):Object.keys(F).length===1&&F[v.textNodeName]!==void 0&&!v.alwaysCreateTextNode?F=F[v.textNodeName]:Object.keys(F).length===0&&(v.alwaysCreateTextNode?F[v.textNodeName]="":F=""),l[I]!==void 0&&l.hasOwnProperty(I)?(Array.isArray(l[I])||(l[I]=[l[I]]),l[I].push(F)):v.isArray(I,U,q)?l[I]=[F]:l[I]=F}}}return typeof C=="string"?C.length>0&&(l[v.textNodeName]=C):C!==void 0&&(l[v.textNodeName]=C),l}function E(t){const v=Object.keys(t);for(let c=0;c<v.length;c++){const C=v[c];if(C!==":@")return C}}function w(t,v,c,C){if(v){const l=Object.keys(v),y=l.length;for(let O=0;O<y;O++){const I=l[O];C.isArray(I,c+"."+I,!0,!0)?t[I]=[v[I]]:t[I]=v[I]}}}function R(t,v){const{textNodeName:c}=v,C=Object.keys(t).length;return!!(C===0||C===1&&(t[c]||typeof t[c]=="boolean"||t[c]===0))}N.prettify=k},"./node_modules/fast-xml-parser/src/xmlparser/xmlNode.js":function(T,N,p){class k{constructor(E){this.tagname=E,this.child=[],this[":@"]={}}add(E,w){E==="__proto__"&&(E="#__proto__"),this.child.push({[E]:w})}addChild(E){E.tagname==="__proto__"&&(E.tagname="#__proto__"),E[":@"]&&Object.keys(E[":@"]).length>0?this.child.push({[E.tagname]:E.child,":@":E[":@"]}):this.child.push({[E.tagname]:E.child})}}T.exports=k},"./node_modules/process/browser.js":function(T,N){var p=T.exports={},k,m;function E(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?k=setTimeout:k=E}catch{k=E}try{typeof clearTimeout=="function"?m=clearTimeout:m=w}catch{m=w}})();function R(F){if(k===setTimeout)return setTimeout(F,0);if((k===E||!k)&&setTimeout)return k=setTimeout,setTimeout(F,0);try{return k(F,0)}catch{try{return k.call(null,F,0)}catch{return k.call(this,F,0)}}}function t(F){if(m===clearTimeout)return clearTimeout(F);if((m===w||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(F);try{return m(F)}catch{try{return m.call(null,F)}catch{return m.call(this,F)}}}var v=[],c=!1,C,l=-1;function y(){!c||!C||(c=!1,C.length?v=C.concat(v):l=-1,v.length&&O())}function O(){if(!c){var F=R(y);c=!0;for(var q=v.length;q;){for(C=v,v=[];++l<q;)C&&C[l].run();l=-1,q=v.length}C=null,c=!1,t(F)}}p.nextTick=function(F){var q=new Array(arguments.length-1);if(arguments.length>1)for(var K=1;K<arguments.length;K++)q[K-1]=arguments[K];v.push(new I(F,q)),v.length===1&&!c&&R(O)};function I(F,q){this.fun=F,this.array=q}I.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={};function U(){}p.on=U,p.addListener=U,p.once=U,p.off=U,p.removeListener=U,p.removeAllListeners=U,p.emit=U,p.prependListener=U,p.prependOnceListener=U,p.listeners=function(F){return[]},p.binding=function(F){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(F){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},"./node_modules/strnum/strnum.js":function(T,N){const p=/^[-+]?0x[a-fA-F0-9]+$/,k=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,m={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function E(t,v={}){if(v=Object.assign({},m,v),!t||typeof t!="string")return t;let c=t.trim();if(v.skipLike!==void 0&&v.skipLike.test(c))return t;if(t==="0")return 0;if(v.hex&&p.test(c))return R(c,16);if(c.search(/[eE]/)!==-1){const C=c.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(C){if(v.leadingZeros)c=(C[1]||"")+C[3];else if(!(C[2]==="0"&&C[3][0]==="."))return t;return v.eNotation?Number(c):t}else return t}else{const C=k.exec(c);if(C){const l=C[1],y=C[2];let O=w(C[3]);if(!v.leadingZeros&&y.length>0&&l&&c[2]!==".")return t;if(!v.leadingZeros&&y.length>0&&!l&&c[1]!==".")return t;if(v.leadingZeros&&y===t)return 0;{const I=Number(c),U=""+I;return U.search(/[eE]/)!==-1?v.eNotation?I:t:c.indexOf(".")!==-1?U==="0"&&O===""||U===O||l&&U==="-"+O?I:t:y?O===U||l+O===U?I:t:c===U||c===l+U?I:t}}else return t}}function w(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}function R(t,v){if(parseInt)return parseInt(t,v);if(Number.parseInt)return Number.parseInt(t,v);if(window&&window.parseInt)return window.parseInt(t,v);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}T.exports=E},"./node_modules/webpack/buildin/amd-options.js":function(T,N){(function(p){T.exports=p}).call(this,{})},"./node_modules/webpack/buildin/module.js":function(T,N){T.exports=function(p){return p.webpackPolyfill||(p.deprecate=function(){},p.paths=[],p.children||(p.children=[]),Object.defineProperty(p,"loaded",{enumerable:!0,get:function(){return p.l}}),Object.defineProperty(p,"id",{enumerable:!0,get:function(){return p.i}}),p.webpackPolyfill=1),p}},"./package.json":function(T){T.exports=JSON.parse('{"name":"cos-js-sdk-v5","version":"1.10.1","description":"JavaScript SDK for [腾讯云对象存储](https://cloud.tencent.com/product/cos)","main":"dist/cos-js-sdk-v5.js","types":"index.d.ts","scripts":{"prettier":"prettier --write src demo/demo.js demo/CIDemos/*.js test/test.js server/sts.js lib/request.js index.d.ts","server":"node server/sts.js","dev":"cross-env NODE_ENV=development webpack -w --mode=development","build":"cross-env NODE_ENV=production webpack --mode=production","cos-auth.min.js":"uglifyjs ./demo/common/cos-auth.js -o ./demo/common/cos-auth.min.js -c -m","test":"jest --runInBand --coverage","postinstall":"node scripts/patch-check.js"},"repository":{"type":"git","url":"git+https://github.com/tencentyun/cos-js-sdk-v5.git"},"keywords":[],"author":"carsonxu","license":"ISC","bugs":{"url":"https://github.com/tencentyun/cos-js-sdk-v5/issues"},"homepage":"https://github.com/tencentyun/cos-js-sdk-v5#readme","dependencies":{"fast-xml-parser":"4.5.0"},"devDependencies":{"@babel/core":"7.17.9","@babel/plugin-transform-runtime":"7.18.10","@babel/preset-env":"7.16.11","babel-loader":"8.2.5","body-parser":"^1.18.3","cross-env":"^5.2.0","express":"^4.16.4","jest":"29.7.0","jest-environment-jsdom":"29.7.0","patch-package":"^8.0.0","prettier":"^3.0.1","qcloud-cos-sts":"^3.0.2","request":"^2.87.0","terser-webpack-plugin":"4.2.3","uglifyjs":"^2.4.11","webpack":"4.46.0","webpack-cli":"4.10.0"}}')},"./src/advance.js":function(T,N,p){var k=p("./node_modules/@babel/runtime/helpers/typeof.js"),m=p("./src/session.js"),E=p("./src/async.js"),w=p("./src/event.js").EventProxy,R=p("./src/util.js"),t=p("./src/tracker.js");function v(i,n){var r=this,s=new w,a=i.TaskId,b=i.Bucket,M=i.Region,P=i.Key,$=i.Body,D=i.ChunkSize||i.SliceSize||r.options.ChunkSize,te=i.AsyncLimit,ne=i.StorageClass,ae=i.ServerSideEncryption,ue,Se,ve=i.onHashProgress,oe=i.tracker;oe&&oe.setParams({chunkSize:D}),r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 分块上传开始")}),s.on("error",function(ie){if(r._isRunningTask(a))return i.UploadData.UploadId&&m.removeUsing(i.UploadData.UploadId),ie.UploadId=i.UploadData.UploadId||"",r.logger.error({cate:"RESULT",tag:"upload",msg:"[key=".concat(i.Key,"] 分块上传失败: ").concat(JSON.stringify(ie))}),n(ie)}),s.on("upload_complete",function(ie){var Q=R.extend({UploadId:i.UploadData.UploadId||""},ie);n(null,Q)}),s.on("upload_slice_complete",function(ie){var Q={};R.each(i.Headers,function(le,pe){var me=pe.toLowerCase();(me.indexOf("x-cos-meta-")===0||["pic-operations","x-cos-callback","x-cos-callback-var","x-cos-return-body"].includes(me))&&(Q[pe]=le)}),r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 开始完成分块请求")}),I.call(r,{Bucket:b,Region:M,Key:P,UploadId:ie.UploadId,SliceList:ie.SliceList,Headers:Q,tracker:oe},function(le,pe){if(r._isRunningTask(a)){if(m.removeUsing(ie.UploadId),le)return Se(null,!0),r.logger.error({cate:"RESULT",tag:"upload",msg:"[key=".concat(i.Key,"] 完成分块请求失败")}),s.emit("error",le);m.removeUploadId.call(r,ie.UploadId),Se({loaded:ue,total:ue},!0),r.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(i.Key,"] 完成分块请求成功")}),s.emit("upload_complete",pe)}})}),s.on("get_upload_data_finish",function(ie){var Q=m.getFileId($,i.ChunkSize,b,P);Q&&m.saveUploadId.call(r,Q,ie.UploadId,r.options.UploadIdCacheLimit),m.setUsing(ie.UploadId),Se(null,!0),r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 开始上传各个分块")}),y.call(r,{TaskId:a,Bucket:b,Region:M,Key:P,Body:$,FileSize:ue,SliceSize:D,AsyncLimit:te,ServerSideEncryption:ae,UploadData:ie,Headers:i.Headers,onProgress:Se,tracker:oe},function(le,pe){if(r._isRunningTask(a)){if(le)return Se(null,!0),r.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 分块上传失败")}),s.emit("error",le);r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 所有分块上传完成")}),s.emit("upload_slice_complete",pe)}})}),s.on("get_file_size_finish",function(){if(Se=R.throttleOnProgress.call(r,ue,i.onProgress),i.UploadData.UploadId)r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 已经获取到 uploadId, ").concat(i.UploadData.UploadId)}),s.emit("get_upload_data_finish",i.UploadData);else{var ie=R.extend({TaskId:a,Bucket:b,Region:M,Key:P,Headers:i.Headers,StorageClass:ne,Body:$,FileSize:ue,SliceSize:D,onHashProgress:ve,tracker:oe},i);r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 去获取 uploadId")}),c.call(r,ie,function(Q,le){if(r._isRunningTask(a)){if(Q)return s.emit("error",Q);i.UploadData.UploadId=le.UploadId,i.UploadData.PartList=le.PartList,r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 获取到 uploadId, ").concat(i.UploadData.UploadId)}),s.emit("get_upload_data_finish",i.UploadData)}})}}),ue=i.ContentLength,delete i.ContentLength,!i.Headers&&(i.Headers={}),R.each(i.Headers,function(ie,Q){Q.toLowerCase()==="content-length"&&delete i.Headers[Q]}),function(){for(var ie=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],Q=1024*1024,le=0;le<ie.length&&(Q=ie[le]*1024*1024,!(ue/Q<=r.options.MaxPartNumber));le++);i.ChunkSize=i.SliceSize=D=Math.max(D,Q)}(),ue===0?(i.Body="",i.ContentLength=0,i.SkipTask=!0,r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 文件大小为 0，执行简单上传")}),r.putObject(i,n)):s.emit("get_file_size_finish")}function c(i,n){var r=i.TaskId,s=i.Bucket,a=i.Region,b=i.Key,M=i.StorageClass,P=this,$={},D=i.FileSize,te=i.SliceSize,ne=Math.ceil(D/te),ae=0,ue=R.throttleOnProgress.call(P,D,i.onHashProgress),Se=function(Q,le){var pe=te*(Q-1),me=Math.min(pe+te,D),de=me-pe;$[Q]?le(null,{PartNumber:Q,ETag:$[Q],Size:de}):R.fileSlice(i.Body,pe,me,!1,function(ce){R.getFileMd5(ce,function(W,Y){if(W)return le(R.error(W));var Z='"'+Y+'"';$[Q]=Z,ae+=de,ue({loaded:ae,total:D}),le(null,{PartNumber:Q,ETag:Z,Size:de})})})},ve=function(Q,le){var pe=Q.length;if(pe===0)return le(null,!0);if(pe>ne)return le(null,!1);if(pe>1){var me=Math.max(Q[0].Size,Q[1].Size);if(me!==te)return le(null,!1)}var de=function(W){if(W<pe){var Y=Q[W];Se(Y.PartNumber,function(Z,be){be&&be.ETag===Y.ETag&&be.Size===Y.Size?de(W+1):le(null,!1)})}else le(null,!0)};de(0)},oe=new w;oe.on("error",function(ie){if(P._isRunningTask(r))return n(ie)}),oe.on("upload_id_available",function(ie){var Q={},le=[];R.each(ie.PartList,function(de){Q[de.PartNumber]=de});for(var pe=1;pe<=ne;pe++){var me=Q[pe];me?(me.PartNumber=pe,me.Uploaded=!0):me={PartNumber:pe,ETag:null,Uploaded:!1},le.push(me)}ie.PartList=le,n(null,ie)}),oe.on("no_available_upload_id",function(){if(P._isRunningTask(r)){var ie=R.extend({Bucket:s,Region:a,Key:b,Query:R.clone(i.Query),StorageClass:M,Body:i.Body,calledBySdk:"sliceUploadFile",tracker:i.tracker},i),Q=R.clone(i.Headers);delete Q["x-cos-mime-limit"],ie.Headers=Q,P.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 准备初始化分块上传")}),P.multipartInit(ie,function(le,pe){if(P._isRunningTask(r)){if(le)return P.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 初始化分块上传失败, ").concat(JSON.stringify(le))}),oe.emit("error",le);var me=pe.UploadId;if(!me)return n(R.error(new Error("no such upload id")));P.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 初始化分块上传成功")}),oe.emit("upload_id_available",{UploadId:me,PartList:[]})}})}}),oe.on("has_and_check_upload_id",function(ie){ie=ie.reverse(),E.eachLimit(ie,1,function(Q,le){if(P._isRunningTask(r)){if(m.using[Q]){le();return}l.call(P,{Bucket:s,Region:a,Key:b,UploadId:Q,tracker:i.tracker},function(pe,me){if(P._isRunningTask(r)){if(pe)return m.removeUsing(Q),oe.emit("error",pe);var de=me.PartList;de.forEach(function(ce){ce.PartNumber*=1,ce.Size*=1,ce.ETag=ce.ETag||""}),ve(de,function(ce,W){if(P._isRunningTask(r)){if(ce)return oe.emit("error",ce);W?le({UploadId:Q,PartList:de}):le()}})}})}},function(Q){P._isRunningTask(r)&&(ue(null,!0),Q&&Q.UploadId?oe.emit("upload_id_available",Q):oe.emit("no_available_upload_id"))})}),oe.on("seek_local_avail_upload_id",function(ie){var Q=m.getFileId(i.Body,i.ChunkSize,s,b),le=m.getUploadIdList.call(P,Q);if(!Q||!le){oe.emit("has_and_check_upload_id",ie);return}var pe=function(de){if(de>=le.length){oe.emit("has_and_check_upload_id",ie);return}var ce=le[de];if(!R.isInArray(ie,ce)){m.removeUploadId.call(P,ce),pe(de+1);return}if(m.using[ce]){pe(de+1);return}l.call(P,{Bucket:s,Region:a,Key:b,UploadId:ce,tracker:i.tracker},function(W,Y){P._isRunningTask(r)&&(W?(m.removeUploadId.call(P,ce),pe(de+1)):oe.emit("upload_id_available",{UploadId:ce,PartList:Y.PartList}))})};pe(0)}),oe.on("get_remote_upload_id_list",function(){C.call(P,{Bucket:s,Region:a,Key:b,tracker:i.tracker},function(ie,Q){if(P._isRunningTask(r)){if(ie)return oe.emit("error",ie);var le=R.filter(Q.UploadList,function(de){return de.Key===b&&(!M||de.StorageClass.toUpperCase()===M.toUpperCase())}).reverse().map(function(de){return de.UploadId||de.UploadID});if(le.length)oe.emit("seek_local_avail_upload_id",le);else{var pe=m.getFileId(i.Body,i.ChunkSize,s,b),me;pe&&(me=m.getUploadIdList.call(P,pe))&&R.each(me,function(de){m.removeUploadId.call(P,de)}),oe.emit("no_available_upload_id")}}})}),oe.emit("get_remote_upload_id_list")}function C(i,n){var r=this,s=[],a={Bucket:i.Bucket,Region:i.Region,Prefix:i.Key,calledBySdk:i.calledBySdk||"sliceUploadFile",tracker:i.tracker},b=function(){r.multipartList(a,function(P,$){if(P)return n(P);s.push.apply(s,$.Upload||[]),$.IsTruncated==="true"?(a.KeyMarker=$.NextKeyMarker,a.UploadIdMarker=$.NextUploadIdMarker,b()):n(null,{UploadList:s})})};b()}function l(i,n){var r=this,s=[],a={Bucket:i.Bucket,Region:i.Region,Key:i.Key,UploadId:i.UploadId,calledBySdk:"sliceUploadFile",tracker:i.tracker},b=function(){r.multipartListPart(a,function(P,$){if(P)return n(P);s.push.apply(s,$.Part||[]),$.IsTruncated==="true"?(a.PartNumberMarker=$.NextPartNumberMarker,b()):n(null,{PartList:s})})};b()}function y(i,n){var r=this,s=i.TaskId,a=i.Bucket,b=i.Region,M=i.Key,P=i.UploadData,$=i.FileSize,D=i.SliceSize,te=Math.min(i.AsyncLimit||r.options.ChunkParallelLimit||1,256),ne=i.Body,ae=Math.ceil($/D),ue=0,Se=i.ServerSideEncryption,ve=i.Headers,oe=R.filter(P.PartList,function(Q){return Q.Uploaded&&(ue+=Q.PartNumber>=ae&&$%D||D),!Q.Uploaded}),ie=i.onProgress;r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 开始并发上传各个分块")}),E.eachLimit(oe,te,function(Q,le){if(r._isRunningTask(s)){var pe=Q.PartNumber,me=Math.min($,Q.PartNumber*D)-(Q.PartNumber-1)*D,de=0;r.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 分块").concat(pe,"开始上传")}),O.call(r,{TaskId:s,Bucket:a,Region:b,Key:M,SliceSize:D,FileSize:$,PartNumber:pe,ServerSideEncryption:Se,Body:ne,UploadData:P,Headers:ve,onProgress:function(W){ue+=W.loaded-de,de=W.loaded,ie({loaded:ue,total:$})},tracker:i.tracker},function(ce,W){r._isRunningTask(s)&&(!ce&&!W.ETag&&(ce='get ETag error, please add "ETag" to CORS ExposeHeader setting.( 获取ETag失败，请在CORS ExposeHeader设置中添加ETag，请参考文档：https://cloud.tencent.com/document/product/436/13318 )',r.logger.error({cate:"PROCESS",tag:"upload",msg:"[key=".concat(i.Key,"] 分块").concat(pe,"上传请求成功，但是未获取到 eTag")})),ce?(ue-=de,r.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(i.Key,"] 分块").concat(pe,"上传失败")})):(ue+=me-de,Q.ETag=W.ETag),r.logger.info({cate:"RESULT",tag:"upload",msg:"[key=".concat(i.Key,"] 分块").concat(pe,"上传成功")}),ie({loaded:ue,total:$}),le(ce||null,W))})}},function(Q){if(r._isRunningTask(s)){if(Q)return n(Q);n(null,{UploadId:P.UploadId,SliceList:P.PartList})}})}function O(i,n){var r=this,s=i.TaskId,a=i.Bucket,b=i.Region,M=i.Key,P=i.FileSize,$=i.Body,D=i.PartNumber*1,te=i.SliceSize,ne=i.ServerSideEncryption,ae=i.UploadData,ue=i.Headers||{},Se=r.options.ChunkRetryTimes+1,ve=te*(D-1),oe=te,ie=ve+te;ie>P&&(ie=P,oe=ie-ve);var Q=["x-cos-traffic-limit","x-cos-mime-limit"],le={};R.each(ue,function(me,de){Q.indexOf(de)>-1&&(le[de]=me)});var pe=ae.PartList[D-1];E.retry(Se,function(me){r._isRunningTask(s)&&R.fileSlice($,ve,ie,!0,function(de){r.multipartUpload({TaskId:s,Bucket:a,Region:b,Key:M,ContentLength:oe,PartNumber:D,UploadId:ae.UploadId,ServerSideEncryption:ne,Body:de,Headers:le,onProgress:i.onProgress,calledBySdk:"sliceUploadFile",tracker:i.tracker},function(ce,W){if(r._isRunningTask(s))return ce?me(ce):(pe.Uploaded=!0,me(null,W))})})},function(me,de){if(r._isRunningTask(s))return n(me,de)})}function I(i,n){var r=i.Bucket,s=i.Region,a=i.Key,b=i.UploadId,M=i.SliceList,P=this,$=this.options.ChunkRetryTimes+1,D=i.Headers,te=M.map(function(ne){return{PartNumber:ne.PartNumber,ETag:ne.ETag}});E.retry($,function(ne){P.multipartComplete({Bucket:r,Region:s,Key:a,UploadId:b,Parts:te,Headers:D,calledBySdk:"sliceUploadFile",tracker:i.tracker},ne)},function(ne,ae){n(ne,ae)})}function U(i,n){var r=i.Bucket,s=i.Region,a=i.Key,b=i.UploadId,M=i.Level||"task",P=i.AsyncLimit,$=this,D=new w;if(D.on("error",function(te){return n(te)}),D.on("get_abort_array",function(te){F.call($,{Bucket:r,Region:s,Key:a,Headers:i.Headers,AsyncLimit:P,AbortArray:te},n)}),M==="bucket")C.call($,{Bucket:r,Region:s,calledBySdk:"abortUploadTask"},function(te,ne){if(te)return n(te);D.emit("get_abort_array",ne.UploadList||[])});else if(M==="file"){if(!a)return n(R.error(new Error("abort_upload_task_no_key")));C.call($,{Bucket:r,Region:s,Key:a,calledBySdk:"abortUploadTask"},function(te,ne){if(te)return n(te);D.emit("get_abort_array",ne.UploadList||[])})}else if(M==="task"){if(!b)return n(R.error(new Error("abort_upload_task_no_id")));if(!a)return n(R.error(new Error("abort_upload_task_no_key")));D.emit("get_abort_array",[{Key:a,UploadId:b}])}else return n(R.error(new Error("abort_unknown_level")))}function F(i,n){var r=i.Bucket,s=i.Region,a=i.Key,b=i.AbortArray,M=i.AsyncLimit||1,P=this,$=0,D=new Array(b.length);E.eachLimit(b,M,function(te,ne){var ae=$;if(a&&a!==te.Key){D[ae]={error:{KeyNotMatch:!0}},ne(null);return}var ue=te.UploadId||te.UploadID;P.multipartAbort({Bucket:r,Region:s,Key:te.Key,Headers:i.Headers,UploadId:ue},function(Se){var ve={Bucket:r,Region:s,Key:te.Key,UploadId:ue};D[ae]={error:Se,task:ve},ne(null)}),$++},function(te){if(te)return n(te);for(var ne=[],ae=[],ue=0,Se=D.length;ue<Se;ue++){var ve=D[ue];ve.task&&(ve.error?ae.push(ve.task):ne.push(ve.task))}return n(null,{successList:ne,errorList:ae})})}function q(i,n){var r=this,s=i.SliceSize===void 0?r.options.SliceSize:i.SliceSize,a=[],b=i.Body,M=b.size||b.length||0,P={TaskId:""};if(r.options.EnableReporter){var $=r.options.UseAccelerate||typeof r.options.Domain=="string"&&r.options.Domain.includes("accelerate."),D=M>s?"sliceUploadFile":"putObject";i.tracker=new t({Beacon:r.options.BeaconReporter,clsReporter:r.options.ClsReporter,bucket:i.Bucket,region:i.Region,apiName:"uploadFile",realApi:D,fileKey:i.Key,fileSize:M,accelerate:$,deepTracker:r.options.DeepTracker,customId:r.options.CustomId,delay:r.options.TrackerDelay})}R.each(i,function(ve,oe){k(ve)!=="object"&&typeof ve!="function"&&(P[oe]=ve)});var te=i.onTaskReady,ne=function(oe){P.TaskId=oe,te&&te(oe)};i.onTaskReady=ne;var ae=M>s?"sliceUploadFile":"putObject",ue=i.onFileFinish,Se=function(oe,ie){i.tracker&&i.tracker.report(oe,ie),ue&&ue(oe,ie,P),n&&n(oe,ie)};a.push({api:ae,params:i,callback:Se}),r._addTasks(a)}function K(i,n){var r=this,s=i.SliceSize===void 0?r.options.SliceSize:i.SliceSize,a=0,b=0,M=R.throttleOnProgress.call(r,b,i.onProgress),P=i.files.length,$=i.onFileFinish,D=Array(P),te=function(ue,Se,ve){M(null,!0),$&&$(ue,Se,ve),D[ve.Index]={options:ve,error:ue,data:Se},--P<=0&&n&&n(null,{files:D})},ne=[];R.each(i.files,function(ae,ue){(function(){var Se=ae.Body,ve=Se.size||Se.length||0,oe={Index:ue,TaskId:""};if(!r.options.UseRawKey&&ae.Key&&ae.Key.substr(0,1)==="/"&&(ae.Key=ae.Key.substr(1)),a+=ve,r.options.EnableReporter){var ie=r.options.UseAccelerate||typeof r.options.Domain=="string"&&r.options.Domain.includes("accelerate."),Q=ve>s?"sliceUploadFile":"putObject";ae.tracker=new t({Beacon:r.options.BeaconReporter,clsReporter:r.options.ClsReporter,bucket:ae.Bucket,region:ae.Region,apiName:"uploadFiles",realApi:Q,fileKey:ae.Key,fileSize:ve,accelerate:ie,deepTracker:r.options.DeepTracker,customId:r.options.CustomId,delay:r.options.TrackerDelay})}R.each(ae,function(be,he){k(be)!=="object"&&typeof be!="function"&&(oe[he]=be)});var le=ae.onTaskReady,pe=function(he){oe.TaskId=he,le&&le(he)};ae.onTaskReady=pe;var me=0,de=ae.onProgress,ce=function(he){b=b-me+he.loaded,me=he.loaded,de&&de(he),M({loaded:b,total:a})};ae.onProgress=ce;var W=ve>s?"sliceUploadFile":"putObject",Y=ae.onFileFinish,Z=function(he,Te){ae.tracker&&ae.tracker.report(he,Te),Y&&Y(he,Te),te&&te(he,Te,oe)};ne.push({api:W,params:ae,callback:Z})})()}),r._addTasks(ne)}function g(i,n){var r=new w,s=this,a=i.Bucket,b=i.Region,M=i.Key,P=i.CopySource,$=R.getSourceParams.call(this,P);if(!$){n(R.error(new Error("CopySource format error")));return}var D=$.Bucket,te=$.Region,ne=decodeURIComponent($.Key),ae=i.CopySliceSize===void 0?s.options.CopySliceSize:i.CopySliceSize;ae=Math.max(0,ae);var ue=i.CopyChunkSize||this.options.CopyChunkSize,Se=this.options.CopyChunkParallelLimit,ve=this.options.ChunkRetryTimes+1,oe=0,ie=0,Q,le,pe={},me={},de={};r.on("copy_slice_complete",function(ce){R.each(i.Headers,function(Y,Z){Z.toLowerCase().indexOf("x-cos-meta-")});var W=R.map(ce.PartList,function(Y){return{PartNumber:Y.PartNumber,ETag:Y.ETag}});E.retry(ve,function(Y){s.multipartComplete({Bucket:a,Region:b,Key:M,UploadId:ce.UploadId,Parts:W,tracker:i.tracker,calledBySdk:"sliceCopyFile"},Y)},function(Y,Z){if(m.removeUsing(ce.UploadId),Y)return le(null,!0),n(Y);m.removeUploadId(ce.UploadId),le({loaded:Q,total:Q},!0),n(null,Z)})}),r.on("get_copy_data_finish",function(ce){var W=m.getCopyFileId(P,pe,ue,a,M);W&&m.saveUploadId(W,ce.UploadId,s.options.UploadIdCacheLimit),m.setUsing(ce.UploadId);var Y=R.filter(ce.PartList,function(Z){return Z.Uploaded&&(ie+=Z.PartNumber>=oe&&Q%ue||ue),!Z.Uploaded});E.eachLimit(Y,Se,function(Z,be){var he=Z.PartNumber,Te=Z.CopySourceRange,Me=Z.end-Z.start;E.retry(ve,function(Le){d.call(s,{Bucket:a,Region:b,Key:M,CopySource:P,UploadId:ce.UploadId,PartNumber:he,CopySourceRange:Te,tracker:i.tracker,calledBySdk:"sliceCopyFile"},Le)},function(Le,Ve){if(Le)return be(Le);ie+=Me,le({loaded:ie,total:Q}),Z.ETag=Ve.ETag,be(Le||null,Ve)})},function(Z){if(Z)return m.removeUsing(ce.UploadId),le(null,!0),n(Z);r.emit("copy_slice_complete",ce)})}),r.on("get_chunk_size_finish",function(){var ce=function(){s.multipartInit({Bucket:a,Region:b,Key:M,Headers:de,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(he,Te){if(he)return n(he);i.UploadId=Te.UploadId,r.emit("get_copy_data_finish",{UploadId:i.UploadId,PartList:i.PartList})})},W=m.getCopyFileId(P,pe,ue,a,M),Y=m.getUploadIdList(W);if(!W||!Y)return ce();var Z=function(he){if(he>=Y.length)return ce();var Te=Y[he];if(m.using[Te])return Z(he+1);l.call(s,{Bucket:a,Region:b,Key:M,UploadId:Te,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(Me,Le){if(Me)m.removeUploadId(Te),Z(he+1);else{if(m.using[Te])return Z(he+1);var Ve={},ut=0;R.each(Le.PartList,function(Je){var it=parseInt(Je.Size),bt=ut+it-1;Ve[Je.PartNumber+"|"+ut+"|"+bt]=Je.ETag,ut+=it}),R.each(i.PartList,function(Je){var it=Ve[Je.PartNumber+"|"+Je.start+"|"+Je.end];it&&(Je.ETag=it,Je.Uploaded=!0)}),r.emit("get_copy_data_finish",{UploadId:Te,PartList:i.PartList})}})};Z(0)}),r.on("get_file_size_finish",function(){if(function(){for(var W=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,5120],Y=1024*1024,Z=0;Z<W.length&&(Y=W[Z]*1024*1024,!(Q/Y<=s.options.MaxPartNumber));Z++);i.ChunkSize=ue=Math.max(ue,Y),oe=Math.ceil(Q/ue);for(var be=[],he=1;he<=oe;he++){var Te=(he-1)*ue,Me=he*ue<Q?he*ue-1:Q-1,Le={PartNumber:he,start:Te,end:Me,CopySourceRange:"bytes="+Te+"-"+Me};be.push(Le)}i.PartList=be}(),i.Headers["x-cos-metadata-directive"]==="Replaced"?de=i.Headers:de=me,de["x-cos-storage-class"]=i.Headers["x-cos-storage-class"]||me["x-cos-storage-class"],de=R.clearKey(de),me["x-cos-storage-class"]==="ARCHIVE"||me["x-cos-storage-class"]==="DEEP_ARCHIVE"){var ce=me["x-cos-restore"];if(!ce||ce==='ongoing-request="true"'){n(R.error(new Error("Unrestored archive object is not allowed to be copied")));return}}delete de["x-cos-copy-source"],delete de["x-cos-metadata-directive"],delete de["x-cos-copy-source-If-Modified-Since"],delete de["x-cos-copy-source-If-Unmodified-Since"],delete de["x-cos-copy-source-If-Match"],delete de["x-cos-copy-source-If-None-Match"],r.emit("get_chunk_size_finish")}),s.headObject({Bucket:D,Region:te,Key:ne,tracker:i.tracker,calledBySdk:"sliceCopyFile"},function(ce,W){if(ce){ce.statusCode&&ce.statusCode===404?n(R.error(ce,{ErrorStatus:ne+" Not Exist"})):n(ce);return}if(Q=i.FileSize=W.headers["content-length"],Q===void 0||!Q){n(R.error(new Error('get Content-Length error, please add "Content-Length" to CORS ExposeHeader setting.（ 获取Content-Length失败，请在CORS ExposeHeader设置中添加Content-Length，请参考文档：https://cloud.tencent.com/document/product/436/13318 ）')));return}if(i.tracker&&i.tracker.setParams({httpSize:Q}),le=R.throttleOnProgress.call(s,Q,i.onProgress),Q<=ae)i.Headers["x-cos-metadata-directive"]||(i.Headers["x-cos-metadata-directive"]="Copy"),s.putObjectCopy(Object.assign(i,{calledBySdk:"sliceCopyFile"}),function(Z,be){if(Z)return le(null,!0),n(Z);le({loaded:Q,total:Q},!0),n(Z,be)});else{var Y=W.headers;pe=Y,me={"Cache-Control":Y["cache-control"],"Content-Disposition":Y["content-disposition"],"Content-Encoding":Y["content-encoding"],"Content-Type":Y["content-type"],Expires:Y.expires,"x-cos-storage-class":Y["x-cos-storage-class"]},R.each(Y,function(Z,be){var he="x-cos-meta-";be.indexOf(he)===0&&be.length>he.length&&(me[be]=Z)}),r.emit("get_file_size_finish")}})}function d(i,n){var r=i.TaskId,s=i.Bucket,a=i.Region,b=i.Key,M=i.CopySource,P=i.UploadId,$=i.PartNumber*1,D=i.CopySourceRange,te=this.options.ChunkRetryTimes+1,ne=this;E.retry(te,function(ae){ne.uploadPartCopy({TaskId:r,Bucket:s,Region:a,Key:b,CopySource:M,UploadId:P,PartNumber:$,CopySourceRange:D,tracker:i.tracker,calledBySdk:i.calledBySdk},function(ue,Se){ae(ue||null,Se)})},function(ae,ue){return n(ae,ue)})}var B={sliceUploadFile:v,abortUploadTask:U,uploadFile:q,uploadFiles:K,sliceCopyFile:g};T.exports.init=function(i,n){n.transferToTaskMethod(B,"sliceUploadFile"),R.each(B,function(r,s){i.prototype[s]=R.apiWrapper(s,r)})}},"./src/async.js":function(T,N){var p=function(w,R,t,v){if(v=v||function(){},!w.length||R<=0)return v();var c=0,C=0,l=0;(function y(){if(c>=w.length)return v();for(;l<R&&C<w.length;)C+=1,l+=1,t(w[C-1],function(O){O?(v(O),v=function(){}):(c+=1,l-=1,c>=w.length?v():y())})})()},k=function(w,R,t){var v=function(C){R(function(l,y){l&&C<w?v(C+1):t(l,y)})};w<1?t():v(1)},m={eachLimit:p,retry:k};T.exports=m},"./src/base.js":function(T,N,p){var k=p("./node_modules/@babel/runtime/helpers/defineProperty.js"),m=p("./node_modules/@babel/runtime/helpers/typeof.js");function E(e,f){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);f&&(u=u.filter(function(S){return Object.getOwnPropertyDescriptor(e,S).enumerable})),o.push.apply(o,u)}return o}function w(e){for(var f=1;f<arguments.length;f++){var o=arguments[f]!=null?arguments[f]:{};f%2?E(Object(o),!0).forEach(function(u){k(e,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):E(Object(o)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(o,u))})}return e}var R=p("./lib/request.js"),t=p("./src/util.js");function v(e,f){var o=this.options.Protocol||(t.isBrowser&&(typeof location>"u"?"undefined":m(location))==="object"&&location.protocol==="http:"?"http:":"https:"),u=this.options.ServiceDomain,S=e.AppId||this.options.appId,x=e.Region;u?(u=u.replace(/\{\{AppId\}\}/gi,S||"").replace(/\{\{Region\}\}/gi,x||"").replace(/\{\{.*?\}\}/gi,""),/^[a-zA-Z]+:\/\//.test(u)||(u=o+"//"+u),u.slice(-1)==="/"&&(u=u.slice(0,-1))):x?u=o+"//cos."+x+".myqcloud.com":u=o+"//service.cos.myqcloud.com";var A="",_=x?"cos."+x+".myqcloud.com":"service.cos.myqcloud.com",G=u.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");_===G&&(A=_),se.call(this,{Action:"name/cos:GetService",url:u,method:"GET",headers:e.Headers,SignHost:A,tracker:e.tracker},function(ye,ge){if(ye)return f(ye);var we=ge&&ge.ListAllMyBucketsResult&&ge.ListAllMyBucketsResult.Buckets&&ge.ListAllMyBucketsResult.Buckets.Bucket||[];we=t.isArray(we)?we:[we];var ee=ge&&ge.ListAllMyBucketsResult&&ge.ListAllMyBucketsResult.Owner||{};f(null,{Buckets:we,Owner:ee,statusCode:ge.statusCode,headers:ge.headers})})}function c(e,f){var o=this,u="";if(e.BucketAZConfig){var S={BucketAZConfig:e.BucketAZConfig};u=t.json2xml({CreateBucketConfiguration:S})}se.call(this,{Action:"name/cos:PutBucket",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,body:u,tracker:e.tracker},function(x,A){if(x)return f(x);var _=et({protocol:o.options.Protocol,domain:o.options.Domain,bucket:e.Bucket,region:e.Region,isLocation:!0});f(null,{Location:_,statusCode:A.statusCode,headers:A.headers})})}function C(e,f){se.call(this,{Action:"name/cos:HeadBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"HEAD",tracker:e.tracker},f)}function l(e,f){var o={};o.prefix=e.Prefix||"",o.delimiter=e.Delimiter,o.marker=e.Marker,o["max-keys"]=e.MaxKeys,o["encoding-type"]=e.EncodingType,se.call(this,{Action:"name/cos:GetBucket",ResourceKey:o.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:o,tracker:e.tracker},function(u,S){if(u)return f(u);var x=S.ListBucketResult||{},A=x.Contents||[],_=x.CommonPrefixes||[];A=t.isArray(A)?A:[A],_=t.isArray(_)?_:[_];var G=t.clone(x);t.extend(G,{Contents:A,CommonPrefixes:_,statusCode:S.statusCode,headers:S.headers}),f(null,G)})}function y(e,f){se.call(this,{Action:"name/cos:DeleteBucket",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,method:"DELETE",tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode,headers:u.headers})})}function O(e,f){var o=e.Headers,u="";if(e.AccessControlPolicy){var S=t.clone(e.AccessControlPolicy||{}),x=S.Grants||S.Grant;x=t.isArray(x)?x:[x],delete S.Grant,delete S.Grants,S.AccessControlList={Grant:x},u=t.json2xml({AccessControlPolicy:S}),o["Content-Type"]="application/xml",o["Content-MD5"]=t.b64(t.md5(u))}t.each(o,function(A,_){_.indexOf("x-cos-grant-")===0&&(o[_]=ot(o[_]))}),se.call(this,{Action:"name/cos:PutBucketACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,headers:o,action:"acl",body:u,tracker:e.tracker},function(A,_){if(A)return f(A);f(null,{statusCode:_.statusCode,headers:_.headers})})}function I(e,f){se.call(this,{Action:"name/cos:GetBucketACL",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"acl",tracker:e.tracker},function(o,u){if(o)return f(o);var S=u.AccessControlPolicy||{},x=S.Owner||{},A=S.AccessControlList.Grant||[];A=t.isArray(A)?A:[A];var _=Oe(S);u.headers&&u.headers["x-cos-acl"]&&(_.ACL=u.headers["x-cos-acl"]),_=t.extend(_,{Owner:x,Grants:A,statusCode:u.statusCode,headers:u.headers}),f(null,_)})}function U(e,f){var o=e.CORSConfiguration||{},u=o.CORSRules||e.CORSRules||[];u=t.clone(t.isArray(u)?u:[u]),t.each(u,function(_){t.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(G){var ye=G+"s",ge=_[ye]||_[G]||[];delete _[ye],_[G]=t.isArray(ge)?ge:[ge]})});var S={CORSRule:u};e.ResponseVary&&(S.ResponseVary=e.ResponseVary);var x=t.json2xml({CORSConfiguration:S}),A=e.Headers;A["Content-Type"]="application/xml",A["Content-MD5"]=t.b64(t.md5(x)),se.call(this,{Action:"name/cos:PutBucketCORS",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:x,action:"cors",headers:A,tracker:e.tracker},function(_,G){if(_)return f(_);f(null,{statusCode:G.statusCode,headers:G.headers})})}function F(e,f){se.call(this,{Action:"name/cos:GetBucketCORS",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(o,u){if(o){if(o.statusCode===404&&o.error&&o.error.Code==="NoSuchCORSConfiguration"){var S={CORSRules:[],statusCode:o.statusCode};o.headers&&(S.headers=o.headers),f(null,S)}else f(o);return}var x=u.CORSConfiguration||{},A=x.CORSRules||x.CORSRule||[];A=t.clone(t.isArray(A)?A:[A]);var _=x.ResponseVary;t.each(A,function(G){t.each(["AllowedOrigin","AllowedHeader","AllowedMethod","ExposeHeader"],function(ye){var ge=ye+"s",we=G[ge]||G[ye]||[];delete G[ye],G[ge]=t.isArray(we)?we:[we]})}),f(null,{CORSRules:A,ResponseVary:_,statusCode:u.statusCode,headers:u.headers})})}function q(e,f){se.call(this,{Action:"name/cos:DeleteBucketCORS",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"cors",tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode||o.statusCode,headers:u.headers})})}function K(e,f){se.call(this,{Action:"name/cos:GetBucketLocation",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"location",tracker:e.tracker},f)}function g(e,f){var o=e.Policy;try{typeof o=="string"&&(o=JSON.parse(o))}catch{}if(!o||typeof o=="string")return f(t.error(new Error("Policy format error")));var u=JSON.stringify(o);o.version||(o.version="2.0");var S=e.Headers;S["Content-Type"]="application/json",S["Content-MD5"]=t.b64(t.md5(u)),se.call(this,{Action:"name/cos:PutBucketPolicy",method:"PUT",Bucket:e.Bucket,Region:e.Region,action:"policy",body:u,headers:S,tracker:e.tracker},function(x,A){if(x&&x.statusCode===204)return f(null,{statusCode:x.statusCode});if(x)return f(x);f(null,{statusCode:A.statusCode,headers:A.headers})})}function d(e,f){se.call(this,{Action:"name/cos:GetBucketPolicy",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",rawBody:!0,tracker:e.tracker},function(o,u){if(o)return o.statusCode&&o.statusCode===403?f(t.error(o,{ErrorStatus:"Access Denied"})):o.statusCode&&o.statusCode===405?f(t.error(o,{ErrorStatus:"Method Not Allowed"})):o.statusCode&&o.statusCode===404?f(t.error(o,{ErrorStatus:"Policy Not Found"})):f(o);var S={};try{S=JSON.parse(u.body)}catch{}f(null,{Policy:S,statusCode:u.statusCode,headers:u.headers})})}function B(e,f){se.call(this,{Action:"name/cos:DeleteBucketPolicy",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"policy",tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode||o.statusCode,headers:u.headers})})}function i(e,f){var o=e.Tagging||{},u=o.TagSet||o.Tags||e.Tags||[];u=t.clone(t.isArray(u)?u:[u]);var S=t.json2xml({Tagging:{TagSet:{Tag:u}}}),x=e.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=t.b64(t.md5(S)),se.call(this,{Action:"name/cos:PutBucketTagging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:S,action:"tagging",headers:x,tracker:e.tracker},function(A,_){if(A&&A.statusCode===204)return f(null,{statusCode:A.statusCode});if(A)return f(A);f(null,{statusCode:_.statusCode,headers:_.headers})})}function n(e,f){se.call(this,{Action:"name/cos:GetBucketTagging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(o,u){if(o){if(o.statusCode===404&&o.error&&(o.error==="Not Found"||o.error.Code==="NoSuchTagSet")){var S={Tags:[],statusCode:o.statusCode};o.headers&&(S.headers=o.headers),f(null,S)}else f(o);return}var x=[];try{x=u.Tagging.TagSet.Tag||[]}catch{}x=t.clone(t.isArray(x)?x:[x]),f(null,{Tags:x,statusCode:u.statusCode,headers:u.headers})})}function r(e,f){se.call(this,{Action:"name/cos:DeleteBucketTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode,headers:u.headers})})}function s(e,f){var o=e.LifecycleConfiguration||{},u=o.Rules||e.Rules||[];u=t.clone(u);var S=t.json2xml({LifecycleConfiguration:{Rule:u}}),x=e.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=t.b64(t.md5(S)),se.call(this,{Action:"name/cos:PutBucketLifecycle",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:S,action:"lifecycle",headers:x,tracker:e.tracker},function(A,_){if(A&&A.statusCode===204)return f(null,{statusCode:A.statusCode});if(A)return f(A);f(null,{statusCode:_.statusCode,headers:_.headers})})}function a(e,f){se.call(this,{Action:"name/cos:GetBucketLifecycle",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(o,u){if(o){if(o.statusCode===404&&o.error&&o.error.Code==="NoSuchLifecycleConfiguration"){var S={Rules:[],statusCode:o.statusCode};o.headers&&(S.headers=o.headers),f(null,S)}else f(o);return}var x=[];try{x=u.LifecycleConfiguration.Rule||[]}catch{}x=t.clone(t.isArray(x)?x:[x]),f(null,{Rules:x,statusCode:u.statusCode,headers:u.headers})})}function b(e,f){se.call(this,{Action:"name/cos:DeleteBucketLifecycle",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"lifecycle",tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode,headers:u.headers})})}function M(e,f){if(!e.VersioningConfiguration){f(t.error(new Error("missing param VersioningConfiguration")));return}var o=e.VersioningConfiguration||{},u=t.json2xml({VersioningConfiguration:o}),S=e.Headers;S["Content-Type"]="application/xml",S["Content-MD5"]=t.b64(t.md5(u)),se.call(this,{Action:"name/cos:PutBucketVersioning",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"versioning",headers:S,tracker:e.tracker},function(x,A){if(x&&x.statusCode===204)return f(null,{statusCode:x.statusCode});if(x)return f(x);f(null,{statusCode:A.statusCode,headers:A.headers})})}function P(e,f){se.call(this,{Action:"name/cos:GetBucketVersioning",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"versioning",tracker:e.tracker},function(o,u){o||!u.VersioningConfiguration&&(u.VersioningConfiguration={}),f(o,u)})}function $(e,f){var o=t.clone(e.ReplicationConfiguration),u=t.json2xml({ReplicationConfiguration:o});u=u.replace(/<(\/?)Rules>/gi,"<$1Rule>"),u=u.replace(/<(\/?)Tags>/gi,"<$1Tag>");var S=e.Headers;S["Content-Type"]="application/xml",S["Content-MD5"]=t.b64(t.md5(u)),se.call(this,{Action:"name/cos:PutBucketReplication",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"replication",headers:S,tracker:e.tracker},function(x,A){if(x&&x.statusCode===204)return f(null,{statusCode:x.statusCode});if(x)return f(x);f(null,{statusCode:A.statusCode,headers:A.headers})})}function D(e,f){se.call(this,{Action:"name/cos:GetBucketReplication",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(o,u){if(o){if(o.statusCode===404&&o.error&&(o.error==="Not Found"||o.error.Code==="ReplicationConfigurationnotFoundError")){var S={ReplicationConfiguration:{Rules:[]},statusCode:o.statusCode};o.headers&&(S.headers=o.headers),f(null,S)}else f(o);return}!u.ReplicationConfiguration&&(u.ReplicationConfiguration={}),u.ReplicationConfiguration.Rule&&(u.ReplicationConfiguration.Rules=t.makeArray(u.ReplicationConfiguration.Rule),delete u.ReplicationConfiguration.Rule),f(o,u)})}function te(e,f){se.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"replication",tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode,headers:u.headers})})}function ne(e,f){if(!e.WebsiteConfiguration){f(t.error(new Error("missing param WebsiteConfiguration")));return}var o=t.clone(e.WebsiteConfiguration||{}),u=o.RoutingRules||o.RoutingRule||[];u=t.isArray(u)?u:[u],delete o.RoutingRule,delete o.RoutingRules,u.length&&(o.RoutingRules={RoutingRule:u});var S=t.json2xml({WebsiteConfiguration:o}),x=e.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=t.b64(t.md5(S)),se.call(this,{Action:"name/cos:PutBucketWebsite",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:S,action:"website",headers:x,tracker:e.tracker},function(A,_){if(A&&A.statusCode===204)return f(null,{statusCode:A.statusCode});if(A)return f(A);f(null,{statusCode:_.statusCode,headers:_.headers})})}function ae(e,f){se.call(this,{Action:"name/cos:GetBucketWebsite",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"website",tracker:e.tracker},function(o,u){if(o){if(o.statusCode===404&&o.error.Code==="NoSuchWebsiteConfiguration"){var S={WebsiteConfiguration:{},statusCode:o.statusCode};o.headers&&(S.headers=o.headers),f(null,S)}else f(o);return}var x=u.WebsiteConfiguration||{};if(x.RoutingRules){var A=t.clone(x.RoutingRules.RoutingRule||[]);A=t.makeArray(A),x.RoutingRules=A}f(null,{WebsiteConfiguration:x,statusCode:u.statusCode,headers:u.headers})})}function ue(e,f){se.call(this,{Action:"name/cos:DeleteBucketWebsite",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"website",tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode,headers:u.headers})})}function Se(e,f){if(!e.RefererConfiguration){f(t.error(new Error("missing param RefererConfiguration")));return}var o=t.clone(e.RefererConfiguration||{}),u=o.DomainList||{},S=u.Domains||u.Domain||[];S=t.isArray(S)?S:[S],S.length&&(o.DomainList={Domain:S});var x=t.json2xml({RefererConfiguration:o}),A=e.Headers;A["Content-Type"]="application/xml",A["Content-MD5"]=t.b64(t.md5(x)),se.call(this,{Action:"name/cos:PutBucketReferer",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:x,action:"referer",headers:A,tracker:e.tracker},function(_,G){if(_&&_.statusCode===204)return f(null,{statusCode:_.statusCode});if(_)return f(_);f(null,{statusCode:G.statusCode,headers:G.headers})})}function ve(e,f){se.call(this,{Action:"name/cos:GetBucketReferer",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"referer",tracker:e.tracker},function(o,u){if(o){if(o.statusCode===404&&o.error.Code==="NoSuchRefererConfiguration"){var S={WebsiteConfiguration:{},statusCode:o.statusCode};o.headers&&(S.headers=o.headers),f(null,S)}else f(o);return}var x=u.RefererConfiguration||{};if(x.DomainList){var A=t.makeArray(x.DomainList.Domain||[]);x.DomainList={Domains:A}}f(null,{RefererConfiguration:x,statusCode:u.statusCode,headers:u.headers})})}function oe(e,f){var o=e.DomainConfiguration||{},u=o.DomainRule||e.DomainRule||[];u=t.clone(u);var S=t.json2xml({DomainConfiguration:{DomainRule:u}}),x=e.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=t.b64(t.md5(S)),se.call(this,{Action:"name/cos:PutBucketDomain",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:S,action:"domain",headers:x,tracker:e.tracker},function(A,_){if(A&&A.statusCode===204)return f(null,{statusCode:A.statusCode});if(A)return f(A);f(null,{statusCode:_.statusCode,headers:_.headers})})}function ie(e,f){se.call(this,{Action:"name/cos:GetBucketDomain",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(o,u){if(o)return f(o);var S=[];try{S=u.DomainConfiguration.DomainRule||[]}catch{}S=t.clone(t.isArray(S)?S:[S]),f(null,{DomainRule:S,statusCode:u.statusCode,headers:u.headers})})}function Q(e,f){se.call(this,{Action:"name/cos:DeleteBucketDomain",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"domain",tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode,headers:u.headers})})}function le(e,f){var o=e.OriginConfiguration||{},u=o.OriginRule||e.OriginRule||[];u=t.clone(u);var S=t.json2xml({OriginConfiguration:{OriginRule:u}}),x=e.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=t.b64(t.md5(S)),se.call(this,{Action:"name/cos:PutBucketOrigin",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:S,action:"origin",headers:x,tracker:e.tracker},function(A,_){if(A&&A.statusCode===204)return f(null,{statusCode:A.statusCode});if(A)return f(A);f(null,{statusCode:_.statusCode,headers:_.headers})})}function pe(e,f){se.call(this,{Action:"name/cos:GetBucketOrigin",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(o,u){if(o)return f(o);var S=[];try{S=u.OriginConfiguration.OriginRule||[]}catch{}S=t.clone(t.isArray(S)?S:[S]),f(null,{OriginRule:S,statusCode:u.statusCode,headers:u.headers})})}function me(e,f){se.call(this,{Action:"name/cos:DeleteBucketOrigin",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"origin",tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode,headers:u.headers})})}function de(e,f){var o=t.json2xml({BucketLoggingStatus:e.BucketLoggingStatus||""}),u=e.Headers;u["Content-Type"]="application/xml",u["Content-MD5"]=t.b64(t.md5(o)),se.call(this,{Action:"name/cos:PutBucketLogging",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:o,action:"logging",headers:u,tracker:e.tracker},function(S,x){if(S&&S.statusCode===204)return f(null,{statusCode:S.statusCode});if(S)return f(S);f(null,{statusCode:x.statusCode,headers:x.headers})})}function ce(e,f){se.call(this,{Action:"name/cos:GetBucketLogging",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"logging",tracker:e.tracker},function(o,u){if(o)return f(o);f(null,{BucketLoggingStatus:u.BucketLoggingStatus,statusCode:u.statusCode,headers:u.headers})})}function W(e,f,o){var u=t.clone(f.InventoryConfiguration);if(u.OptionalFields){var S=u.OptionalFields||[];u.OptionalFields={Field:S}}if(u.Destination&&u.Destination.COSBucketDestination&&u.Destination.COSBucketDestination.Encryption){var x=u.Destination.COSBucketDestination.Encryption;Object.keys(x).indexOf("SSECOS")>-1&&(x["SSE-COS"]=x.SSECOS,delete x.SSECOS)}var A=t.json2xml({InventoryConfiguration:u}),_=f.Headers;_["Content-Type"]="application/xml",_["Content-MD5"]=t.b64(t.md5(A));var G=e==="PUT"?"name/cos:PutBucketInventory":"name/cos:PostBucketInventory";se.call(this,{Action:G,method:e,Bucket:f.Bucket,Region:f.Region,body:A,action:"inventory",qs:{id:f.Id},headers:_,tracker:f.tracker},function(ye,ge){if(ye&&ye.statusCode===204)return o(null,{statusCode:ye.statusCode});if(ye)return o(ye);o(null,{statusCode:ge.statusCode,headers:ge.headers})})}function Y(e,f){return W.call(this,"PUT",e,f)}function Z(e,f){return W.call(this,"POST",e,f)}function be(e,f){se.call(this,{Action:"name/cos:GetBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(o,u){if(o)return f(o);var S=u.InventoryConfiguration;if(S&&S.OptionalFields&&S.OptionalFields.Field){var x=S.OptionalFields.Field;t.isArray(x)||(x=[x]),S.OptionalFields=x}if(S.Destination&&S.Destination.COSBucketDestination&&S.Destination.COSBucketDestination.Encryption){var A=S.Destination.COSBucketDestination.Encryption;Object.keys(A).indexOf("SSE-COS")>-1&&(A.SSECOS=A["SSE-COS"],delete A["SSE-COS"])}f(null,{InventoryConfiguration:S,statusCode:u.statusCode,headers:u.headers})})}function he(e,f){se.call(this,{Action:"name/cos:ListBucketInventory",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{"continuation-token":e.ContinuationToken},tracker:e.tracker},function(o,u){if(o)return f(o);var S=u.ListInventoryConfigurationResult,x=S.InventoryConfiguration||[];x=t.isArray(x)?x:[x],delete S.InventoryConfiguration,t.each(x,function(A){if(A&&A.OptionalFields&&A.OptionalFields.Field){var _=A.OptionalFields.Field;t.isArray(_)||(_=[_]),A.OptionalFields=_}if(A.Destination&&A.Destination.COSBucketDestination&&A.Destination.COSBucketDestination.Encryption){var G=A.Destination.COSBucketDestination.Encryption;Object.keys(G).indexOf("SSE-COS")>-1&&(G.SSECOS=G["SSE-COS"],delete G["SSE-COS"])}}),S.InventoryConfigurations=x,t.extend(S,{statusCode:u.statusCode,headers:u.headers}),f(null,S)})}function Te(e,f){se.call(this,{Action:"name/cos:DeleteBucketInventory",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"inventory",qs:{id:e.Id},tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode,headers:u.headers})})}function Me(e,f){if(!e.AccelerateConfiguration){f(t.error(new Error("missing param AccelerateConfiguration")));return}var o={AccelerateConfiguration:e.AccelerateConfiguration||{}},u=t.json2xml(o),S={};S["Content-Type"]="application/xml",S["Content-MD5"]=t.b64(t.md5(u)),se.call(this,{Action:"name/cos:PutBucketAccelerate",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:u,action:"accelerate",headers:S,tracker:e.tracker},function(x,A){if(x)return f(x);f(null,{statusCode:A.statusCode,headers:A.headers})})}function Le(e,f){se.call(this,{Action:"name/cos:GetBucketAccelerate",method:"GET",Bucket:e.Bucket,Region:e.Region,action:"accelerate",tracker:e.tracker},function(o,u){o||!u.AccelerateConfiguration&&(u.AccelerateConfiguration={}),f(o,u)})}function Ve(e,f){var o=e.ServerSideEncryptionConfiguration||{},u=o.Rule||o.Rules||[],S=t.json2xml({ServerSideEncryptionConfiguration:{Rule:u}}),x=e.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=t.b64(t.md5(S)),se.call(this,{Action:"name/cos:PutBucketEncryption",method:"PUT",Bucket:e.Bucket,Region:e.Region,body:S,action:"encryption",headers:x,tracker:e.tracker},function(A,_){if(A&&A.statusCode===204)return f(null,{statusCode:A.statusCode});if(A)return f(A);f(null,{statusCode:_.statusCode,headers:_.headers})})}function ut(e,f){se.call(this,{Action:"name/cos:GetBucketEncryption",method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(o,u){if(o){if(o.statusCode===404&&o.code==="NoSuchEncryptionConfiguration"){var S={EncryptionConfiguration:{Rules:[]},statusCode:o.statusCode};o.headers&&(S.headers=o.headers),f(null,S)}else f(o);return}var x=t.makeArray(u.EncryptionConfiguration&&u.EncryptionConfiguration.Rule||[]);u.EncryptionConfiguration={Rules:x},f(o,u)})}function Je(e,f){se.call(this,{Action:"name/cos:DeleteBucketReplication",method:"DELETE",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"encryption",tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode,headers:u.headers})})}function it(e,f){se.call(this,{Action:"name/cos:HeadObject",method:"HEAD",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(o,u){if(o){var S=o.statusCode;return e.Headers["If-Modified-Since"]&&S&&S===304?f(null,{NotModified:!0,statusCode:S}):f(o)}u.ETag=t.attr(u.headers,"etag",""),f(null,u)})}function bt(e,f){var o={};o.prefix=e.Prefix||"",o.delimiter=e.Delimiter,o["key-marker"]=e.KeyMarker,o["version-id-marker"]=e.VersionIdMarker,o["max-keys"]=e.MaxKeys,o["encoding-type"]=e.EncodingType,se.call(this,{Action:"name/cos:GetBucketObjectVersions",ResourceKey:o.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:o,action:"versions",tracker:e.tracker},function(u,S){if(u)return f(u);var x=S.ListVersionsResult||{},A=x.DeleteMarker||[];A=t.isArray(A)?A:[A];var _=x.Version||[];_=t.isArray(_)?_:[_];var G=t.clone(x);delete G.DeleteMarker,delete G.Version,t.extend(G,{DeleteMarkers:A,Versions:_,statusCode:S.statusCode,headers:S.headers}),f(null,G)})}function Ut(e,f){var o=this;if(o.logger.info({cate:"PROCESS",tag:"download",msg:"[key=".concat(e.Key,"] getObject开始")}),this.options.ObjectKeySimplifyCheck){var u=t.simplifyPath(e.Key);if(u==="/"){f(t.error(new Error("The Getobject Key is illegal")));return}}var S=e.Query||{},x=e.QueryString||"",A=t.throttleOnProgress.call(this,0,e.onProgress),_=e.tracker;_&&_.setParams({signStartTime:new Date().getTime()}),S["response-content-type"]=e.ResponseContentType,S["response-content-language"]=e.ResponseContentLanguage,S["response-expires"]=e.ResponseExpires,S["response-cache-control"]=e.ResponseCacheControl,S["response-content-disposition"]=e.ResponseContentDisposition,S["response-content-encoding"]=e.ResponseContentEncoding,se.call(this,{Action:"name/cos:GetObject",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,DataType:e.DataType,headers:e.Headers,qs:S,qsStr:x,rawBody:!0,onDownloadProgress:A,tracker:_},function(G,ye){if(A(null,!0),G){var ge=G.statusCode;return e.Headers["If-Modified-Since"]&&ge&&ge===304?f(null,{NotModified:!0}):f(G)}f(null,{Body:ye.body,ETag:t.attr(ye.headers,"etag",""),statusCode:ye.statusCode,headers:ye.headers}),o.logger.info({cate:"PROCESS",tag:"download",msg:"[key=".concat(e.Key,"] getObject结束")})})}function Nt(e,f){var o=this,u=e.ContentLength,S=t.throttleOnProgress.call(o,u,e.onProgress);o.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] putObject开始")});var x=e.Headers;!x["Cache-Control"]&&!x["cache-control"]&&(x["Cache-Control"]=""),!x["Content-Type"]&&!x["content-type"]&&(x["Content-Type"]=e.Body&&e.Body.type||"");var A=e.UploadAddMetaMd5||o.options.UploadAddMetaMd5||o.options.UploadCheckContentMd5,_=e.tracker;A&&_&&_.setParams({md5StartTime:new Date().getTime()}),A&&o.logger.debug({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] 开始计算 md5")}),t.getBodyMd5(A,e.Body,function(G){G&&(o.logger.debug({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] md5: ").concat(G,"，md5Base64=").concat(t.b64(G))}),_&&_.setParams({md5EndTime:new Date().getTime()}),o.options.UploadCheckContentMd5&&(x["Content-MD5"]=t.b64(G)),(e.UploadAddMetaMd5||o.options.UploadAddMetaMd5)&&(x["x-cos-meta-md5"]=G)),e.ContentLength!==void 0&&(x["Content-Length"]=e.ContentLength),S(null,!0),se.call(o,{Action:"name/cos:PutObject",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:e.Query,body:e.Body,onProgress:S,tracker:_},function(ye,ge){if(ye)return o.logger.error({cate:"ERROR",tag:"upload",msg:"上传失败，错误信息：".concat(JSON.stringify(ye))}),S(null,!0),f(ye);S({loaded:u,total:u},!0);var we=et({ForcePathStyle:o.options.ForcePathStyle,protocol:o.options.Protocol,domain:o.options.Domain,bucket:e.Bucket,region:o.options.UseAccelerate?"accelerate":e.Region,object:e.Key});we=we.substr(we.indexOf("://")+3),ge.Location=we,ge.ETag=t.attr(ge.headers,"etag",""),o.logger.info({cate:"RESULT",tag:"upload",msg:"上传成功，Location=".concat(we)}),o.logger.info({cate:"PROCESS",tag:"upload",msg:"[key=".concat(e.Key,"] putObject结束")}),f(null,ge)})},e.onHashProgress)}function jt(e,f){se.call(this,{Action:"name/cos:DeleteObject",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,VersionId:e.VersionId,action:e.Recursive?"recursive":"",tracker:e.tracker},function(o,u){if(o){var S=o.statusCode;return S&&S===404?f(null,{BucketNotFound:!0,statusCode:S}):f(o)}f(null,{statusCode:u.statusCode,headers:u.headers})})}function Mt(e,f){var o={};e.VersionId&&(o.versionId=e.VersionId),se.call(this,{Action:"name/cos:GetObjectACL",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:o,action:"acl",tracker:e.tracker},function(u,S){if(u)return f(u);var x=S.AccessControlPolicy||{},A=x.Owner||{},_=x.AccessControlList&&x.AccessControlList.Grant||[];_=t.isArray(_)?_:[_];var G=Oe(x);delete G.GrantWrite,S.headers&&S.headers["x-cos-acl"]&&(G.ACL=S.headers["x-cos-acl"]),G=t.extend(G,{Owner:A,Grants:_,statusCode:S.statusCode,headers:S.headers}),f(null,G)})}function Ft(e,f){var o=e.Headers,u="";if(e.AccessControlPolicy){var S=t.clone(e.AccessControlPolicy||{}),x=S.Grants||S.Grant;x=t.isArray(x)?x:[x],delete S.Grant,delete S.Grants,S.AccessControlList={Grant:x},u=t.json2xml({AccessControlPolicy:S}),o["Content-Type"]="application/xml",o["Content-MD5"]=t.b64(t.md5(u))}t.each(o,function(A,_){_.indexOf("x-cos-grant-")===0&&(o[_]=ot(o[_]))}),se.call(this,{Action:"name/cos:PutObjectACL",method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"acl",headers:o,body:u,tracker:e.tracker},function(A,_){if(A)return f(A);f(null,{statusCode:_.statusCode,headers:_.headers})})}function _t(e,f){var o=e.Headers;o.Origin=e.Origin,o["Access-Control-Request-Method"]=e.AccessControlRequestMethod,o["Access-Control-Request-Headers"]=e.AccessControlRequestHeaders,se.call(this,{Action:"name/cos:OptionsObject",method:"OPTIONS",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:o,tracker:e.tracker},function(u,S){if(u)return u.statusCode&&u.statusCode===403?f(null,{OptionsForbidden:!0,statusCode:u.statusCode}):f(u);var x=S.headers||{};f(null,{AccessControlAllowOrigin:x["access-control-allow-origin"],AccessControlAllowMethods:x["access-control-allow-methods"],AccessControlAllowHeaders:x["access-control-allow-headers"],AccessControlExposeHeaders:x["access-control-expose-headers"],AccessControlMaxAge:x["access-control-max-age"],statusCode:S.statusCode,headers:S.headers})})}function zt(e,f){var o=this,u=e.Headers;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]="");var S=e.CopySource||"",x=t.getSourceParams.call(this,S);if(!x){f(t.error(new Error("CopySource format error")));return}var A=x.Bucket,_=x.Region,G=decodeURIComponent(x.Key);se.call(this,{Scope:[{action:"name/cos:GetObject",bucket:A,region:_,prefix:G},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,headers:e.Headers,tracker:e.tracker},function(ye,ge){if(ye)return f(ye);var we=t.clone(ge.CopyObjectResult||{}),ee=et({ForcePathStyle:o.options.ForcePathStyle,protocol:o.options.Protocol,domain:o.options.Domain,bucket:e.Bucket,region:e.Region,object:e.Key,isLocation:!0});t.extend(we,{Location:ee,statusCode:ge.statusCode,headers:ge.headers}),f(null,we)})}function We(e,f){var o=e.CopySource||"",u=t.getSourceParams.call(this,o);if(!u){f(t.error(new Error("CopySource format error")));return}var S=u.Bucket,x=u.Region,A=decodeURIComponent(u.Key);se.call(this,{Scope:[{action:"name/cos:GetObject",bucket:S,region:x,prefix:A},{action:"name/cos:PutObject",bucket:e.Bucket,region:e.Region,prefix:e.Key}],method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,tracker:e.tracker},function(_,G){if(_)return f(_);var ye=t.clone(G.CopyPartResult||{});t.extend(ye,{statusCode:G.statusCode,headers:G.headers}),f(null,ye)})}function X(e,f){var o=e.Objects||[],u=e.Quiet;o=t.isArray(o)?o:[o];var S=t.json2xml({Delete:{Object:o,Quiet:u||!1}}),x=e.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=t.b64(t.md5(S));var A=t.map(o,function(_){return{action:"name/cos:DeleteObject",bucket:e.Bucket,region:e.Region,prefix:_.Key}});se.call(this,{Scope:A,method:"POST",Bucket:e.Bucket,Region:e.Region,body:S,action:"delete",headers:x,tracker:e.tracker},function(_,G){if(_)return f(_);var ye=G.DeleteResult||{},ge=ye.Deleted||[],we=ye.Error||[];ge=t.isArray(ge)?ge:[ge],we=t.isArray(we)?we:[we];var ee=t.clone(ye);t.extend(ee,{Error:we,Deleted:ge,statusCode:G.statusCode,headers:G.headers}),f(null,ee)})}function L(e,f){var o=e.Headers;if(!e.RestoreRequest){f(t.error(new Error("missing param RestoreRequest")));return}var u=e.RestoreRequest||{},S=t.json2xml({RestoreRequest:u});o["Content-Type"]="application/xml",o["Content-MD5"]=t.b64(t.md5(S)),se.call(this,{Action:"name/cos:RestoreObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,VersionId:e.VersionId,body:S,action:"restore",headers:o,tracker:e.tracker},f)}function z(e,f){var o=e.Tagging||{},u=o.TagSet||o.Tags||e.Tags||[];u=t.clone(t.isArray(u)?u:[u]);var S=t.json2xml({Tagging:{TagSet:{Tag:u}}}),x=e.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=t.b64(t.md5(S)),se.call(this,{Action:"name/cos:PutObjectTagging",method:"PUT",Bucket:e.Bucket,Key:e.Key,Region:e.Region,body:S,action:"tagging",headers:x,VersionId:e.VersionId,tracker:e.tracker},function(A,_){if(A&&A.statusCode===204)return f(null,{statusCode:A.statusCode});if(A)return f(A);f(null,{statusCode:_.statusCode,headers:_.headers})})}function H(e,f){se.call(this,{Action:"name/cos:GetObjectTagging",method:"GET",Key:e.Key,Bucket:e.Bucket,Region:e.Region,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(o,u){if(o){if(o.statusCode===404&&o.error&&(o.error==="Not Found"||o.error.Code==="NoSuchTagSet")){var S={Tags:[],statusCode:o.statusCode};o.headers&&(S.headers=o.headers),f(null,S)}else f(o);return}var x=[];try{x=u.Tagging.TagSet.Tag||[]}catch{}x=t.clone(t.isArray(x)?x:[x]),f(null,{Tags:x,statusCode:u.statusCode,headers:u.headers})})}function J(e,f){se.call(this,{Action:"name/cos:DeleteObjectTagging",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"tagging",VersionId:e.VersionId,tracker:e.tracker},function(o,u){if(o&&o.statusCode===204)return f(null,{statusCode:o.statusCode});if(o)return f(o);f(null,{statusCode:u.statusCode,headers:u.headers})})}function re(e,f){var o=e.SelectType;if(!o)return f(t.error(new Error("missing param SelectType")));var u=e.SelectRequest||{},S=t.json2xml({SelectRequest:u}),x=e.Headers;x["Content-Type"]="application/xml",x["Content-MD5"]=t.b64(t.md5(S)),se.call(this,{Action:"name/cos:GetObject",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,action:"select",qs:{"select-type":e.SelectType},VersionId:e.VersionId,body:S,DataType:"arraybuffer",rawBody:!0,tracker:e.tracker},function(A,_){if(A&&A.statusCode===204)return f(null,{statusCode:A.statusCode});if(A)return f(A);var G=t.parseSelectPayload(_.body);f(null,{statusCode:_.statusCode,headers:_.headers,Body:G.body,Payload:G.payload})})}function fe(e,f){var o=this,u=e.Headers,S=e.tracker;!u["Cache-Control"]&&!u["cache-control"]&&(u["Cache-Control"]=""),!u["Content-Type"]&&!u["content-type"]&&(u["Content-Type"]=e.Body&&e.Body.type||"");var x=e.Body&&(e.UploadAddMetaMd5||o.options.UploadAddMetaMd5);x&&S&&S.setParams({md5StartTime:new Date().getTime()}),t.getBodyMd5(x,e.Body,function(A){A&&(e.Headers["x-cos-meta-md5"]=A),x&&S&&S.setParams({md5EndTime:new Date().getTime()}),se.call(o,{Action:"name/cos:InitiateMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:"uploads",headers:e.Headers,qs:e.Query,tracker:S},function(_,G){if(_)return S&&S.parent&&S.parent.setParams({errorNode:"multipartInit"}),f(_);if(G=t.clone(G||{}),G&&G.InitiateMultipartUploadResult)return f(null,t.extend(G.InitiateMultipartUploadResult,{statusCode:G.statusCode,headers:G.headers}));f(null,G)})},e.onHashProgress)}function xe(e,f){var o=this;t.getFileSize("multipartUpload",e,function(){var u=e.tracker,S=o.options.UploadCheckContentMd5;S&&u&&u.setParams({md5StartTime:new Date().getTime()}),t.getBodyMd5(S,e.Body,function(x){x&&(e.Headers["Content-MD5"]=t.b64(x)),S&&u&&u.setParams({md5EndTime:new Date().getTime()}),u&&u.setParams({partNumber:e.PartNumber}),se.call(o,{Action:"name/cos:UploadPart",TaskId:e.TaskId,method:"PUT",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{partNumber:e.PartNumber,uploadId:e.UploadId},headers:e.Headers,onProgress:e.onProgress,body:e.Body||null,tracker:u},function(A,_){if(A)return u&&u.parent&&u.parent.setParams({errorNode:"multipartUpload"}),f(A);f(null,{ETag:t.attr(_.headers,"etag",""),statusCode:_.statusCode,headers:_.headers})})})})}function Re(e,f){for(var o=this,u=e.UploadId,S=e.Parts,x=e.tracker,A=0,_=S.length;A<_;A++)S[A].ETag&&S[A].ETag.indexOf('"')===0||(S[A].ETag='"'+S[A].ETag+'"');var G=t.json2xml({CompleteMultipartUpload:{Part:S}});G=G.replace(/\n\s*/g,"");var ye=e.Headers;ye["Content-Type"]="application/xml",ye["Content-MD5"]=t.b64(t.md5(G)),se.call(this,{Action:"name/cos:CompleteMultipartUpload",method:"POST",Bucket:e.Bucket,Region:e.Region,Key:e.Key,qs:{uploadId:u},body:G,headers:ye,tracker:x},function(ge,we){if(ge)return x&&x.parent&&x.parent.setParams({errorNode:"multipartComplete"}),f(ge);var ee=et({ForcePathStyle:o.options.ForcePathStyle,protocol:o.options.Protocol,domain:o.options.Domain,bucket:e.Bucket,region:o.options.UseAccelerate?"accelerate":e.Region,object:e.Key,isLocation:!0}),Pe=we.CompleteMultipartUploadResult||{};if(Pe.ProcessResults&&(Pe.UploadResult={OriginalInfo:{Key:Pe.Key,Location:ee,ETag:Pe.ETag,ImageInfo:Pe.ImageInfo},ProcessResults:Pe.ProcessResults},delete Pe.ImageInfo,delete Pe.ProcessResults),Pe.CallbackResult){var He=Pe.CallbackResult;if(He.Status==="200"&&He.CallbackBody)try{Pe.CallbackBody=JSON.parse(t.decodeBase64(He.CallbackBody))}catch{Pe.CallbackBody={}}else Pe.CallbackError=He.Error||{};delete Pe.CallbackResult}if(Pe.ReturnBodyResult){var qe=Pe.ReturnBodyResult;if(qe.Status==="200"&&qe.ReturnBody)try{Pe.ReturnBody=JSON.parse(t.decodeBase64(qe.ReturnBody))}catch{Pe.ReturnBody={}}else Pe.ReturnError={Code:qe.Code,Message:qe.Message,Status:qe.Status};delete Pe.ReturnBodyResult}var Xe=t.extend(Pe,{Location:ee,statusCode:we.statusCode,headers:we.headers});f(null,Xe)})}function Ee(e,f){var o={};o.delimiter=e.Delimiter,o["encoding-type"]=e.EncodingType,o.prefix=e.Prefix||"",o["max-uploads"]=e.MaxUploads,o["key-marker"]=e.KeyMarker,o["upload-id-marker"]=e.UploadIdMarker,o=t.clearKey(o);var u=e.tracker;u&&u.setParams({signStartTime:new Date().getTime()}),se.call(this,{Action:"name/cos:ListMultipartUploads",ResourceKey:o.prefix,method:"GET",Bucket:e.Bucket,Region:e.Region,headers:e.Headers,qs:o,action:"uploads",tracker:u},function(S,x){if(S)return u&&u.parent&&u.parent.setParams({errorNode:"multipartList"}),f(S);if(x&&x.ListMultipartUploadsResult){var A=x.ListMultipartUploadsResult.Upload||[];A=t.isArray(A)?A:[A],x.ListMultipartUploadsResult.Upload=A}var _=t.clone(x.ListMultipartUploadsResult||{});t.extend(_,{statusCode:x.statusCode,headers:x.headers}),f(null,_)})}function Ue(e,f){var o={},u=e.tracker;o.uploadId=e.UploadId,o["encoding-type"]=e.EncodingType,o["max-parts"]=e.MaxParts,o["part-number-marker"]=e.PartNumberMarker,se.call(this,{Action:"name/cos:ListParts",method:"GET",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:o,tracker:u},function(S,x){if(S)return u&&u.parent&&u.parent.setParams({errorNode:"multipartListPart"}),f(S);var A=x.ListPartsResult||{},_=A.Part||[];_=t.isArray(_)?_:[_],A.Part=_;var G=t.clone(A);t.extend(G,{statusCode:x.statusCode,headers:x.headers}),f(null,G)})}function $e(e,f){var o={};o.uploadId=e.UploadId,se.call(this,{Action:"name/cos:AbortMultipartUpload",method:"DELETE",Bucket:e.Bucket,Region:e.Region,Key:e.Key,headers:e.Headers,qs:o,tracker:e.tracker},function(u,S){if(u)return f(u);f(null,{statusCode:S.statusCode,headers:S.headers})})}function _e(e,f){se.call(this,{method:e.Method,Bucket:e.Bucket,Region:e.Region,Key:e.Key,action:e.Action,headers:e.Headers,qs:e.Query,body:e.Body,Url:e.Url,rawBody:e.RawBody,DataType:e.DataType,tracker:e.tracker},function(o,u){if(o)return f(o);u&&u.body&&(u.Body=u.body,delete u.body),f(o,u)})}function Ye(e,f){var o=e.Headers;!o["Cache-Control"]&&!o["cache-control"]&&(o["Cache-Control"]=""),!o["Content-Type"]&&!o["content-type"]&&(o["Content-Type"]=e.Body&&e.Body.type||""),se.call(this,{Action:"name/cos:AppendObject",method:"POST",Bucket:e.Bucket,Region:e.Region,action:"append",Key:e.Key,body:e.Body,qs:{position:e.Position},headers:e.Headers,tracker:e.tracker},function(u,S){if(u)return f(u);f(null,S)})}function ct(e){var f=this;return t.getAuth({SecretId:e.SecretId||this.options.SecretId||"",SecretKey:e.SecretKey||this.options.SecretKey||"",Bucket:e.Bucket,Region:e.Region,Method:e.Method,Key:e.Key,Query:e.Query,Headers:e.Headers,Expires:e.Expires,UseRawKey:f.options.UseRawKey,SystemClockOffset:f.options.SystemClockOffset})}function tt(e,f){var o=this,u=e.UseAccelerate===void 0?o.options.UseAccelerate:e.UseAccelerate,S=et({ForcePathStyle:o.options.ForcePathStyle,protocol:e.Protocol||o.options.Protocol,domain:e.Domain||o.options.Domain,bucket:e.Bucket,region:u?"accelerate":e.Region,object:e.Key}),x="";e.Query&&(x+=t.obj2str(e.Query)),e.QueryString&&(x+=(x?"&":"")+e.QueryString);var A=S;if(e.Sign!==void 0&&!e.Sign)return x&&(A+="?"+x),f(null,{Url:A}),A;var _=gt.call(this,{Bucket:e.Bucket,Region:e.Region,UseAccelerate:e.UseAccelerate,Url:S}),G=kt.call(this,{Action:(e.Method||"").toUpperCase()==="PUT"?"name/cos:PutObject":"name/cos:GetObject",Bucket:e.Bucket||"",Region:e.Region||"",Method:e.Method||"get",Key:e.Key,Expires:e.Expires,Headers:e.Headers,Query:e.Query,SignHost:_,ForceSignHost:e.ForceSignHost===!1?!1:o.options.ForceSignHost},function(ye,ge){if(f){if(ye){f(ye);return}var we=function(He){var qe=He.match(/q-url-param-list.*?(?=&)/g)[0],Xe="q-url-param-list="+encodeURIComponent(qe.replace(/q-url-param-list=/,"")).toLowerCase(),Ze=new RegExp(qe,"g"),st=He.replace(Ze,Xe);return st},ee=S;ee+="?"+(ge.Authorization.indexOf("q-signature")>-1?we(ge.Authorization):"sign="+encodeURIComponent(ge.Authorization)),ge.SecurityToken&&(ee+="&x-cos-security-token="+ge.SecurityToken),ge.ClientIP&&(ee+="&clientIP="+ge.ClientIP),ge.ClientUA&&(ee+="&clientUA="+ge.ClientUA),ge.Token&&(ee+="&token="+ge.Token),x&&(ee+="&"+x),setTimeout(function(){f(null,{Url:ee})})}});return G?(A+="?"+G.Authorization+(G.SecurityToken?"&x-cos-security-token="+G.SecurityToken:""),x&&(A+="&"+x)):x&&(A+="?"+x),A}function Oe(e){var f={GrantFullControl:[],GrantWrite:[],GrantRead:[],GrantReadAcp:[],GrantWriteAcp:[],ACL:""},o={FULL_CONTROL:"GrantFullControl",WRITE:"GrantWrite",READ:"GrantRead",READ_ACP:"GrantReadAcp",WRITE_ACP:"GrantWriteAcp"},u=e&&e.AccessControlList||{},S=u.Grant;S&&(S=t.isArray(S)?S:[S]);var x={READ:0,WRITE:0,FULL_CONTROL:0};return S&&S.length&&t.each(S,function(A){var _=A.Grantee.URI&&A.Grantee.URI.endsWith("/groups/global/AllUsers");A.Grantee.ID==="qcs::cam::anyone:anyone"||_?x[A.Permission]=1:A.Grantee.ID!==e.Owner.ID&&f[o[A.Permission]].push('id="'+A.Grantee.ID+'"')}),x.FULL_CONTROL||x.WRITE&&x.READ?f.ACL="public-read-write":x.READ?f.ACL="public-read":f.ACL="private",t.each(o,function(A){f[A]=ot(f[A].join(","))}),f}function ot(e){var f=e.split(","),o={},u,S;for(u=0;u<f.length;)S=f[u].trim(),o[S]?f.splice(u,1):(o[S]=!0,f[u]=S,u++);return f.join(",")}function et(e){var f=e.region||"",o=e.bucket||"",u=o.substr(0,o.lastIndexOf("-")),S=o.substr(o.lastIndexOf("-")+1),x=e.domain,A=e.object;typeof x=="function"&&(x=x({Bucket:o,Region:f})),["http","https"].includes(e.protocol)&&(e.protocol=e.protocol+":");var _=e.protocol||(t.isBrowser&&(typeof location>"u"?"undefined":m(location))==="object"&&location.protocol==="http:"?"http:":"https:");x||(["cn-south","cn-south-2","cn-north","cn-east","cn-southwest","sg"].indexOf(f)>-1?x="{Region}.myqcloud.com":x="cos.{Region}.myqcloud.com",e.ForcePathStyle||(x="{Bucket}."+x)),x=x.replace(/\{\{AppId\}\}/gi,S).replace(/\{\{Bucket\}\}/gi,u).replace(/\{\{Region\}\}/gi,f).replace(/\{\{.*?\}\}/gi,""),x=x.replace(/\{AppId\}/gi,S).replace(/\{BucketName\}/gi,u).replace(/\{Bucket\}/gi,o).replace(/\{Region\}/gi,f).replace(/\{.*?\}/gi,""),/^[a-zA-Z]+:\/\//.test(x)||(x=_+"//"+x),x.slice(-1)==="/"&&(x=x.slice(0,-1));var G=x;return e.ForcePathStyle&&(G+="/"+o),G+="/",A&&(G+=t.camSafeUrlEncode(A).replace(/%2F/g,"/")),e.isLocation&&(G=G.replace(/^https?:\/\//,"")),G}var gt=function(f){var o=f.Url||f.Bucket&&f.Region;if(!o)return"";var u=f.UseAccelerate===void 0?this.options.UseAccelerate:f.UseAccelerate,S=f.Url||et({ForcePathStyle:this.options.ForcePathStyle,protocol:this.options.Protocol,domain:this.options.Domain,bucket:f.Bucket,region:u?"accelerate":f.Region}),x=S.replace(/^https?:\/\/([^/]+)(\/.*)?$/,"$1");return x};function kt(e,f){var o=t.clone(e.Headers),u="";t.each(o,function(Ae,ke){(Ae===""||["content-type","cache-control","expires"].indexOf(ke.toLowerCase())>-1)&&delete o[ke],ke.toLowerCase()==="host"&&(u=Ae)});var S=e.ForceSignHost!==!1;!u&&e.SignHost&&S&&(o.Host=e.SignHost);var x=!1,A=function(ke,Ie){x||(x=!0,Ie&&Ie.XCosSecurityToken&&!Ie.SecurityToken&&(Ie=t.clone(Ie),Ie.SecurityToken=Ie.XCosSecurityToken,delete Ie.XCosSecurityToken),f&&f(ke,Ie))},_=this,G=e.Bucket||"",ye=e.Region||"",ge=e.Key||"";_.options.ForcePathStyle&&G&&(ge=G+"/"+ge);var we="/"+ge,ee={},Pe=e.Scope;if(!Pe){var He=e.Action||"",qe=e.ResourceKey||e.Key||"";Pe=e.Scope||[{action:He,bucket:G,region:ye,prefix:qe}]}var Xe=t.md5(JSON.stringify(Pe));_._StsCache=_._StsCache||[],function(){var Ae,ke;for(Ae=_._StsCache.length-1;Ae>=0;Ae--){ke=_._StsCache[Ae];var Ie=Math.round(t.getSkewTime(_.options.SystemClockOffset)/1e3)+30;if(ke.StartTime&&Ie<ke.StartTime||Ie>=ke.ExpiredTime){_._StsCache.splice(Ae,1);continue}if(!ke.ScopeLimit||ke.ScopeLimit&&ke.ScopeKey===Xe){ee=ke;break}}}();var Ze=function(){var ke="";ee.StartTime&&e.Expires?ke=ee.StartTime+";"+(ee.StartTime+e.Expires*1):ee.StartTime&&ee.ExpiredTime&&(ke=ee.StartTime+";"+ee.ExpiredTime);var Ie=t.getAuth({SecretId:ee.TmpSecretId,SecretKey:ee.TmpSecretKey,Method:e.Method,Pathname:we,Query:e.Query,Headers:o,Expires:e.Expires,UseRawKey:_.options.UseRawKey,SystemClockOffset:_.options.SystemClockOffset,KeyTime:ke,ForceSignHost:S}),Be={Authorization:Ie,SecurityToken:ee.SecurityToken||ee.XCosSecurityToken||"",Token:ee.Token||"",ClientIP:ee.ClientIP||"",ClientUA:ee.ClientUA||"",SignFrom:"client"};A(null,Be)},st=function(ke){if(ke.Authorization){var Ie=!1,Be=ke.Authorization;if(Be)if(Be.indexOf(" ")>-1)Ie=!1;else if(Be.indexOf("q-sign-algorithm=")>-1&&Be.indexOf("q-ak=")>-1&&Be.indexOf("q-sign-time=")>-1&&Be.indexOf("q-key-time=")>-1&&Be.indexOf("q-url-param-list=")>-1)Ie=!0;else try{Be=atob(Be),Be.indexOf("a=")>-1&&Be.indexOf("k=")>-1&&Be.indexOf("t=")>-1&&Be.indexOf("r=")>-1&&Be.indexOf("b=")>-1&&(Ie=!0)}catch{}if(!Ie)return t.error(new Error("getAuthorization callback params format error"))}else{if(!ke.TmpSecretId)return t.error(new Error('getAuthorization callback params missing "TmpSecretId"'));if(!ke.TmpSecretKey)return t.error(new Error('getAuthorization callback params missing "TmpSecretKey"'));if(!ke.SecurityToken&&!ke.XCosSecurityToken)return t.error(new Error('getAuthorization callback params missing "SecurityToken"'));if(!ke.ExpiredTime)return t.error(new Error('getAuthorization callback params missing "ExpiredTime"'));if(ke.ExpiredTime&&ke.ExpiredTime.toString().length!==10)return t.error(new Error('getAuthorization callback params "ExpiredTime" should be 10 digits'));if(ke.StartTime&&ke.StartTime.toString().length!==10)return t.error(new Error('getAuthorization callback params "StartTime" should be 10 StartTime'))}return!1};if(ee.ExpiredTime&&ee.ExpiredTime-t.getSkewTime(_.options.SystemClockOffset)/1e3>60)Ze();else if(_.options.getAuthorization)_.options.getAuthorization.call(_,{Bucket:G,Region:ye,Method:e.Method,Key:ge,Pathname:we,Query:e.Query,Headers:o,Scope:Pe,SystemClockOffset:_.options.SystemClockOffset,ForceSignHost:S},function(Ae){typeof Ae=="string"&&(Ae={Authorization:Ae});var ke=st(Ae);if(ke)return A(ke);Ae.Authorization?A(null,Ae):(ee=Ae||{},ee.Scope=Pe,ee.ScopeKey=Xe,_._StsCache.push(ee),Ze())});else if(_.options.getSTS)_.options.getSTS.call(_,{Bucket:G,Region:ye},function(Ae){ee=Ae||{},ee.Scope=Pe,ee.ScopeKey=Xe,ee.TmpSecretId||(ee.TmpSecretId=ee.SecretId),ee.TmpSecretKey||(ee.TmpSecretKey=ee.SecretKey);var ke=st(ee);if(ke)return A(ke);_._StsCache.push(ee),Ze()});else return function(){var Ae="";if(_.options.StartTime&&e.Expires){if(_.options.StartTime.toString().length!==10)return A(t.error(new Error('params "StartTime" should be 10 digits')));Ae=_.options.StartTime+";"+(_.options.StartTime+e.Expires*1)}else if(_.options.StartTime&&_.options.ExpiredTime){if(_.options.StartTime.toString().length!==10)return A(t.error(new Error('params "StartTime" should be 10 digits')));if(_.options.ExpiredTime.toString().length!==10)return A(t.error(new Error('params "ExpiredTime" should be 10 digits')));Ae=_.options.StartTime+";"+_.options.ExpiredTime*1}var ke=t.getAuth({SecretId:e.SecretId||_.options.SecretId,SecretKey:e.SecretKey||_.options.SecretKey,Method:e.Method,Pathname:we,Query:e.Query,Headers:o,Expires:e.Expires,KeyTime:Ae,UseRawKey:_.options.UseRawKey,SystemClockOffset:_.options.SystemClockOffset,ForceSignHost:S}),Ie={Authorization:ke,SecurityToken:_.options.SecurityToken||_.options.XCosSecurityToken,SignFrom:"client"};return A(null,Ie),Ie}();return""}function Ht(e){var f=this,o=!1,u=!1,S=!1,x=e.headers&&(e.headers.date||e.headers.Date)||e.error&&e.error.ServerTime;try{var A=e.error.Code,_=e.error.Message;(A==="RequestTimeTooSkewed"||A==="AccessDenied"&&_==="Request has expired")&&(u=!0)}catch{}if(e)if(u&&x){var G=Date.parse(x);this.options.CorrectClockSkew&&Math.abs(t.getSkewTime(this.options.SystemClockOffset)-G)>=3e4&&(console.error("error: Local time is too skewed."),this.options.SystemClockOffset=G-Date.now(),o=!0)}else Math.floor(e.statusCode/100)===5?(o=!0,S=!1):(e.message==="timeout"||e.message==="CORS blocked or network error")&&(o=!0,S=f.options.AutoSwitchHost);return{canRetry:o,networkError:S}}function Kt(e){var f=e.requestUrl,o=e.clientCalcSign,u=e.networkError;if(!this.options.AutoSwitchHost||!f||!o||!u)return!1;var S=/^https?:\/\/[^\/]*\.cos\.[^\/]*\.myqcloud\.com(\/.*)?$/,x=/^https?:\/\/[^\/]*\.cos\.accelerate\.myqcloud\.com(\/.*)?$/,A=S.test(f)&&!x.test(f);return A}function se(e,f){var o=this;!e.headers&&(e.headers={}),!e.qs&&(e.qs={}),e.VersionId&&(e.qs.versionId=e.VersionId),e.qs=t.clearKey(e.qs),e.headers&&(e.headers=t.clearKey(e.headers)),e.qs&&(e.qs=t.clearKey(e.qs));var u=t.clone(e.qs);e.action&&(u[e.action]="");var S=e.url||e.Url,x=e.SignHost||gt.call(this,{Bucket:e.Bucket,Region:e.Region,Url:S}),A=e.tracker,_=function(ye){var ge=o.options.SystemClockOffset;A&&A.setParams({signStartTime:new Date().getTime(),httpRetryTimes:ye-1}),e.SwitchHost&&(x=x.replace(/myqcloud.com/,"tencentcos.cn"));var we=w(w({},e),{},{Query:u,SignHost:x,ForceSignHost:o.options.ForceSignHost});delete we.tracker,o.logger.debug({cate:"PROCESS",tag:"base",msg:"开始计算签名, opt=".concat(JSON.stringify(we))}),kt.call(o,{Bucket:e.Bucket||"",Region:e.Region||"",Method:e.method,Key:e.Key,Query:u,Headers:e.headers,SignHost:x,Action:e.Action,ResourceKey:e.ResourceKey,Scope:e.Scope,ForceSignHost:o.options.ForceSignHost,SwitchHost:e.SwitchHost},function(ee,Pe){if(ee){o.logger.error({cate:"PROCESS",tag:"base",msg:"签名获取失败, err=".concat(JSON.stringify(ee.message))}),f(ee);return}A&&A.setParams({signEndTime:new Date().getTime(),httpStartTime:new Date().getTime()}),e.AuthData=Pe,o.logger.debug({cate:"PROCESS",tag:"base",msg:"签名获取成功"}),o.logger.info({cate:"PROCESS",tag:"base",msg:"准备发起请求"}),$t.call(o,e,function(He,qe){A&&A.setParams({httpEndTime:new Date().getTime()});var Xe=!1,Ze=!1;if(He){var st=Ht.call(o,He);Xe=st.canRetry||ge!==o.options.SystemClockOffset,Ze=st.networkError,o.logger.error({cate:"PROCESS",tag:"network",msg:"请求失败, err=".concat(JSON.stringify(He),", canRetry=").concat(Xe,", networkError=").concat(Ze,", tryTimes=").concat(ye)})}if(He&&ye<4&&Xe){e.headers&&(delete e.headers.Authorization,delete e.headers.token,delete e.headers.clientIP,delete e.headers.clientUA,e.headers["x-cos-security-token"]&&delete e.headers["x-cos-security-token"],e.headers["x-ci-security-token"]&&delete e.headers["x-ci-security-token"]);var Ae=Kt.call(o,{requestUrl:(He==null?void 0:He.url)||"",clientCalcSign:Pe.SignFrom==="client",networkError:Ze});e.SwitchHost=Ae,e.headers["x-cos-sdk-retry"]=!0,o.logger.info({cate:"PROCESS",tag:"base",msg:"重试请求, 重试第".concat(ye,"次")}),_(ye+1)}else o.logger.info({cate:"PROCESS",tag:"base",msg:"请求完成"}),f(He,qe)})})};_(1)}function $t(e,f){var o=this,u=e.TaskId;if(!(u&&!o._isRunningTask(u))){var S=e.Bucket,x=e.Region,A=e.Key,_=e.method||"GET",G=e.Url||e.url,ye=e.body,ge=e.rawBody;o.options.UseAccelerate&&(x="accelerate"),G=G||et({ForcePathStyle:o.options.ForcePathStyle,protocol:o.options.Protocol,domain:o.options.Domain,bucket:S,region:x,object:A}),e.SwitchHost&&(G=G.replace(/myqcloud.com/,"tencentcos.cn"));var we=A?G:"";e.action&&(G=G+"?"+(t.isIOS_QQ?"".concat(e.action,"="):e.action)),e.qsStr&&(G.indexOf("?")>-1?G=G+"&"+e.qsStr:G=G+"?"+e.qsStr);var ee={method:_,url:G,headers:e.headers,qs:e.qs,body:ye},Pe="x-cos-security-token";if(t.isCIHost(G)&&(Pe="x-ci-security-token"),ee.headers.Authorization=e.AuthData.Authorization,e.AuthData.Token&&(ee.headers.token=e.AuthData.Token),e.AuthData.ClientIP&&(ee.headers.clientIP=e.AuthData.ClientIP),e.AuthData.ClientUA&&(ee.headers.clientUA=e.AuthData.ClientUA),e.AuthData.SecurityToken&&(ee.headers[Pe]=e.AuthData.SecurityToken),e.Action&&(ee.action=e.Action),ee.key=e.Key||e.ResourceKey,ee.headers&&(ee.headers=t.clearKey(ee.headers)),ee=t.clearKey(ee),e.onProgress&&typeof e.onProgress=="function"){var He=ye&&(ye.size||ye.length)||0;ee.onProgress=function(Be){if(!(u&&!o._isRunningTask(u))){var rt=Be?Be.loaded:0;e.onProgress({loaded:rt,total:He})}}}e.onDownloadProgress&&(ee.onDownloadProgress=e.onDownloadProgress),e.DataType&&(ee.dataType=e.DataType),this.options.Timeout&&(ee.timeout=this.options.Timeout),o.options.ForcePathStyle&&(ee.pathStyle=o.options.ForcePathStyle);var qe=t.uuid();o.logger.info({cate:"PROCESS",tag:"network",msg:"[Request] ".concat(qe,", requestOpt=").concat(JSON.stringify(ee))}),o.emit("before-send",ee);var Xe=ee.url.includes("accelerate."),Ze=ee.qs?Object.keys(ee.qs).map(function(Be){return"".concat(Be,"=").concat(ee.qs[Be])}).join("&"):"",st=Ze?ee.url+"?"+Ze:ee.url;if(e.tracker){var Ae;e.tracker.setParams({url:st,httpMethod:ee.method,accelerate:Xe,httpSize:((Ae=ee.body)===null||Ae===void 0?void 0:Ae.size)||0}),e.tracker.parent&&!e.tracker.parent.params.url&&e.tracker.parent.setParams({url:we,accelerate:Xe})}var ke=(o.options.Request||R)(ee,function(Be){if(!(Be&&Be.error==="abort")){var rt={options:ee,error:Be&&Be.error,statusCode:Be&&Be.statusCode||0,statusMessage:Be&&Be.statusMessage||"",headers:Be&&Be.headers||{},body:Be&&Be.body};o.emit("after-receive",rt);var Dt=rt.error,Rt=rt.body,at={statusCode:rt.statusCode,statusMessage:rt.statusMessage,headers:rt.headers},an=Dt?"[error]":"[success]";o.logger.info({cate:"PROCESS",tag:"network",msg:"[Response] ".concat(qe,", ").concat(an,", response=").concat(JSON.stringify(at))});var sr,dt=function(ft,De){if(u&&o.off("inner-kill-task",Ie),!sr){sr=!0;var vt={};if(at&&at.statusCode&&(vt.statusCode=at.statusCode),at&&at.headers&&(vt.headers=at.headers),ft)ee.url&&(vt.url=ee.url),ee.method&&(vt.method=ee.method),ft=t.extend(ft||{},vt),f(ft,null);else{if(e.Action==="name/cos:PutObject"){var qt={};for(var ur in e.headers){var ln=ur.toLowerCase();qt[ln]=e.headers[ur]}qt["x-cos-callback"]?De.Error?(De.CallbackError=t.clone(De.Error),delete De.Error):De.CallbackBody=t.clone(De):qt["x-cos-return-body"]&&(De.Error?(De.ReturnError=t.clone(De.Error),delete De.Error):De.ReturnBody=t.clone(De))}De=t.extend(De||{},vt),f(null,De)}ke=null}};if(Dt)return dt(t.error(Dt));var wt=at.statusCode,ar=Math.floor(wt/100)===2;if(ge){if(ar)return dt(null,{body:Rt});if(Rt instanceof Blob){t.readAsBinaryString(Rt,function(lr){var ft=t.parseResBody(lr),De=ft.Error||ft;return dt(t.error(new Error(De.Message||"response body error"),{code:De.Code,error:De}))});return}}var Vt=t.parseResBody(Rt),Tt=Vt.Error||Vt;ar?dt(null,Vt):Tt?dt(t.error(new Error(Tt.Message),{code:Tt.Code,error:Tt})):wt?dt(t.error(new Error(at.statusMessage),{code:""+wt})):wt&&dt(t.error(new Error("statusCode error")))}}),Ie=function(rt){rt.TaskId===u&&(ke&&ke.abort&&ke.abort(),o.off("inner-kill-task",Ie))};u&&o.on("inner-kill-task",Ie)}}var ir={getService:v,putBucket:c,headBucket:C,getBucket:l,deleteBucket:y,putBucketAcl:O,getBucketAcl:I,putBucketCors:U,getBucketCors:F,deleteBucketCors:q,getBucketLocation:K,getBucketPolicy:d,putBucketPolicy:g,deleteBucketPolicy:B,putBucketTagging:i,getBucketTagging:n,deleteBucketTagging:r,putBucketLifecycle:s,getBucketLifecycle:a,deleteBucketLifecycle:b,putBucketVersioning:M,getBucketVersioning:P,putBucketReplication:$,getBucketReplication:D,deleteBucketReplication:te,putBucketWebsite:ne,getBucketWebsite:ae,deleteBucketWebsite:ue,putBucketReferer:Se,getBucketReferer:ve,putBucketDomain:oe,getBucketDomain:ie,deleteBucketDomain:Q,putBucketOrigin:le,getBucketOrigin:pe,deleteBucketOrigin:me,putBucketLogging:de,getBucketLogging:ce,putBucketInventory:Y,postBucketInventory:Z,getBucketInventory:be,listBucketInventory:he,deleteBucketInventory:Te,putBucketAccelerate:Me,getBucketAccelerate:Le,putBucketEncryption:Ve,getBucketEncryption:ut,deleteBucketEncryption:Je,getObject:Ut,headObject:it,listObjectVersions:bt,putObject:Nt,deleteObject:jt,getObjectAcl:Mt,putObjectAcl:Ft,optionsObject:_t,putObjectCopy:zt,deleteMultipleObject:X,restoreObject:L,putObjectTagging:z,getObjectTagging:H,deleteObjectTagging:J,selectObjectContent:re,appendObject:Ye,uploadPartCopy:We,multipartInit:fe,multipartUpload:xe,multipartComplete:Re,multipartList:Ee,multipartListPart:Ue,multipartAbort:$e,request:_e,getObjectUrl:tt,getAuth:ct};function sn(e,f,o){t.each(["Cors","Acl"],function(u){if(e.slice(-u.length)===u){var S=e.slice(0,-u.length)+u.toUpperCase(),x=t.apiWrapper(e,f),A=!1;o[S]=function(){!A&&console.warn("warning: cos."+S+" has been deprecated. Please Use cos."+e+" instead."),A=!0,x.apply(this,arguments)}}})}T.exports.init=function(e,f){f.transferToTaskMethod(ir,"putObject"),t.each(ir,function(o,u){e.prototype[u]=t.apiWrapper(u,o),sn(u,o,e.prototype)})}},"./src/cos.js":function(T,N,p){var k=p("./src/util.js"),m=p("./src/event.js"),E=p("./src/task.js"),w=p("./src/base.js"),R=p("./src/advance.js"),t=p("./src/logger.js"),v=p("./package.json"),c={AppId:"",SecretId:"",SecretKey:"",SecurityToken:"",StartTime:0,ExpiredTime:0,ChunkRetryTimes:2,FileParallelLimit:3,ChunkParallelLimit:3,ChunkSize:1024*1024,SliceSize:1024*1024,CopyChunkParallelLimit:20,CopyChunkSize:1024*1024*10,CopySliceSize:1024*1024*10,MaxPartNumber:1e4,ProgressInterval:1e3,Domain:"",ServiceDomain:"",Protocol:"",CompatibilityMode:!1,ForcePathStyle:!1,UseRawKey:!1,Timeout:0,CorrectClockSkew:!0,SystemClockOffset:0,UploadCheckContentMd5:!1,UploadQueueSize:1e4,UploadAddMetaMd5:!1,UploadIdCacheLimit:50,UseAccelerate:!1,ForceSignHost:!0,AutoSwitchHost:!0,CopySourceParser:null,ObjectKeySimplifyCheck:!0,DeepTracker:!1,TrackerDelay:5e3,CustomId:"",BeaconReporter:null,ClsReporter:null,EnableLog:!1,EnableLogcat:!1,LogLevel:"VERBOSE",ClsLogger:null,LogExtras:{}},C=function(y){var O,I,U=this;if(this.options=k.extend(k.clone(c),y||{}),this.options.FileParallelLimit=Math.max(1,this.options.FileParallelLimit),this.options.ChunkParallelLimit=Math.max(1,this.options.ChunkParallelLimit),this.options.ChunkRetryTimes=Math.max(0,this.options.ChunkRetryTimes),this.options.ChunkSize=Math.max(1024*1024,this.options.ChunkSize),this.options.CopyChunkParallelLimit=Math.max(1,this.options.CopyChunkParallelLimit),this.options.CopyChunkSize=Math.max(1024*1024,this.options.CopyChunkSize),this.options.CopySliceSize=Math.max(0,this.options.CopySliceSize),this.options.MaxPartNumber=Math.max(1024,Math.min(1e4,this.options.MaxPartNumber)),this.options.Timeout=Math.max(0,this.options.Timeout),this.options.EnableReporter=this.options.BeaconReporter||this.options.ClsReporter,this.options.AppId&&console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g: "test-1250000000").'),this.options.SecretId&&this.options.SecretId.indexOf(" ")>-1&&(console.error("error: SecretId格式错误，请检查"),console.error("error: SecretId format is incorrect. Please check")),this.options.SecretKey&&this.options.SecretKey.indexOf(" ")>-1&&(console.error("error: SecretKey格式错误，请检查"),console.error("error: SecretKey format is incorrect. Please check")),k.isNode()&&(console.log("Tip: Next.js、Nuxt.js 等服务端渲染技术可正常使用JavaScript SDK，请忽略下方 nodejs 环境警告"),console.warn("warning: cos-js-sdk-v5 不支持 nodejs 环境使用，请改用 cos-nodejs-sdk-v5，参考文档： https://cloud.tencent.com/document/product/436/8629"),console.warn("warning: cos-js-sdk-v5 does not support nodejs environment. Please use cos-nodejs-sdk-v5 instead. See: https://cloud.tencent.com/document/product/436/8629")),this.options.ForcePathStyle)throw console.warn("cos-js-sdk-v5不再支持使用path-style，仅支持使用virtual-hosted-style，参考文档：https://cloud.tencent.com/document/product/436/96243"),new Error("ForcePathStyle is not supported");m.init(this),E.init(this),this.logger=new t({enableLog:this.options.EnableLog,enableLogcat:this.options.EnableLogcat,level:(O=this.options.LogLevel)!==null&&O!==void 0?O:"VERBOSE",clsLogger:this.options.ClsLogger,logExtras:(I=this.options.LogExtras)!==null&&I!==void 0?I:{}}),this.options.EnableLog&&(m.init(this.logger),this.logger.on("log-message",function(F){U.emit("log-message",F)}))};w.init(C,E),R.init(C,E),C.util={md5:k.md5,xml2json:k.xml2json,json2xml:k.json2xml,encodeBase64:k.encodeBase64},C.getAuthorization=k.getAuth,C.version=v.version,T.exports=C},"./src/event.js":function(T,N){var p=function(E){var w={},R=function(v){return!w[v]&&(w[v]=[]),w[v]};E.on=function(t,v){t==="task-list-update"&&console.warn('warning: Event "'+t+'" has been deprecated. Please use "list-update" instead.'),R(t).push(v)},E.off=function(t,v){for(var c=R(t),C=c.length-1;C>=0;C--)v===c[C]&&c.splice(C,1)},E.emit=function(t,v){for(var c=R(t).map(function(l){return l}),C=0;C<c.length;C++)c[C](v)}},k=function(){p(this)};T.exports.init=p,T.exports.EventProxy=k},"./src/logger.js":function(T,N,p){var k=p("./node_modules/@babel/runtime/helpers/classCallCheck.js"),m=p("./node_modules/@babel/runtime/helpers/createClass.js"),E=p("./node_modules/@babel/runtime/helpers/defineProperty.js"),w=p("./package.json"),R=w.version,t=["VERBOSE","DEBUG","INFO","WARN","ERROR"],v=function(){function c(C){var l;k(this,c),E(this,"level","VERBOSE"),E(this,"clsLogger",null),E(this,"logExtras",{}),this.enableLog=(l=C.enableLog)!==null&&l!==void 0?l:!1,this.level=C.level||"VERBOSE",t.includes(this.level)||(this.level="VERBOSE"),this.enableLogcat=C.enableLogcat,this.clsLogger=C.clsLogger,this.logExtras=C.logExtras}return m(c,[{key:"info",value:function(){if(["VERBOSE","INFO"].includes(this.level)){for(var l=arguments.length,y=new Array(l),O=0;O<l;O++)y[O]=arguments[O];this.log.apply(this,["info"].concat(y))}}},{key:"debug",value:function(){if(["VERBOSE","DEBUG"].includes(this.level)){for(var l=arguments.length,y=new Array(l),O=0;O<l;O++)y[O]=arguments[O];this.log.apply(this,["debug"].concat(y))}}},{key:"warn",value:function(){if(["VERBOSE","WARN"].includes(this.level)){for(var l=arguments.length,y=new Array(l),O=0;O<l;O++)y[O]=arguments[O];this.log.apply(this,["warn"].concat(y))}}},{key:"error",value:function(){if(["VERBOSE","ERROR"].includes(this.level)){for(var l=arguments.length,y=new Array(l),O=0;O<l;O++)y[O]=arguments[O];this.log.apply(this,["error"].concat(y))}}},{key:"log",value:function(){if(this.enableLog){var l=arguments.length<=0?void 0:arguments[0],y=arguments.length<=1?void 0:arguments[1],O=y.cate,I=O===void 0?"base":O,U=y.tag,F=U===void 0?"base":U,q=y.msg,K={version:"cos-js-sdk-v5-".concat(R),timestamp:new Date().toISOString(),cate:"[".concat(I.toUpperCase(),"]"),tag:"[".concat(F.toUpperCase(),"]"),msg:q,extras:this.logExtras};this.enableLogcat&&console[l]("[".concat(K.version,"] ").concat(K.timestamp," ").concat(K.cate," ").concat(K.tag," ").concat(K.msg," ").concat(K.extras?JSON.stringify(K.extras):"")),this.clsLogger&&this.clsLogger.log(K,!1),this.emit("log-message",K)}}}])}();T.exports=v},"./src/session.js":function(T,N,p){var k=p("./src/util.js"),m="cos_sdk_upload_cache",E=30*24*3600,w,R,t=function(){try{var O=JSON.parse(localStorage.getItem(m))}catch{}O||(O=[]),w=O},v=function(){try{w.length?localStorage.setItem(m,JSON.stringify(w)):localStorage.removeItem(m)}catch{}},c=function(){if(!w){t.call(this);for(var O=!1,I=Math.round(Date.now()/1e3),U=w.length-1;U>=0;U--){var F=w[U][2];(!F||F+E<I)&&(w.splice(U,1),O=!0)}O&&v()}},C=function(){R||(R=setTimeout(function(){v(),R=null},400))},l={using:{},setUsing:function(O){l.using[O]=!0},removeUsing:function(O){delete l.using[O]},getFileId:function(O,I,U,F){return O.name&&O.size&&O.lastModifiedDate&&I?k.md5([O.name,O.size,O.lastModifiedDate,I,U,F].join("::")):null},getCopyFileId:function(O,I,U,F,q){var K=I["content-length"],g=I.etag||"",d=I["last-modified"];return O&&U?k.md5([O,K,g,d,U,F,q].join("::")):null},getUploadIdList:function(O){if(!O)return null;c.call(this);for(var I=[],U=0;U<w.length;U++)w[U][0]===O&&I.push(w[U][1]);return I.length?I:null},saveUploadId:function(O,I,U){if(c.call(this),!!O){for(var F=w.length-1;F>=0;F--){var q=w[F];q[0]===O&&q[1]===I&&w.splice(F,1)}w.unshift([O,I,Math.round(Date.now()/1e3)]),w.length>U&&w.splice(U),C()}},removeUploadId:function(O){c.call(this),delete l.using[O];for(var I=w.length-1;I>=0;I--)w[I][1]===O&&w.splice(I,1);C()}};T.exports=l},"./src/task.js":function(T,N,p){var k=p("./src/session.js"),m=p("./src/util.js"),E={},w=function(v,c){E[c]=v[c],v[c]=function(C,l){C.SkipTask?E[c].call(this,C,l):this._addTask(c,C,l)}},R=function(v){var c=[],C={},l=0,y=0,O=function(d){var B={id:d.id,Bucket:d.Bucket,Region:d.Region,Key:d.Key,FilePath:d.FilePath,state:d.state,loaded:d.loaded,size:d.size,speed:d.speed,percent:d.percent,hashPercent:d.hashPercent,error:d.error};return d.FilePath&&(B.FilePath=d.FilePath),d._custom&&(B._custom=d._custom),B},I=function(){var g,d=function(){g=0,v.emit("task-list-update",{list:m.map(c,O)}),v.emit("list-update",{list:m.map(c,O)})};return function(){g||(g=setTimeout(d))}}(),U=function(){if(!(c.length<=v.options.UploadQueueSize)){for(var d=0;d<y&&d<c.length&&c.length>v.options.UploadQueueSize;){var B=c[d].state==="waiting"||c[d].state==="checking"||c[d].state==="uploading";!c[d]||!B?(C[c[d].id]&&delete C[c[d].id],c.splice(d,1),y--):d++}I()}},F=function(){if(!(l>=v.options.FileParallelLimit)){for(;c[y]&&c[y].state!=="waiting";)y++;if(!(y>=c.length)){var d=c[y];y++,l++,d.state="checking",d.params.onTaskStart&&d.params.onTaskStart(O(d)),!d.params.UploadData&&(d.params.UploadData={});var B=m.formatParams(d.api,d.params);E[d.api].call(v,B,function(i,n){v._isRunningTask(d.id)&&((d.state==="checking"||d.state==="uploading")&&(d.state=i?"error":"success",i&&(d.error=i),l--,I(),F(),d.callback&&d.callback(i,n),d.state==="success"&&(d.params&&(delete d.params.UploadData,delete d.params.Body,delete d.params),delete d.callback)),U())}),I(),setTimeout(F)}}},q=function(d,B){var i=C[d];if(i){var n=i&&i.state==="waiting",r=i&&(i.state==="checking"||i.state==="uploading");if(B==="canceled"&&i.state!=="canceled"||B==="paused"&&n||B==="paused"&&r){i.state=B,v.emit("inner-kill-task",{TaskId:d,toState:B});try{var s=i&&i.params&&i.params.UploadData.UploadId}catch{}B==="canceled"&&s&&k.removeUsing(s),I(),r&&(l--,F()),B==="canceled"&&(i.params&&(delete i.params.UploadData,delete i.params.Body,delete i.params),delete i.callback)}U()}};v._addTasks=function(g){m.each(g,function(d){v._addTask(d.api,d.params,d.callback,!0)}),I()};var K=!0;v._addTask=function(g,d,B,i){d=m.formatParams(g,d);var n=m.uuid();d.TaskId=n,d.onTaskReady&&d.onTaskReady(n),d.TaskReady&&(d.TaskReady(n),K&&console.warn('warning: Param "TaskReady" has been deprecated. Please use "onTaskReady" instead.'),K=!1);var r={params:d,callback:B,api:g,index:c.length,id:n,Bucket:d.Bucket,Region:d.Region,Key:d.Key,FilePath:d.FilePath||"",state:"waiting",loaded:0,size:0,speed:0,percent:0,hashPercent:0,error:null,_custom:d._custom},s=d.onHashProgress;d.onHashProgress=function(b){v._isRunningTask(r.id)&&(r.hashPercent=b.percent,s&&s(b),I())};var a=d.onProgress;return d.onProgress=function(b){v._isRunningTask(r.id)&&(r.state==="checking"&&(r.state="uploading"),r.loaded=b.loaded,r.speed=b.speed,r.percent=b.percent,a&&a(b),I())},m.getFileSize(g,d,function(b,M){if(b)return B(m.error(b));C[n]=r,c.push(r),r.size=M,!i&&I(),F(),U()}),n},v._isRunningTask=function(g){var d=C[g];return!!(d&&(d.state==="checking"||d.state==="uploading"))},v.getTaskList=function(){return m.map(c,O)},v.cancelTask=function(g){q(g,"canceled")},v.pauseTask=function(g){q(g,"paused")},v.restartTask=function(g){var d=C[g];d&&(d.state==="paused"||d.state==="error")&&(d.state="waiting",I(),y=Math.min(y,d.index),F())},v.isUploadRunning=function(){return l||y<c.length}};T.exports.transferToTaskMethod=w,T.exports.init=R},"./src/tracker.js":function(T,N,p){var k=p("./node_modules/@babel/runtime/helpers/classCallCheck.js"),m=p("./node_modules/@babel/runtime/helpers/createClass.js"),E=p("./node_modules/@babel/runtime/helpers/typeof.js"),w=p("./package.json"),R=null,t=function(B,i){if(!R){if(typeof B!="function")throw new Error("Beacon not found");R=new B({appkey:"0WEB05PY6MHRGK0U",versionCode:w.version,channelID:"js_sdk",openid:"openid",unionid:"unid",strictMode:!1,delay:i,sessionDuration:60*1e3})}return R},v=function(B){return!B||B<0?0:(B/1e3).toFixed(3)},c={getUid:function(){var B=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return B()+B()+"-"+B()+"-"+B()+"-"+B()+"-"+B()+B()+B()},getNetType:function(){if((typeof navigator>"u"?"undefined":E(navigator))==="object"){var B=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(B==null?void 0:B.type)||(B==null?void 0:B.effectiveType)||"unknown"}return"unknown"},getProtocol:function(){return(typeof location>"u"?"undefined":E(location))==="object"?location.protocol.replace(/:/,""):"unknown protocol"},getOsType:function(){if((typeof navigator>"u"?"undefined":E(navigator))!=="object")return"unknown os";var B=navigator.userAgent.toLowerCase(),i=/macintosh|mac os x/i.test(navigator.userAgent);return B.indexOf("win32")>=0||B.indexOf("wow32")>=0?"win32":B.indexOf("win64")>=0||B.indexOf("wow64")>=0?"win64":i?"mac":"unknown os"},isMobile:function(){var B=/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i;return!!((typeof navigator>"u"?"undefined":E(navigator))==="object"&&navigator.userAgent.match(B))},isAndroid:function(){var B=/(Android|Adr|Linux)/i;return!!((typeof navigator>"u"?"undefined":E(navigator))==="object"&&navigator.userAgent.match(B))},isIOS:function(){var B=/(iPhone|iPod|iPad|iOS)/i;return!!((typeof navigator>"u"?"undefined":E(navigator))==="object"&&navigator.userAgent.match(B))},isOtherMobile:function(){return C&&!isAndroid&&!isIOS},getUA:function(){if((typeof navigator>"u"?"undefined":E(navigator))!=="object")return"unknown device";var B=navigator.userAgent;return B}},C=c.isMobile(),l=c.isAndroid()?"android":c.isIOS?"ios":"other_mobile",y=c.getOsType(),O=C?l:y,I=c.getUA(),U=c.getProtocol(),F=function(B){return["putObject","sliceUploadFile","uploadFile","uploadFiles"].includes(B)?"UploadTask":B==="getObject"?"DownloadTask":["putObjectCopy","sliceCopyFile"].includes(B)?"CopyTask":B};function q(d){return d.replace(/([A-Z])/g,"_$1").toLowerCase()}function K(d){var B={},i=["sdkVersionName","sdkVersionCode","osName","networkType","requestName","requestResult","bucket","region","appid","accelerate","url","host","requestPath","userAgent","networkProtocol","httpMethod","httpSize","httpSpeed","httpTookTime","httpMd5","httpSign","httpFullTime","httpDomain","partNumber","httpRetryTimes","customId","traceId","realApi"],n=[].concat(i,["errorNode","errorCode","errorName","errorMessage","errorRequestId","errorHttpCode","errorServiceName","errorType","fullError"]),r=d.requestResult==="Success"?i:n;for(var s in d)if(r.includes(s)){var a=q(s);B[a]=d[s]}return B.request_name=d.realApi?F(d.realApi):d.requestName,B}var g=function(){function d(B){k(this,d);var i=B.parent,n=B.traceId,r=B.bucket,s=B.region,a=B.apiName,b=B.realApi,M=B.httpMethod,P=B.fileKey,$=B.fileSize,D=B.accelerate,te=B.customId,ne=B.delay,ae=B.deepTracker,ue=B.Beacon,Se=B.clsReporter,ve=r&&r.substr(r.lastIndexOf("-")+1)||"";this.parent=i,this.deepTracker=ae,this.delay=ne,Se&&!this.clsReporter&&(this.clsReporter=Se),this.params={sdkVersionName:"cos-js-sdk-v5",sdkVersionCode:w.version,osName:O,networkType:"",requestName:a||"",requestResult:"",realApi:b,bucket:r,region:s,accelerate:D,httpMethod:M,url:"",host:"",httpDomain:"",requestPath:P||"",userAgent:I,networkProtocol:U,errorType:"",errorCode:"",errorName:"",errorMessage:"",errorRequestId:"",errorHttpCode:0,errorServiceName:"",errorNode:"",httpTookTime:0,httpSize:$||0,httpMd5:0,httpSign:0,httpFullTime:0,httpSpeed:0,md5StartTime:0,md5EndTime:0,signStartTime:0,signEndTime:0,httpStartTime:0,httpEndTime:0,startTime:new Date().getTime(),endTime:0,traceId:n||c.getUid(),appid:ve,partNumber:0,httpRetryTimes:0,customId:te||"",partTime:0},ue&&(this.beacon=t(ue,ne))}return m(d,[{key:"formatResult",value:function(i,n){var r,s,a,b,M,P,$=new Date().getTime(),D=c.getNetType(),te=i?(i==null?void 0:i.code)||(i==null||(r=i.error)===null||r===void 0?void 0:r.code)||(i==null||(s=i.error)===null||s===void 0?void 0:s.Code):"",ne=i?(i==null?void 0:i.message)||(i==null||(a=i.error)===null||a===void 0?void 0:a.message)||(i==null||(b=i.error)===null||b===void 0?void 0:b.Message):"",ae=ne,ue=i?(i==null?void 0:i.resource)||(i==null||(M=i.error)===null||M===void 0?void 0:M.resource)||(i==null||(P=i.error)===null||P===void 0?void 0:P.Resource):"",Se=i?i==null?void 0:i.statusCode:n.statusCode,ve=i?(i==null?void 0:i.headers)&&(i==null?void 0:i.headers["x-cos-request-id"]):(n==null?void 0:n.headers)&&(n==null?void 0:n.headers["x-cos-request-id"]),oe=i?ve?"Server":"Client":"";this.params.requestName==="getObject"&&(this.params.httpSize=n?n.headers&&n.headers["content-length"]:0);var ie=this.params.realApi==="sliceUploadFile",Q=this.params.realApi==="sliceCopyFile";if(ie||Q){var le=this.params.httpSize/1024/this.params.partTime;Object.assign(this.params,{httpSpeed:le<0?0:le.toFixed(3)})}else{var pe=$-this.params.startTime,me=this.params.httpEndTime-this.params.httpStartTime,de=this.params.httpSize/1024/(me/1e3),ce=this.params.md5EndTime-this.params.md5StartTime,W=this.params.signEndTime-this.params.signStartTime;this.parent&&(this.parent.addParamValue("httpTookTime",v(me)),this.parent.addParamValue("httpFullTime",v(pe)),this.parent.addParamValue("httpMd5",v(ce)),this.parent.addParamValue("httpSign",v(W)),["multipartUpload","uploadPartCopy","putObjectCopy"].includes(this.params.requestName)&&this.parent.addParamValue("partTime",v(me))),Object.assign(this.params,{httpFullTime:v(pe),httpMd5:v(ce),httpSign:v(W),httpTookTime:v(me),httpSpeed:de<0?0:de.toFixed(3)})}if(Object.assign(this.params,{networkType:D,requestResult:i?"Failure":"Success",errorType:oe,errorCode:te,errorHttpCode:Se,errorName:ae,errorMessage:ne,errorServiceName:ue,errorRequestId:ve}),i&&(!te||!ne)&&(this.params.fullError=i?JSON.stringify(i):""),this.params.url){try{var Y=/^http(s)?:\/\/(.*?)\//.exec(this.params.url);this.params.host=Y[2]}catch{this.params.host=this.params.url}this.params.httpDomain=this.params.host}}},{key:"report",value:function(i,n){if(!(!this.beacon&&!this.clsReporter)){this.formatResult(i,n);var r=K(this.params);this.beacon&&this.sendEventsToBeacon(r),this.clsReporter&&this.sendEventsToCLS(r)}}},{key:"setParams",value:function(i){Object.assign(this.params,i)}},{key:"addParamValue",value:function(i,n){this.params[i]=(+this.params[i]+ +n).toFixed(3)}},{key:"sendEventsToBeacon",value:function(i){var n=this.params.requestName==="sliceUploadFile"||this.params.realApi==="sliceUploadFile";if(!(n&&!this.deepTracker)){var r="qcloud_track_cos_sdk";this.delay===0?this.beacon&&this.beacon.onDirectUserAction(r,i):this.beacon&&this.beacon.onUserAction(r,i)}}},{key:"sendEventsToCLS",value:function(i){var n=this.delay===0;this.clsReporter.log(i,n)}},{key:"generateSubTracker",value:function(i){return Object.assign(i,{parent:this,deepTracker:this.deepTracker,traceId:this.params.traceId,bucket:this.params.bucket,region:this.params.region,accelerate:this.params.accelerate,fileKey:this.params.requestPath,customId:this.params.customId,delay:this.delay,clsReporter:this.clsReporter}),new d(i)}}])}();T.exports=g},"./src/util.js":function(T,N,p){(function(k){var m=p("./node_modules/@babel/runtime/helpers/typeof.js");function E(X,L){var z=typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(!z){if(Array.isArray(X)||(z=w(X))||L){z&&(X=z);var H=0,J=function(){};return{s:J,n:function(){return H>=X.length?{done:!0}:{done:!1,value:X[H++]}},e:function(Ee){throw Ee},f:J}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re,fe=!0,xe=!1;return{s:function(){z=z.call(X)},n:function(){var Ee=z.next();return fe=Ee.done,Ee},e:function(Ee){xe=!0,re=Ee},f:function(){try{fe||z.return==null||z.return()}finally{if(xe)throw re}}}}function w(X,L){if(X){if(typeof X=="string")return R(X,L);var z={}.toString.call(X).slice(8,-1);return z==="Object"&&X.constructor&&(z=X.constructor.name),z==="Map"||z==="Set"?Array.from(X):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?R(X,L):void 0}}function R(X,L){(L==null||L>X.length)&&(L=X.length);for(var z=0,H=Array(L);z<L;z++)H[z]=X[z];return H}var t=p("./lib/md5.js"),v=p("./lib/crypto.js"),c=p("./node_modules/fast-xml-parser/src/fxp.js"),C=c.XMLParser,l=c.XMLBuilder,y=new C({ignoreDeclaration:!0,ignoreAttributes:!0,parseTagValue:!1,trimValues:!1}),O=new l,I=p("./lib/base64.js"),U=p("./src/tracker.js"),F="#text",q=function(L){if(pe(L))for(var z in L){var H=L[z];typeof H=="string"?z===F&&delete L[z]:Array.isArray(H)?H.forEach(function(J){q(J)}):pe(H)&&q(H)}},K=function(L){var z=y.parse(L);return q(z),z},g=function(L){var z=O.build(L);return z};function d(X){return encodeURIComponent(X).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function B(X,L){var z=[];for(var H in X)X.hasOwnProperty(H)&&z.push(L?d(H).toLowerCase():H);return z.sort(function(J,re){return J=J.toLowerCase(),re=re.toLowerCase(),J===re?0:J>re?1:-1})}var i=function(L,z){var H,J,re,fe=[],xe=B(L);for(H=0;H<xe.length;H++)J=xe[H],re=L[J]===void 0||L[J]===null?"":""+L[J],J=z?d(J).toLowerCase():d(J),re=d(re)||"",fe.push(J+"="+re);return fe.join("&")},n=["cache-control","content-disposition","content-encoding","content-length","content-md5","expect","expires","host","if-match","if-modified-since","if-none-match","if-unmodified-since","origin","range","transfer-encoding","pic-operations"],r=function(L){var z={};for(var H in L){var J=H.toLowerCase();(J.indexOf("x-cos-")>-1||J.indexOf("x-ci-")>-1||n.indexOf(J)>-1)&&(z[H]=L[H])}return z},s=function(L){L=L||{};var z=L.SecretId,H=L.SecretKey,J=L.KeyTime,re=(L.method||L.Method||"get").toLowerCase(),fe=oe(L.Query||L.params||{}),xe=r(oe(L.Headers||L.headers||{})),Re=L.Key||"",Ee;L.UseRawKey?Ee=L.Pathname||L.pathname||"/"+Re:(Ee=L.Pathname||L.pathname||Re,Ee.indexOf("/")!==0&&(Ee="/"+Ee));var Ue=L.ForceSignHost!==!1;if(!xe.Host&&!xe.host&&L.Bucket&&L.Region&&Ue&&(xe.Host=L.Bucket+".cos."+L.Region+".myqcloud.com"),!z)throw new Error("missing param SecretId");if(!H)throw new Error("missing param SecretKey");var $e=Math.round(ut(L.SystemClockOffset)/1e3)-1,_e=$e,Ye=L.Expires||L.expires;Ye===void 0?_e+=900:_e+=Ye*1||0;var ct="sha1",tt=z,Oe=J||$e+";"+_e,ot=J||$e+";"+_e,et=B(xe,!0).join(";").toLowerCase(),gt=B(fe,!0).join(";").toLowerCase(),kt=v.HmacSHA1(ot,H).toString(),Ht=[re,Ee,We.obj2str(fe,!0),We.obj2str(xe,!0),""].join(`
`),Kt=["sha1",Oe,v.SHA1(Ht).toString(),""].join(`
`),se=v.HmacSHA1(Kt,kt).toString(),$t=["q-sign-algorithm="+ct,"q-ak="+tt,"q-sign-time="+Oe,"q-key-time="+ot,"q-header-list="+et,"q-url-param-list="+gt,"q-signature="+se].join("&");return $t},a=function(L,z,H){var J=z/8,re=L.slice(H,H+J);return new Uint8Array(re).reverse(),new{8:Uint8Array,16:Uint16Array,32:Uint32Array}[z](re)[0]},b=function(L,z,H,J){var re=L.slice(z,H),fe="";return new Uint8Array(re).forEach(function(xe){fe+=String.fromCharCode(xe)}),J&&(fe=decodeURIComponent(escape(fe))),fe},M=function(L){for(var z={},H=b(L),J={records:[]};L.byteLength;){var re=a(L,32,0),fe=a(L,32,4),xe=re-fe-16,Re=0,Ee;for(L=L.slice(12);Re<fe;){var Ue=a(L,8,Re),$e=b(L,Re+1,Re+1+Ue),_e=a(L,16,Re+Ue+2),Ye=b(L,Re+Ue+4,Re+Ue+4+_e);z[$e]=Ye,Re+=Ue+4+_e}if(z[":event-type"]==="Records")Ee=b(L,Re,Re+xe,!0),J.records.push(Ee);else if(z[":event-type"]==="Stats")Ee=b(L,Re,Re+xe,!0),J.stats=We.xml2json(Ee).Stats;else if(z[":event-type"]==="error"){var ct=z[":error-code"],tt=z[":error-message"],Oe=new Error(tt);Oe.message=tt,Oe.name=Oe.code=ct,J.error=Oe}L=L.slice(Re+xe+4)}return{payload:J.records.join(""),body:H}},P=function(L){var z=this.options.CopySourceParser;if(z)return z(L);var H=L.match(/^([^.]+-\d+)\.cos(v6|-cdc|-cdz|-internal)?\.([^.]+)\.((myqcloud\.com)|(tencentcos\.cn))\/(.+)$/);return H?{Bucket:H[1],Region:H[3],Key:H[7]}:null},$=function(){},D=function(L){var z={};for(var H in L)L.hasOwnProperty(H)&&L[H]!==void 0&&L[H]!==null&&(z[H]=L[H]);return z},te=function(L,z){var H,J=new FileReader;FileReader.prototype.readAsBinaryString?(H=FileReader.prototype.readAsBinaryString,J.onload=function(){z(this.result)}):FileReader.prototype.readAsArrayBuffer?H=function(fe){var xe="",Re=new FileReader;Re.onload=function(Ee){for(var Ue=new Uint8Array(Re.result),$e=Ue.byteLength,_e=0;_e<$e;_e++)xe+=String.fromCharCode(Ue[_e]);z(xe)},Re.readAsArrayBuffer(fe)}:console.error("FileReader not support readAsBinaryString"),H.call(J,L)},ne=function(){var X=function(H,J){H=H.split("."),J=J.split(".");for(var re=0;re<J.length;re++)if(H[re]!==J[re])return parseInt(H[re])>parseInt(J[re])?1:-1;return 0},L=function(H){if(!H)return!1;var J=(H.match(/Chrome\/([.\d]+)/)||[])[1],re=(H.match(/QBCore\/([.\d]+)/)||[])[1],fe=(H.match(/QQBrowser\/([.\d]+)/)||[])[1],xe=J&&X(J,"53.0.2785.116")<0&&re&&X(re,"3.53.991.400")<0&&fe&&X(fe,"9.0.2524.400")<=0||!1;return xe};return L(typeof navigator<"u"&&navigator.userAgent)}(),ae=function(L,z,H,J,re){var fe;if(L.slice?fe=L.slice(z,H):L.mozSlice?fe=L.mozSlice(z,H):L.webkitSlice&&(fe=L.webkitSlice(z,H)),J&&ne){var xe=new FileReader;xe.onload=function(Re){fe=null,re(new Blob([xe.result]))},xe.readAsArrayBuffer(fe)}else re(fe)},ue=function(L,z,H,J){H=H||$,L?typeof z=="string"?H(We.md5(z,!0)):Blob&&z instanceof Blob?We.getFileMd5(z,function(re,fe){H(fe)},J):H():H()},Se=1024*1024,ve=function(L,z,H){var J=L.size,re=0,fe=t.getCtx(),xe=function(Ee){if(Ee>=J){var Ue=fe.digest("hex");z(null,Ue);return}var $e=Math.min(J,Ee+Se);We.fileSlice(L,Ee,$e,!1,function(_e){te(_e,function(Ye){_e=null,fe=fe.update(Ye,!0),re+=Ye.length,Ye=null,H&&H({loaded:re,total:J,percent:Math.round(re/J*1e4)/1e4}),xe(Ee+Se)})})};xe(0)};function oe(X){return W(X,function(L){return m(L)==="object"&&L!==null?oe(L):L})}function ie(X,L,z){return X&&L in X?X[L]:z}function Q(X,L){return ce(L,function(z,H){X[H]=L[H]}),X}function le(X){return X instanceof Array}function pe(X){return Object.prototype.toString.call(X)==="[object Object]"}function me(X,L){for(var z=!1,H=0;H<X.length;H++)if(L===X[H]){z=!0;break}return z}function de(X){return le(X)?X:[X]}function ce(X,L){for(var z in X)X.hasOwnProperty(z)&&L(X[z],z)}function W(X,L){var z=le(X)?[]:{};for(var H in X)X.hasOwnProperty(H)&&(z[H]=L(X[H],H));return z}function Y(X,L){var z=le(X),H=z?[]:{};for(var J in X)X.hasOwnProperty(J)&&L(X[J],J)&&(z?H.push(X[J]):H[J]=X[J]);return H}var Z=function(L){var z,H,J,re="";for(z=0,H=L.length/2;z<H;z++)J=parseInt(L[z*2]+L[z*2+1],16),re+=String.fromCharCode(J);return btoa(re)},be=function(){var L=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return L()+L()+"-"+L()+"-"+L()+"-"+L()+"-"+L()+L()+L()},he=function(L,z){var H=z.Bucket,J=z.Region,re=z.Key,fe=this.options.Domain,xe=!fe||typeof fe=="string"&&fe.indexOf("{Bucket}")>-1,Re=!fe||typeof fe=="string"&&fe.indexOf("{Region}")>-1;if(L.indexOf("Bucket")>-1||L==="deleteMultipleObject"||L==="multipartList"||L==="listObjectVersions"){if(xe&&!H)return"Bucket";if(Re&&!J)return"Region"}else if(L.indexOf("Object")>-1||L.indexOf("multipart")>-1||L==="sliceUploadFile"||L==="abortUploadTask"||L==="uploadFile"){if(xe&&!H)return"Bucket";if(Re&&!J)return"Region";if(!re)return"Key"}return!1},Te=function(L,z){if(z=Q({},z),L!=="getAuth"&&L!=="getV4Auth"&&L!=="getObjectUrl"){var H=z.Headers||{};if(z&&m(z)==="object"){(function(){for(var re in z)z.hasOwnProperty(re)&&re.indexOf("x-cos-")>-1&&(H[re]=z[re])})();var J={"x-cos-mfa":"MFA","Content-MD5":"ContentMD5","Content-Length":"ContentLength","Content-Type":"ContentType",Expect:"Expect",Expires:"Expires","Cache-Control":"CacheControl","Content-Disposition":"ContentDisposition","Content-Encoding":"ContentEncoding",Range:"Range","If-Modified-Since":"IfModifiedSince","If-Unmodified-Since":"IfUnmodifiedSince","If-Match":"IfMatch","If-None-Match":"IfNoneMatch","x-cos-copy-source":"CopySource","x-cos-copy-source-Range":"CopySourceRange","x-cos-metadata-directive":"MetadataDirective","x-cos-copy-source-If-Modified-Since":"CopySourceIfModifiedSince","x-cos-copy-source-If-Unmodified-Since":"CopySourceIfUnmodifiedSince","x-cos-copy-source-If-Match":"CopySourceIfMatch","x-cos-copy-source-If-None-Match":"CopySourceIfNoneMatch","x-cos-acl":"ACL","x-cos-grant-read":"GrantRead","x-cos-grant-write":"GrantWrite","x-cos-grant-full-control":"GrantFullControl","x-cos-grant-read-acp":"GrantReadAcp","x-cos-grant-write-acp":"GrantWriteAcp","x-cos-storage-class":"StorageClass","x-cos-traffic-limit":"TrafficLimit","x-cos-mime-limit":"MimeLimit","x-cos-server-side-encryption-customer-algorithm":"SSECustomerAlgorithm","x-cos-server-side-encryption-customer-key":"SSECustomerKey","x-cos-server-side-encryption-customer-key-MD5":"SSECustomerKeyMD5","x-cos-server-side-encryption":"ServerSideEncryption","x-cos-server-side-encryption-cos-kms-key-id":"SSEKMSKeyId","x-cos-server-side-encryption-context":"SSEContext","Pic-Operations":"PicOperations","x-cos-callback":"Callback","x-cos-callback-var":"CallbackVar","x-cos-return-body":"ReturnBody"};We.each(J,function(re,fe){z[re]!==void 0&&(H[fe]=z[re])}),z.Headers=D(H)}}return z},Me=function(L,z){return function(H,J){var re=this;typeof H=="function"&&(J=H,H={}),H=Te(L,H);var fe;if(re.options.EnableReporter)if(H.calledBySdk==="sliceUploadFile"||H.calledBySdk==="sliceCopyFile")fe=H.tracker&&H.tracker.generateSubTracker({apiName:L});else if(["uploadFile","uploadFiles"].includes(L))fe=null;else{var xe=0;H.Body&&(xe=typeof H.Body=="string"?H.Body.length:H.Body.size||H.Body.byteLength||0);var Re=re.options.UseAccelerate||typeof re.options.Domain=="string"&&re.options.Domain.includes("accelerate.");fe=new U({Beacon:re.options.BeaconReporter,clsReporter:re.options.ClsReporter,bucket:H.Bucket,region:H.Region,apiName:L,realApi:L,accelerate:Re,fileKey:H.Key,fileSize:xe,deepTracker:re.options.DeepTracker,customId:re.options.CustomId,delay:re.options.TrackerDelay})}H.tracker=fe;var Ee=function(Oe){return Oe&&Oe.headers&&(Oe.headers["x-ci-request-id"]&&(Oe.RequestId=Oe.headers["x-ci-request-id"]),Oe.headers["x-cos-request-id"]&&(Oe.RequestId=Oe.headers["x-cos-request-id"]),Oe.headers["x-cos-version-id"]&&(Oe.VersionId=Oe.headers["x-cos-version-id"]),Oe.headers["x-cos-delete-marker"]&&(Oe.DeleteMarker=Oe.headers["x-cos-delete-marker"])),Oe},Ue=function(Oe,ot){fe&&fe.report(Oe,ot),J&&J(Ee(Oe),Ee(ot))},$e=function(){if(L!=="getService"&&L!=="abortUploadTask"){var Oe=he.call(re,L,H);if(Oe)return"missing param "+Oe;if(H.Region){if(re.options.CompatibilityMode){if(!/^([a-z\d-.]+)$/.test(H.Region))return"Region format error."}else{if(H.Region.indexOf("cos.")>-1)return'param Region should not be start with "cos."';if(!/^([a-z\d-]+)$/.test(H.Region))return"Region format error."}!re.options.CompatibilityMode&&H.Region.indexOf("-")===-1&&H.Region!=="yfb"&&H.Region!=="default"&&H.Region!=="accelerate"&&console.warn("warning: param Region format error, find help here: https://cloud.tencent.com/document/product/436/6224")}if(H.Bucket){if(!/^([a-z\d-]+)-(\d+)$/.test(H.Bucket))if(H.AppId)H.Bucket=H.Bucket+"-"+H.AppId;else if(re.options.AppId)H.Bucket=H.Bucket+"-"+re.options.AppId;else return'Bucket should format as "test-1250000000".';H.AppId&&(console.warn('warning: AppId has been deprecated, Please put it at the end of parameter Bucket(E.g Bucket:"test-1250000000" ).'),delete H.AppId)}!re.options.UseRawKey&&H.Key&&H.Key.substr(0,1)==="/"&&(H.Key=H.Key.substr(1))}},_e=$e(),Ye=["getAuth","getObjectUrl"].includes(L);if(typeof Promise=="function"&&!Ye&&!J)return new Promise(function(tt,Oe){if(J=function(et,gt){et?Oe(et):tt(gt)},_e)return Ue(We.error(new Error(_e)));z.call(re,H,Ue)});if(_e)return Ue(We.error(new Error(_e)));var ct=z.call(re,H,Ue);if(Ye)return ct}},Le=function(L,z){var H=this,J=0,re=0,fe=Date.now(),xe,Re;function Ee(){if(Re=0,z&&typeof z=="function"){xe=Date.now();var Ue=Math.max(0,Math.round((re-J)/((xe-fe)/1e3)*100)/100)||0,$e;re===0&&L===0?$e=1:$e=Math.floor(re/L*100)/100||0,fe=xe,J=re;try{z({loaded:re,total:L,speed:Ue,percent:$e})}catch{}}}return function(Ue,$e){if(Ue&&(re=Ue.loaded,L=Ue.total),$e)clearTimeout(Re),Ee();else{if(Re)return;Re=setTimeout(Ee,H.options.ProgressInterval)}}},Ve=function(L,z,H){var J;if(typeof z.Body=="string"?z.Body=new Blob([z.Body],{type:"text/plain"}):z.Body instanceof ArrayBuffer&&(z.Body=new Blob([z.Body])),z.Body&&(z.Body instanceof Blob||z.Body.toString()==="[object File]"||z.Body.toString()==="[object Blob]"))J=z.Body.size;else{H(We.error(new Error("params body format error, Only allow File|Blob|String.")));return}z.ContentLength=J,H(null,J)},ut=function(L){return Date.now()+(L||0)},Je=function(L,z){var H=L;return L.message=L.message||null,typeof z=="string"?(L.error=z,L.message=z):m(z)==="object"&&z!==null&&(Q(L,z),(z.code||z.name)&&(L.code=z.code||z.name),z.message&&(L.message=z.message),z.stack&&(L.stack=z.stack)),typeof Object.defineProperty=="function"&&(Object.defineProperty(L,"name",{writable:!0,enumerable:!1}),Object.defineProperty(L,"message",{enumerable:!0})),L.name=z&&z.name||L.name||L.code||"Error",L.code||(L.code=L.name),L.error||(L.error=oe(H)),L},it=function(){return(typeof globalThis>"u"?"undefined":m(globalThis))==="object"&&(globalThis.constructor.name==="DedicatedWorkerGlobalScope"||globalThis.FileReaderSync)},bt=function(){return(typeof window>"u"?"undefined":m(window))!=="object"&&(typeof k>"u"?"undefined":m(k))==="object"&&!0&&!it()},Ut=function(L){return/^https?:\/\/([^/]+\.)?ci\.[^/]+/.test(L)},Nt=function(){if((typeof navigator>"u"?"undefined":m(navigator))!=="object")return!1;var X=navigator.userAgent,L=!!X.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return L}(),jt=function(){return(typeof navigator>"u"?"undefined":m(navigator))!=="object"?!1:/\sQQ/i.test(navigator.userAgent)}(),Mt=function(L,z){var H=I.encode(L);return z&&(H=H.replaceAll("+","-").replaceAll("/","_").replaceAll("=","")),H},Ft=function(L){return L?I.decode(L):""},_t=function(L){var z=L.split("/"),H=[],J=E(z),re;try{for(J.s();!(re=J.n()).done;){var fe=re.value;fe===".."?H.length&&H.pop():fe.length&&fe!=="."&&H.push(fe)}}catch(xe){J.e(xe)}finally{J.f()}return"/"+H.join("/")},zt=function(L){var z;if(L&&typeof L=="string"){var H=L.trim(),J=H.indexOf("<")===0,re=H.indexOf("{")===0;if(J)z=We.xml2json(L)||{};else if(re)try{var fe=L.replace(/\n/g," "),xe=JSON.parse(fe);Object.prototype.toString.call(xe)==="[object Object]"?z=xe:z=L}catch{z=L}else z=L}else z=L||{};return z},We={noop:$,formatParams:Te,apiWrapper:Me,xml2json:K,json2xml:g,md5:t,clearKey:D,fileSlice:ae,getBodyMd5:ue,getFileMd5:ve,b64:Z,extend:Q,isArray:le,isInArray:me,makeArray:de,each:ce,map:W,filter:Y,clone:oe,attr:ie,uuid:be,camSafeUrlEncode:d,throttleOnProgress:Le,getFileSize:Ve,getSkewTime:ut,error:Je,obj2str:i,getAuth:s,parseSelectPayload:M,getSourceParams:P,isBrowser:!0,isNode:bt,isCIHost:Ut,isIOS_QQ:Nt&&jt,encodeBase64:Mt,decodeBase64:Ft,simplifyPath:_t,readAsBinaryString:te,parseResBody:zt};T.exports=We}).call(this,p("./node_modules/process/browser.js"))}})})}(It)),It.exports}var Ti=wi();const Ei=jn(Ti);export{Ei as C,Xo as N,ii as a,Oi as b,ni as c,Mo as i,_o as o};
